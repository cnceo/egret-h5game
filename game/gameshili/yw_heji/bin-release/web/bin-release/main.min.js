var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?s(a):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var basic;!function(t){var e=function(){function t(e,i,s,a,n,o,h){void 0===s&&(s=null),void 0===a&&(a=0),void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===h&&(h=0),this._oldProperties={},this._t=0,this.target=e,this._calPos=s?s:t.round,this.duration=i,this.loop=a,this.reverse=o,this.delay=h,this.updateRegisterPos(),n&&this.play()}var e=__define,i=t,s=i.prototype;return s.updateRegisterPos=function(){this._oldProperties.x=this.target.x,this._oldProperties.y=this.target.y,this._oldProperties.scaleX=this.target.scaleX,this._oldProperties.scaleY=this.target.scaleY,this._oldProperties.skewX=this.target.skewX,this._oldProperties.skewY=this.target.skewY,this._oldProperties.rotation=this.target.rotation},s.play=function(){this._tween||(this._count=0,this._playStep())},s._playStep=function(){return this.loop>0&&this._count>=this.loop?void this.stop():(this._count++,this.t=this.reverse?2*Math.PI:0,this._tween=egret.Tween.get(this),void this._tween.wait(this.delay).to({t:this.reverse?0:2*Math.PI},this.duration).call(this._playStep,this))},e(s,"t",function(){return this._t},function(t){if(this.target.stage){this._t=t;var e=this._calPos.call(this,this._t);this.target.x=(e.hasOwnProperty("x")?e.x:0)+this._oldProperties.x,this.target.y=(e.hasOwnProperty("y")?e.y:0)+this._oldProperties.y,e.hasOwnProperty("sx")&&(this.target.scaleX=e.sx),e.hasOwnProperty("sy")&&(this.target.scaleY=e.sy),e.hasOwnProperty("skewX")&&(this.target.skewX=e.skewX),e.hasOwnProperty("skewY")&&(this.target.skewY=e.skewY),e.hasOwnProperty("r")&&(this.target.rotation=e.r)}}),s.stop=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=1e3),egret.Tween.removeTweens(this),this._tween=null,t&&egret.Tween.get(this.target).to(this._oldProperties,i)},e(s,"playing",function(){return null!=this._tween}),t.round=function(t){return{x:Math.cos(t),y:Math.sin(t)}},t.cos=function(t){return{x:Math.cos(t),y:0}},t.sin=function(t,e){return t=t||1,{x:0,y:Math.sin(e)*t}},t.rotate=function(t){return{r:360*t/Math.PI/2}},t.shake=function(t,e){return t=t||10,{r:Math.sin(2*e)*t}},t.breath=function(t,e){return{sx:Math.sin(e)*t+1,sy:-Math.sin(e+Math.PI/4)*t+1}},t}();t.Wave=e,egret.registerClass(e,"basic.Wave",["basic.IAnimation"])}(basic||(basic={}));var basic;!function(t){var e;!function(e){var i=function(){function t(){}var e=(__define,t);e.prototype;return t.centerPopUp=function(t){t.horizontalCenter=t.verticalCenter=0},t.centerHorizontal=function(t){t.horizontalCenter=0},t.centerVertical=function(t){t.verticalCenter=0},t.notCenterPopUp=function(t){t.horizontalCenter=t.verticalCenter=0/0},t.getCenterPos=function(t){var e=0,i=0,s=t.parent;return s&&(e=.5*(s.width-t.width),i=.5*(s.height-t.height)),{x:e,y:i}},t.transDirection=function(t){var e;switch(t){case"up":e=0;break;case"right":e=1;break;case"bottom":e=2;break;case"left":e=3}return e},t}();e.Utils=i,egret.registerClass(i,"basic.dialogEffect.Utils");var s=function(){function t(){}var e=(__define,t),s=e.prototype;return s.show=function(t,e,s,a,n){e.addChild(t),i.centerPopUp(t)},s.hide=function(t,e,i,s,a){e.removeChild(t)},t}();e.None=s,egret.registerClass(s,"basic.dialogEffect.None",["basic.dialogEffect.IDialogEffect"]);var a=function(){function t(){}var e=(__define,t),s=e.prototype;return s.show=function(e,s,a,n,o){e.alpha=0,s.addChild(e),i.centerPopUp(e);var h=o&&o.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:1},h)},s.hide=function(e,i,s,a,n){var o=n&&n.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:0},o).call(function(){i.removeChild(e)},this)},t.DEFAULT_DURATION=200,t}();e.Fade=a,egret.registerClass(a,"basic.dialogEffect.Fade",["basic.dialogEffect.IDialogEffect"]);var n=function(){function e(){}var s=(__define,e),a=s.prototype;return a.show=function(s,a,n,o,h){e.outPos||(e.outPos=[[0,-t.StageProxy.height],[t.StageProxy.width,0],[0,t.StageProxy.height],[-t.StageProxy.width,0]]),a.addChild(s),i.notCenterPopUp(s),a.width=t.StageProxy.width;var r=e.outPos[i.transDirection(h.direction)],_=i.getCenterPos(s);s.x=0==r[0]?_.x:r[0],s.y=0==r[1]?_.y:r[1];var c=h&&h.duration||e.DEFAULT_DURATION,l={x:_.x,y:_.y};egret.Tween.get(s).to(l,c,h?h.ease:null),h&&h.withFade&&egret.Tween.get(s).to({alpha:1},c)},a.hide=function(t,s,a,n,o){var h=e.outPos[i.transDirection(o.direction)],r=o&&o.duration||e.DEFAULT_DURATION,_=i.getCenterPos(t),c={x:0==h[0]?_.x:h[0],y:0==h[1]?_.y:h[1]};egret.Tween.get(t).to(c,r,o?o.ease:null).call(function(){s.removeChild(t),i.centerPopUp(t)},this),o&&o.withFade&&egret.Tween.get(t).to({alpha:0},r)},e.DEFAULT_DURATION=500,e}();e.Flew=n,egret.registerClass(n,"basic.dialogEffect.Flew",["basic.dialogEffect.IDialogEffect"]);var o=function(){function t(){}var e=(__define,t),s=e.prototype;return s.show=function(e,s,a,n,o){var h=o&&o.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=0;var r={scaleX:1,scaleY:1};s.addChild(e),i.centerPopUp(e),egret.Tween.get(e).to(r,h,o?o.ease:null),o&&o.withFade&&egret.Tween.get(e).to({alpha:1},h)},s.hide=function(e,i,s,a,n){var o=n&&n.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=1;var h={scaleX:0,scaleY:0};egret.Tween.get(e).to(h,o,n?n.ease:null).call(function(){i.removeChild(e),e.scaleX=e.scaleY=1},this),n&&n.withFade&&egret.Tween.get(e).to({alpha:0},o)},t.DEFAULT_DURATION=200,t}();e.Scale=o,egret.registerClass(o,"basic.dialogEffect.Scale",["basic.dialogEffect.IDialogEffect"])}(e=t.dialogEffect||(t.dialogEffect={}))}(basic||(basic={}));var basic;!function(t){var e=function(e){function i(i,s,a,n,o){void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===n&&(n=null),void 0===o&&(o=!0),e.call(this),this._excludeActionsClose=[],this.showEffect=i||t.dialogEffect.None,this.showEffectParams=s,this.closeEffect=a||t.dialogEffect.None,this.closeEffectParams=n,this.popupShowBanner=o,this.init()}__extends(i,e);var s=(__define,i),a=s.prototype;return a.init=function(){},a.addExcludeForClose=function(t){this._excludeActionsClose=this._excludeActionsClose.concat(t)},a.dealAction=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callback&&this._callback(t||"close",e),this._excludeActionsClose.indexOf(t)<0&&this.close()},a.popup=function(e,i){void 0===e&&(e=null),void 0===i&&(i=!0),t.PopUpManager.addPopUp(this,this.showEffect,this.showEffectParams,e,i)},a.close=function(){t.PopUpManager.removePopUp(this,this.closeEffect,this.closeEffectParams)},i}(eui.Component);t.PanelBase=e,egret.registerClass(e,"basic.PanelBase")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){this._pupUpStack=[],this._popLayer=t.SceneManager.instance.popLayer}var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==e._instance&&(e._instance=new e),e._instance}),e.addPopUp=function(t,i,s,a,n){void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===n&&(n=!0),e.instance.addPopUp(t,i,s,a,n)},e.removePopUp=function(t,i,s){void 0===i&&(i=null),void 0===s&&(s=null),e.instance.removePopUp(t,i,s)},a.addPopUp=function(t,e,i,s,a){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=!0),!t.parent){this._pupUpStack.unshift({target:t,modalTouchFun:s,modal:a}),this.updateModalMask(this._pupUpStack[0]);var n=this.createEffectInstance(e);n.show(t,this._popLayer,function(){},this,i)}},a.removePopUp=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),t.parent){this.getInStack(t,!0);var s;this._pupUpStack.some(function(t){return t.modal?(s=t,!0):void 0}),s?this.updateModalMask(s):this.setModalMaskVisible(!1);var a=this.createEffectInstance(e);a.hide(t,this._popLayer,function(){},this,i)}},a.removeTopPupUp=function(){if(this._popLayer.numChildren>0){var t=this._popLayer.getChildAt(this._popLayer.numChildren-1);return t.close(),!0}return!1},a.getInStack=function(t,e){void 0===e&&(e=!1);var i;return this._pupUpStack.some(function(e,s){return e.target==t?(i={item:e,index:s},!0):void 0}),i&&e&&this._pupUpStack.splice(i.index,1),i},a.createEffectInstance=function(e){void 0===e&&(e=null);var i;return i=e?new e:new t.dialogEffect.None},a.onModalMaskTap=function(t){var e=this._pupUpStack[0];e&&e.modal&&e.modalTouchFun&&e.modalTouchFun()},a.updateModalMask=function(t){var e=this._popLayer.getChildIndex(this._modalMask),i=this._popLayer.getChildIndex(t.target);e!=i-1&&this.setModalMaskVisible(!0,i)},a.setModalMaskVisible=function(t,i){void 0===i&&(i=-1),t?(this.modalMask.fillColor=e.modalMaskColor,this.modalMask.fillAlpha=e.modalMaskAlpha,this.modalMask.alpha=0,0==e.modalMaskIsShow?this.modalMask.visible=!1:this.modalMask.visible=!0,i>=0?(this.setModalMaskVisible(!0),this._popLayer.addChildAt(this.modalMask,i)):this._popLayer.addChild(this.modalMask),egret.Tween.get(this.modalMask).to({alpha:1},e.modalMaskDuration)):this.modalMask.parent&&egret.Tween.get(this.modalMask).to({alpha:0},e.modalMaskDuration).call(function(t){this._popLayer.removeChild(t)},this,[this.modalMask])},i(a,"modalMask",function(){return this._modalMask||(this._modalMask=new eui.Rect,this._modalMask.width=t.StageProxy.width,this._modalMask.height=t.StageProxy.height,this._modalMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onModalMaskTap,this)),this._modalMask}),e.modalMaskColor=0,e.modalMaskAlpha=.6,e.modalMaskDuration=200,e.modalMaskIsShow=!0,e}();t.PopUpManager=e,egret.registerClass(e,"basic.PopUpManager")}(basic||(basic={}));var basic;!function(t){var e=function(e){function i(){e.call(this),this.touchChildren=!0,this.touchEnabled=!1,this.width=t.StageProxy.stage.stageWidth,this.height=t.StageProxy.stage.stageHeight}__extends(i,e);var s=(__define,i),a=s.prototype;return a._beforeShow=function(t){void 0===t&&(t=null),this.beforeShow(t)},a._beforeHide=function(t){void 0===t&&(t=null),this.beforeHide(t)},a._onShow=function(t){void 0===t&&(t=null),this.onShow(t)},a._onHide=function(t){void 0===t&&(t=null),this.onHide(t)},a.beforeShow=function(t){void 0===t&&(t=null)},a.beforeHide=function(t){void 0===t&&(t=null)},a.onShow=function(t){void 0===t&&(t=null)},a.onHide=function(t){void 0===t&&(t=null)},i}(eui.Component);t.SceneBase=e,egret.registerClass(e,"basic.SceneBase")}(basic||(basic={}));var basic;!function(t){var e;!function(t){var e=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,s){void 0===s&&(s=null),t&&(t.visible=!1,i.removeChild(t)),e.alpha=1,e.visible=!0,i.addChild(e),s&&s()},t}();t.None=e,egret.registerClass(e,"basic.sceneEffect.None",["basic.sceneEffect.ISceneEffect"]);var i=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,s){void 0===s&&(s=null),egret.Tween.get(t).to({alpha:0},500),e.alpha=0,e.visible=!0,i.addChild(e),egret.Tween.get(e).to({alpha:1},500).call(function(){i.removeChild(t),s&&s()})},t}();t.Fade=i,egret.registerClass(i,"basic.sceneEffect.Fade",["basic.sceneEffect.ISceneEffect"]);var s=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,s){function a(){egret.Tween.get(e).to({alpha:1},500).call(function(){s&&s()},this)}void 0===s&&(s=null),e.alpha=0,e.visible=!0,i.addChild(e),t?egret.Tween.get(t).to({alpha:0},500).call(function(){i.removeChild(t),a()},this):a()},t}();t.FadeBlack=s,egret.registerClass(s,"basic.sceneEffect.FadeBlack",["basic.sceneEffect.ISceneEffect"])}(e=t.sceneEffect||(t.sceneEffect={}))}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){this.topScene=null,this.mapScene=new t.HashMap,this.mapSceneDef=new t.HashMap,this.mapTopScene=new t.HashMap}var s=__define,a=e,n=a.prototype;return s(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),e.init=function(t){e.instance.init(t)},e.addTopScene=function(t){e.instance.addTopScene(t)},e.removeTopScene=function(t){e.instance.removeTopScene(t)},e.addBottomScene=function(t,i){e.instance.addBottomScene(t,i)},e.register=function(t,i,s){void 0===s&&(s=null),e.instance.register(t,i,s)},e.show=function(t,i,s,a,n,o){void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===n&&(n=!1),void 0===o&&(o=null),e.instance.show(t,i,s,a,n,o)},e.back=function(t,i,s){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===s&&(s=null),e.instance.back(t,i,s)},n.init=function(t){this.root=t,this.root.addChild(this.bottomLayer=new eui.Group),this.root.addChild(this.middleLayer=new eui.Group),this.root.addChild(this.topLayer=new eui.Group),this.root.addChild(this.popLayer=new eui.Group),this.bottomLayer.touchEnabled=!1,this.middleLayer.touchEnabled=!1,this.topLayer.touchEnabled=!1,this.popLayer.touchEnabled=!1},n.addTopScene=function(t){if(this.mapTopScene.containsKey(t))this.mapTopScene.get(t)._beforeShow(null),this.mapTopScene.get(t).visible=!0,this.topLayer.setChildIndex(this.mapTopScene.get(t),this.topLayer.numChildren-1);else{var e,i=this.mapSceneDef.get(t),s=i.sceneDef;e=new s,this.mapTopScene.put(t,e),this.mapTopScene.get(t)._beforeShow(null),this.topLayer.addChild(this.mapTopScene.get(t))}},n.removeTopScene=function(t){this.mapTopScene.containsKey(t)&&(this.mapTopScene.get(t)._beforeHide(null),this.mapTopScene.get(t).visible=!1)},n.addBottomScene=function(t,e){var i=new e;this.bottomLayer.addChild(i),i._beforeShow(null)},n.register=function(t,e,s){void 0===s&&(s=null),this.mapSceneDef.put(t,new i(e,s))},n.show=function(e,i,s,a,n,o){if(void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===n&&(n=!1),void 0===o&&(o=null),this.currentSceneName!=e){var h,r;if(this.mapScene.containsKey(e))r=this.mapScene.get(e);else{var _=this.mapSceneDef.get(e),c=_.sceneDef;r=new c,this.mapScene.put(e,r)}!h&&this.currentSceneName?(h=s?new s:new t.sceneEffect.None,this.currentScene._beforeHide(i)):h=new t.sceneEffect.FadeBlack,r.touchChildren=!1,h.handover(this.currentScene,r,this.middleLayer,function(t,e){t&&t._onHide(i),e.touchChildren=!0,e._onShow(i),a&&a()}.bind(this,this.currentScene,r)),this.currentScene=r,this.currentSceneName=e,n?this.lastSceneName=e:(this.currentScene.lastSceneName=null!=o?o:this.lastSceneName,this.lastSceneName=e),this.currentScene._beforeShow(i)}},n.back=function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this.currentScene.lastSceneName&&""!=this.currentScene.lastSceneName?(this.show(this.currentScene.lastSceneName,t,e,i,!0),!0):!1},e}();t.SceneManager=e,egret.registerClass(e,"basic.SceneManager");var i=function(){function t(t,e){void 0===e&&(e=null),this.sceneDef=t,this.resPack=e}var e=(__define,t);e.prototype;return t}();t.SceneConfig=i,egret.registerClass(i,"basic.SceneConfig");var s=function(){function t(t,e,i,s,a){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===a&&(a=!1),this.params=null,this.effectDef=null,this.callback=null,this.back=null,this.name=t,this.params=e,this.effectDef=i,this.callback=s,this.back=a}var e=(__define,t);e.prototype;return t}();t.ShowEntity=s,egret.registerClass(s,"basic.ShowEntity")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(){t.eventDispatcher=new egret.EventDispatcher},t.dispatch=function(e,i){void 0===i&&(i=null),i?t.eventDispatcher.dispatchEventWith(e,!1,i):t.eventDispatcher.dispatchEvent(new egret.Event(e))},t.addListener=function(e,i,s){t.eventDispatcher.addEventListener(e,i,s)},t.removeListener=function(e,i,s){t.eventDispatcher.removeEventListener(e,i,s)},t}();t.Dispatcher=e,egret.registerClass(e,"basic.Dispatcher")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){}var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.getLanguageMute=function(){var e=Number(t.localStorage.getItem("languageMute"));return e},a.setLanguageMute=function(e){t.localStorage.setItem("languageMute",e.toString())},e}();t.LanguageManager=e,egret.registerClass(e,"basic.LanguageManager")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(t){this.ID=t},t.getItem=function(t){return egret.localStorage.getItem(this.ID&&""!=this.ID?this.ID+"_"+t:t)},t.setItem=function(t,e){return egret.localStorage.setItem(this.ID&&""!=this.ID?this.ID+"_"+t:t,e)},t.getItemObj=function(t,e){void 0===e&&(e=null);var i;try{i=JSON.parse(this.getItem(t))}catch(s){}return i||(i=e),i},t.setItemObj=function(t,e){return this.setItem(t,JSON.stringify(e))},t}();t.localStorage=e,egret.registerClass(e,"basic.localStorage")}(basic||(basic={}));var basic;!function(t){var e=function(t){function e(){t.call(this),egret.ExternalInterface.addCallback("egretCall",this.egretCall.bind(this))}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),e.call=function(t,e){void 0===e&&(e=null),this.instance.call(t,e)},i(a,"isNative",function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE}),a.egretCall=function(t){var e=JSON.parse(t),i=e.method;this.dispatchEventWith(i,!1,e)},a.call=function(t,e){void 0===e&&(e=null),e=e||{},e.method=t,egret.ExternalInterface.call("nativeCall",JSON.stringify(e))},a.navigateToUrl=function(t){this.isNative?this.call("navigateToUrl",{url:t}):location.href=t},a.closeApp=function(){this.call("closeApp")},a.showBanner=function(){this.isNative&&this.call("showBanner")},a.hideBanner=function(){this.isNative&&this.call("hideBanner")},a.showInterstitial=function(){this.isNative&&this.call("showInterstitial")},a.jumpApp=function(t){this.isNative?this.call("jumpApp",t):this.navigateToUrl(t.android_apk_url)},a.openAppMarket=function(){this.isNative&&this.call("openAppMarket",{})},a.share=function(t,e,i,s,a){this.isNative&&this.call("share",{title:t,name:e,description:i,picture:s,link:a})},a.shareSystem=function(t,e,i){this.isNative?this.call("shareSystem",{title:t,description:e}):this.share(t,"",e,"",i)},a.sendEvent=function(t,e){this.isNative&&this.call("sendEvent",{eventId:t,params:e})},e}(egret.EventDispatcher);t.Native=e,egret.registerClass(e,"basic.Native")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){}var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.playMusic=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=0),t&&(this.musicRes=t),!this.musicMute){this.stopMusic();var i=RES.getRes(this.musicRes);0==e?this.musicChannel=i.play(0):this.musicChannel=i.play(0,e),this.musicChannel.volume=this.musicVolume,this.musicChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this)}},a.setVolume=function(){this.musicChannel&&(this.musicChannel.volume=this.musicVolume)},a.onMusicComplete=function(t){this.stopMusic()},a.stopMusic=function(){this.musicChannel&&(this.musicChannel.stop(),this.musicChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this),this.musicChannel=null)},a.switchMusic=function(){this.musicMute=!this.musicMute,this.musicRes&&(this.musicMute?this.stopMusic():this.playMusic())},i(a,"musicVolume",function(){var e;return e=t.localStorage.getItem("musicVolume")?Number(t.localStorage.getItem("musicVolume")):1},function(e){t.localStorage.setItem("musicVolume",e.toString())}),i(a,"musicMute",function(){var e=t.localStorage.getItem("musicMute");return e?"1"==e:!1},function(e){t.localStorage.setItem("musicMute",e?"1":"0")}),a.playEffect=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=1),t&&(this.effectRes=t),!this.effectMute){var i=RES.getRes(this.effectRes);this.effectChannel=i.play(0,e),this.effectChannel.volume=this.effectVolume}},a.stopEffect=function(){this.effectChannel&&(this.effectChannel.stop(),this.effectChannel=null)},a.switchEffect=function(){this.effectMute=!this.effectMute},i(a,"effectMute",function(){var e=t.localStorage.getItem("effectMute");return e?"1"==e:!1},function(e){t.localStorage.setItem("effectMute",e?"1":"0")}),i(a,"effectVolume",function(){var e;return e=t.localStorage.getItem("effectVolume")?Number(t.localStorage.getItem("effectVolume")):1},function(e){t.localStorage.setItem("effectVolume",e.toString())}),a.switchAll=function(){this.switchEffect(),this.switchMusic()},e}();t.SoundManager=e,egret.registerClass(e,"basic.SoundManager")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=__define,i=t;i.prototype;return t.init=function(t,e){this.stage=t,this.root=e},e(t,"width",function(){return this.stage.stageWidth}),e(t,"height",function(){return this.stage.stageHeight}),t}();t.StageProxy=e,egret.registerClass(e,"basic.StageProxy")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(t,e){void 0===e&&(e=0),this._now_repeat=0,this._delay=t,this._repeat=e,this._start_time=egret.getTimer(),this._timer=null,this._obj=null,this._onTimer=null,this._onTimerComplete=null}var i=(__define,e),s=i.prototype;return s.addEventListener=function(e,i,s){this._obj=s,e==t.TimerEvent.TIMER?this._onTimer=i.bind(s):e==t.TimerEvent.TIMER_COMPLETE&&(this._onTimerComplete=i.bind(s))},s.removeEventListener=function(e,i,s){e==t.TimerEvent.TIMER?this._onTimer=null:e==t.TimerEvent.TIMER_COMPLETE&&(this._onTimerComplete=null)},s.start=function(){this._timer=new egret.Timer(Math.floor(this._delay/10)),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer.bind(this),this._obj),this._timer.start()},s.stop=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer.bind(this),this._obj),this._timer=null),this._obj=null},s.onTimer=function(e){var i;if(this._now_time=egret.getTimer()-this._start_time,i=Math.floor(this._now_time/this._delay),this._onTimer&&i!=this._now_repeat&&this._onTimer(t.TimerEvent),this._now_repeat=i,this._now_repeat>=this._repeat){try{this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this._obj),this._timer=null)}catch(s){}this._onTimerComplete&&this._onTimerComplete(t.TimerEvent)}},e}();t.Timer=e,egret.registerClass(e,"basic.Timer")}(basic||(basic={}));var basic;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e);i.prototype;return e.TIMER="timer",e.TIMER_COMPLETE="timer_complete",e}(egret.Event);t.TimerEvent=e,egret.registerClass(e,"basic.TimerEvent")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){this.clear()}var e=__define,i=t,s=i.prototype;return s.containsKey=function(t){return t in this.obj},s.containsValue=function(t){for(var e in this.obj)if(this.obj[e]==t)return!0;return!1},s.put=function(t,e){this.containsKey(t)||(this.obj[t]=e,this._length++)},s.get=function(t){return this.containsKey(t)?this.obj[t]:null},s.remove=function(t){if(this.containsKey(t)){var e=this.obj;return delete this.obj[t],this._length--,e}return null},s.foreach=function(t,e){for(var i in this.obj)if(!t.call(e,i,this.obj[i]))break},s.randomGet=function(){var t=this.valueSet;return t[Math.floor(Math.random()*t.length)]},e(s,"keySet",function(){var t=[];for(var e in this.obj)t.push(e);return t}),e(s,"valueSet",function(){var t=[];for(var e in this.obj)t.push(this.obj[e]);return t}),e(s,"size",function(){return this._length}),s.clear=function(){this._length=0,this.obj={}},t}();t.HashMap=e,egret.registerClass(e,"basic.HashMap")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.distancePoint=function(t,e){return this.distance(t.x,t.y,e.x,e.y)},t.distance=function(t,e,i,s){return Math.sqrt((t-i)*(t-i)+(e-s)*(e-s))},t.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t.makeRandomInt=function(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e))+e},t.makeRandomFloat=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},t.makeRandomByRange=function(t,e){return t+(Math.random()*e*2-e)},t.makeOrderIntArray=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);for(var s=[],a=e;t>=a;a+=i)s.push(a);return s},t.mixArray=function(t){for(var e=0,i=Math.round(t.length/2);i>e;e++){var s=this.makeRandomInt(t.length),a=this.makeRandomInt(t.length),n=t[s];t[s]=t[a],t[a]=n}return t},t.mixArray2=function(t){for(var e,i,s=t[0].length,a=t.length,n=0,o=Math.round(s*a/2);o>n;n++){e=[this.makeRandomInt(s),this.makeRandomInt(a)],i=[this.makeRandomInt(s),this.makeRandomInt(a)];var h=t[e[0]][e[1]];t[e[0]][e[1]]=t[i[0]][i[1]],t[i[0]][i[1]]=h}return t},t.getRandomFromArray=function(t){return t[this.makeRandomInt(t.length)]},t.fixRange=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.roundFix=function(t,e,i){return void 0===i&&(i=0),i>t?t+=e-i:t>=e&&(t-=e-i),t},t.radiusToAngle=function(t){return 180*t/Math.PI},t.angleToRadius=function(t){return t*Math.PI/180},t.turnRight=function(t){for(var e=[],i=0,s=t.length;s>i;i++)e.push([]);for(var a=0,n=t.length;n>a;a++)for(var o=0,h=t[a].length;h>o;o++)e[a][o]=t[h-o-1][a];return e},t.turnLeft=function(t){for(var e=[],i=0,s=t.length;s>i;i++)e.push([]);for(var a=0,n=t.length;n>a;a++)for(var o=0,h=t[a].length;h>o;o++)e[a][o]=t[o][h-a-1];return e},t.calDir=function(t,e,i,s){if(t==i&&e==s)return-1;var a,n=Math.atan2(s-e,i-t);return a=Math.abs(n)<Math.PI/4?0:Math.abs(n)>Math.PI/4*3?2:n>0?1:3},t.sign=function(t){return 0==t?0:t>0?1:-1},t}();t.MathUtils=e,egret.registerClass(e,"basic.MathUtils")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.injectProp=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=!0),!e)return!1;var s=!0;for(var a in e){var n=e[a];i&&"function"==typeof n||(t[a]=n)}return s},t.clone=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0);var s=e?new e:{};return this.injectProp(s,t,i),s},t.arrToIntArr=function(t){for(var e=0,i=t.length;i>e;e++)t[e]=parseInt(t[e]);return t},t.getUrlParams=function(){var t={},e=window.location.href,i=e.indexOf("?");if(0>i)return t;for(var s=e.substr(i+1).split("&"),a=0;a<s.length;a++){var n=s[a].split("=");t[n[0]]=n[1]}return t},t.getUrlBase=function(){var t=window.location.href,e=t.indexOf("?");return t.substring(0,0>e?t.length:e)},t.anchorCenter=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.anchorRate(t,.5,.5,e,i)},t.anchorRate=function(t,e,i,s,a){void 0===s&&(s=0),void 0===a&&(a=0),0==s&&(s=t.width),0==a&&(a=t.height),t.x+=t.anchorOffsetX=s*e,t.y+=t.anchorOffsetY=a*i},t.obj2query=function(t){if(!t)return"";var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("&")},t}();t.Utils=e,egret.registerClass(e,"basic.Utils")}(basic||(basic={}));var Comm=function(){function t(){this.is_connect=!1}var e=__define,i=t,s=i.prototype;return e(t,"instance",function(){return void 0==this._instance&&(this._instance=new t),this._instance}),s.init=function(){this.socket=new Socket,this._ip=GameConfig.apiIp,this._port=GameConfig.apiPort,this._address=GameConfig.apiAddress,this._namespace=GameConfig.apiNameSpace,this.socket.init(this._ip,this._port,this._address,this._namespace,this.onCallBack),this.socket.connect()},s.onCallBack=function(t,e){switch(console.log("收到数据内容："+e),t.type){case"welcome":this.is_connect=!0;break;case"login":basic.Dispatcher.dispatch(EventNames.SHOW_START,t);break;case"rankingList":basic.Dispatcher.dispatch(EventNames.SHOW_RANKING,t);break;case"dataChange":basic.Dispatcher.dispatch(EventNames.DATA_CHANGE,t);break;case"exchangeGold":basic.Dispatcher.dispatch(EventNames.DATA_CHANGE,t);break;case"joinRoom":basic.Dispatcher.dispatch(EventNames.GF_JOINROOM,t);break;case"infoRoom":basic.Dispatcher.dispatch(EventNames.GF_GAMEINFO,t);break;case"system":basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:t.msg});break;case"result":basic.Dispatcher.dispatch(EventNames.GF_GAMEOVER,t);break;case"leaveRoom":basic.Dispatcher.dispatch(EventNames.GF_LEAVEROOM,t);break;case"newAccount":basic.Dispatcher.dispatch(EventNames.SHOW_NEWACCOUNT,t);break;case"chatList":basic.Dispatcher.dispatch(EventNames.SHOW_TOTALCHAT,t);break;case"chat":basic.Dispatcher.dispatch(EventNames.SHOW_CHAT,t)}},s.sendSocket=function(t){this.socket.sendToken(t)},s.jugeConnect=function(){return this.socket.jugeConnect()},s.closeConnect=function(){this.socket.close()},t}();egret.registerClass(Comm,"Comm");var Comm_ebg=function(){function t(){this.juge_init=!1,this.juge_login=!1}var e=__define,i=t,s=i.prototype;return e(t,"instance",function(){return void 0==this._instance&&(this._instance=new t),this._instance}),s.init=function(){t.instance.juge_init=!0,t.instance.juge_login=!1,this.socket=new Socket,this._ip=GameConfig.ebg_apiIp,this._port=GameConfig.ebg_apiPort,this._address=GameConfig.ebg_apiAddress,this._namespace=GameConfig.ebg_apiNameSpace,this.socket.init(this._ip,this._port,this._address,this._namespace,this.onCallBack),this.socket.connect()},s.onCallBack=function(e,i){var s;switch(s=e.type,console.log("ebg_收到数据："+i),s){case"welcome":t.instance.login();break;case"login":t.instance.juge_login=!0,basic.Dispatcher.dispatch(EventNames.GAME_LOGIN,e);break;case"system":0==t.instance.juge_login&&basic.Dispatcher.dispatch(EventNames.REMOVE_WAITING),basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:e.msg});break;case"gameInfo":basic.Dispatcher.dispatch(EventNames.EBG_GAMEINFO,e);break;case"dealerChange":basic.Dispatcher.dispatch(EventNames.EBG_CHANGEZHUANG,e);break;case"history":basic.Dispatcher.dispatch(EventNames.EBG_HISTORY,e);break;case"gameStatus":basic.Dispatcher.dispatch(EventNames.EBG_CHANGESTATUS,e);break;case"betNotify":basic.Dispatcher.dispatch(EventNames.EBG_CHANGEYAZHU,e);break;case"bet":basic.Dispatcher.dispatch(EventNames.EBG_USERYAZHU,e);break;case"open":basic.Dispatcher.dispatch(EventNames.EBG_GAMEOPEN,e);break;case"result":basic.Dispatcher.dispatch(EventNames.EBG_GAMERESULT,e);break;case"dealerList":basic.Dispatcher.dispatch(EventNames.EBG_ZHUANGLIST,e);break;case"chat":basic.Dispatcher.dispatch(EventNames.EBG_SHOWCHAT,e)}},s.login=function(){var t={type:"login",token:UserData.User_Token};this.sendSocket(t)},s.sendSocket=function(t){console.log("发送数据："+JSON.stringify(t)),this.socket.sendToken(t)},s.jugeConnect=function(){return this.socket.jugeConnect()},s.closeConnect=function(){this.socket.close()},t}();egret.registerClass(Comm_ebg,"Comm_ebg");var Comm_jsys=function(){function t(){this.juge_init=!1,this.juge_login=!1}var e=__define,i=t,s=i.prototype;return e(t,"instance",function(){return void 0==this._instance&&(this._instance=new t),this._instance}),s.init=function(){this.socket=new Socket,this._ip=GameConfig.jsys_apiIp,this._port=GameConfig.jsys_apiPort,this._address=GameConfig.jsys_apiAddress,this._namespace=GameConfig.jsys_apiNameSpace,this.socket.init(this._ip,this._port,this._address,this._namespace,this.onCallBack),this.socket.connect(),t.instance.juge_init=!0,t.instance.juge_login=!1},s.onCallBack=function(e,i){var s;switch(s=e.type,console.log("mlxyyh_收到数据："+i),s){case"welcome":t.instance.login();break;case"login":t.instance.juge_login=!0,basic.Dispatcher.dispatch(EventNames.GAME_LOGIN,e);break;case"system":0==t.instance.juge_login&&basic.Dispatcher.dispatch(EventNames.REMOVE_WAITING),basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:e.msg});break;case"gameInfo":basic.Dispatcher.dispatch(EventNames.JSYS_GAMEINFO,e);break;case"history":basic.Dispatcher.dispatch(EventNames.JSYS_HISTORY,e);break;case"dealerChange":basic.Dispatcher.dispatch(EventNames.JSYS_CHANGEZHUANG,e);break;case"gameStatus":basic.Dispatcher.dispatch(EventNames.JSYS_CHANGESTATUS,e);break;case"betNotify":basic.Dispatcher.dispatch(EventNames.JSYS_CHANGEYAZHU,e);break;case"bet":basic.Dispatcher.dispatch(EventNames.JSYS_USERYAZHU,e);break;case"open":basic.Dispatcher.dispatch(EventNames.JSYS_GAMEOPEN,e);break;case"result":basic.Dispatcher.dispatch(EventNames.JSYS_GAMERESULT,e);break;case"dealerList":basic.Dispatcher.dispatch(EventNames.JSYS_ZHUANGLIST,e);
break;case"bigWinUser":basic.Dispatcher.dispatch(EventNames.JSYS_SHOWWINBIG,e);break;case"chat":basic.Dispatcher.dispatch(EventNames.JSYS_SHOWCHAT,e);break;case"dealerGoldNotEnough":basic.Dispatcher.dispatch(EventNames.JSYS_BAOZHUANG,e)}},s.login=function(){var t={type:"login",token:UserData.User_Token};this.sendSocket(t)},s.sendSocket=function(t){console.log("发送数据："+JSON.stringify(t)),this.socket.sendToken(t)},s.jugeConnect=function(){return this.socket.jugeConnect()},s.closeConnect=function(){this.socket.close()},t}();egret.registerClass(Comm_jsys,"Comm_jsys");var Socket=function(){function t(){this.NS="org.jwebsocket.plugins.bugwar",this.webSocket=new egret.WebSocket,this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.webSocket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.webSocket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this)}var e=(__define,t),i=e.prototype;return i.init=function(t,e,i,s,a){this.ip=t,this.port=e,this.address=i,this.NS=s,this.callback=a},i.connect=function(){this.webSocket.connect(this.address,this.port)},i.close=function(){this.webSocket.close()},i.onSocketOpen=function(){console.log("连接成功_"+this.NS)},i.onSocketClose=function(){console.log("连接关闭_"+this.NS)},i.sendToken=function(t){t.ns=this.NS;var e=JSON.stringify(t);this.webSocket.writeUTF(e),console.log("发送数据："+e)},i.onReceiveMessage=function(t){var e=this.webSocket.readUTF(),i=JSON.parse(e);this.callback&&this.callback(i,e)},i.jugeConnect=function(){return this.webSocket.connected},t}();egret.registerClass(Socket,"Socket");var Main=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),GameConfig.init(!1),Comm.instance.init(),basic.Dispatcher.init(),basic.StageProxy.init(this.stage,this),basic.SceneManager.init(this),basic.localStorage.init(GameConfig.gameName),basic.Dispatcher.addListener(EventNames.SHOW_TIPS,this.onShowTips,this),basic.Dispatcher.addListener(EventNames.SHOW_START,this.onShowStart,this),UserData.is_APP=!0,1==GameConfig.isApp()?"iOS"==egret.Capabilities.os?window.funRegister(this.IOScallBack.bind(this)):"Android"==egret.Capabilities.os&&(window.AndroidshowExitTips=this.AndroidshowExitTips):(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,this.stage.orientation=egret.OrientationMode.AUTO);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.AndroidshowExitTips=function(t){PanelExit.instance.show()},s.IOScallBack=function(t,e){"onGetAccount"==t?(UserData.User_Account=e,basic.Dispatcher.dispatch(EventNames.SHOW_USERMESSAGE,{showtype:0})):"onGetPassword"==t&&(UserData.User_Password=e,basic.Dispatcher.dispatch(EventNames.SHOW_USERMESSAGE,{showtype:1}))},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},s.onThemeLoadComplete=function(){LoaderData.is_ThemeLoadEnd=!0,this.tips=new Tips,basic.SceneManager.instance.root.addChild(this.tips),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},s.onResourceLoadComplete=function(t){"loading"==t.groupName?(LoaderData.is_loading_LoadEnd=!0,this.checkShowLoading(),RES.loadGroup("startload")):"startload"==t.groupName&&(LoaderData.is_start_LoadEnd=!0,this.createScene(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this))},s.checkShowLoading=function(){basic.SceneManager.register(SceneNames.SHOP,SceneShop),basic.SceneManager.register(SceneNames.START,SceneStart),basic.SceneManager.register(SceneNames.ABOUT,SceneAbout),basic.SceneManager.register(SceneNames.CUSTOM,SceneCustom),basic.SceneManager.register(SceneNames.CLAUSE,SceneClause),basic.SceneManager.register(SceneNames.GUOFEN,SceneGuoFen),basic.SceneManager.register(SceneNames.LOADING,SceneLoading),basic.SceneManager.register(SceneNames.RANKING,SceneRanking),basic.SceneManager.register(SceneNames.SAVEBOX,SceneSaveBox),basic.SceneManager.register(SceneNames.WAITING,SceneWaiting),basic.SceneManager.register(SceneNames.GAME_EBG,SceneGame_EBG),basic.SceneManager.register(SceneNames.GAME_JSYS,SceneGame_JSYS),LoaderData.is_ThemeLoadEnd&&(basic.SceneManager.addTopScene(SceneNames.LOADING),1==GameConfig.isApp()&&("iOS"==egret.Capabilities.os?window.IOShidePicture(""):"Android"==egret.Capabilities.os&&window.AndroidhidePicture("")))},s.createScene=function(){LoaderData.is_ThemeLoadEnd&&LoaderData.is_start_LoadEnd&&LoaderData.is_LoginEnd&&this.startCreateScene()},s.onItemLoadError=function(t){},s.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"startload"==t.groupName&&basic.Dispatcher.dispatch(EventNames.LOADING_PROGRESS,{itemsLoaded:t.itemsLoaded,itemsTotal:t.itemsTotal})},s.onShowTips=function(t){1==LoaderData.is_ThemeLoadEnd&&this.tips.show(t.data.tips)},s.onShowStart=function(t){LoaderData.is_LoginEnd=!0,UserData.User_Gold=t.data.gold,UserData.User_Id=t.data.playerId,UserData.User_Phone=t.data.phone,UserData.User_Name=t.data.nickName,UserData.User_VIP=t.data.vipLevel,UserData.User_Head=t.data.headImgURL,UserData.User_Token=t.data.token,UserData.User_SaveGold=t.data.goldReserve,1==GameConfig.isApp()?"iOS"==egret.Capabilities.os?(window.IOSsaveAccount(UserData.User_Account),window.IOSsavePassword(UserData.User_Password)):"Android"==egret.Capabilities.os&&(basic.localStorage.setItem("account",UserData.User_Account),basic.localStorage.setItem("password",UserData.User_Password)):(basic.localStorage.setItem("account",UserData.User_Account),basic.localStorage.setItem("password",UserData.User_Password)),LoaderData.is_start_LoadEnd&&this.createScene()},s.startCreateScene=function(){basic.SceneManager.removeTopScene(SceneNames.LOADING),basic.SceneManager.show(SceneNames.START,null,basic.sceneEffect.Fade)},e}(eui.UILayer);egret.registerClass(Main,"Main");var EventNames=function(){function t(){}var e=(__define,t);e.prototype;return t.SHOW_FACE="show_face",t.SHOW_TIPS="show_tips",t.SHOW_START="show_start",t.GAME_LOGIN="game_login",t.GOLD_CHANGE="gold_change",t.DATA_CHANGE="data_change",t.SHOW_RANKING="show_ranking",t.SHOW_NOWCARD="show_nowcard",t.REMOVE_WAITING="remove_waiting",t.LOADING_PROGRESS="loading_progress",t.SHOW_USERMESSAGE="show_usermessage",t.SHOW_NEWACCOUNT="show_newaccount",t.SHOW_TOTALCHAT="show_totalchat",t.SHOW_CHAT="show_chat",t.GF_JOINROOM="gf_joinroom",t.GF_GAMEINFO="gf_gameinfo",t.GF_GAMEOVER="gf_gameover",t.GF_LEAVEROOM="gf_leaveroom",t.JSYS_SHOWCHAT="jsys_showchat",t.JSYS_SHOWGOLD="jsys_showgold",t.JSYS_DELETECHAT="jsys_deletechat",t.JSYS_ADDBIAOQING="jsys_addbiaoqing",t.JSYS_SHOWBIAOQING="jsys_showbiaoqing",t.JSYS_ERROR="jsys_error",t.JSYS_GAMEINFO="jsys_gameinfo",t.JSYS_HISTORY="jsys_history",t.JSYS_CHANGEZHUANG="jsys_changezhuang",t.JSYS_CHANGESTATUS="jsys_changestatus",t.JSYS_CHANGEYAZHU="jsys_changeyazhu",t.JSYS_USERYAZHU="jsys_useryazhu",t.JSYS_GAMEOPEN="jsys_gameopen",t.JSYS_GAMERESULT="jsys_gameresult",t.JSYS_ZHUANGLIST="jsys_zhuanglist",t.JSYS_SHOWWINBIG="jsys_showwinbig",t.JSYS_STARTGENZHU="jsys_startgenzhu",t.JSYS_BAOZHUANG="jsys_baozhuang",t.EBG_SHOWGOLD="ebg_showgold",t.EBG_SHOWCHAT="ebg_showchat",t.EBG_DELETECHAT="ebg_deletechat",t.EBG_ADDBIAOQING="ebg_addbiaoqing",t.EBG_SHOWBIAOQING="ebg_showbiaoqing",t.EBG_ERROR="ebg_error",t.EBG_GAMEINFO="ebg_gameinfo",t.EBG_CHANGEZHUANG="ebg_changezhuang",t.EBG_HISTORY="ebg_history",t.EBG_CHANGESTATUS="ebg_changestatus",t.EBG_CHANGEYAZHU="ebg_changeyazhu",t.EBG_USERYAZHU="ebg_useryazhu",t.EBG_GAMEOPEN="ebg_gameopen",t.EBG_GAMERESULT="ebg_gameresult",t.EBG_ZHUANGLIST="ebg_zhuanglist",t}();egret.registerClass(EventNames,"EventNames");var GameConfig=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(t){t?(this.apiIp="192.168.0.140",this.apiPort=29701,this.apiAddress=this.apiIp+":"+this.apiPort+"/jWebSocket/jWebSocket",this.apiNameSpace="org.jwebsocket.plugins.heji",this.jsys_apiIp="192.168.0.140",this.jsys_apiPort=29703,this.jsys_apiAddress=this.jsys_apiIp+":"+this.jsys_apiPort+"/jWebSocket/jWebSocket",this.jsys_apiNameSpace="org.jwebsocket.plugins.jinshayinsha",this.ebg_apiIp="192.168.0.140",this.ebg_apiPort=29704,this.ebg_apiAddress=this.ebg_apiIp+":"+this.ebg_apiPort+"/jWebSocket/jWebSocket",this.ebg_apiNameSpace="org.jwebsocket.plugins.erbagang"):(this.apiIp="101.37.203.84",this.apiIp="116.62.62.167",this.apiPort=29701,this.apiAddress=this.apiIp+":"+this.apiPort+"/jWebSocket/jWebSocket",this.apiNameSpace="org.jwebsocket.plugins.heji",this.jsys_apiIp="101.37.203.84",this.jsys_apiIp="116.62.62.167",this.jsys_apiPort=29703,this.jsys_apiAddress=this.jsys_apiIp+":"+this.jsys_apiPort+"/jWebSocket/jWebSocket",this.jsys_apiNameSpace="org.jwebsocket.plugins.jinshayinsha",this.ebg_apiIp="101.37.203.84",this.ebg_apiIp="116.62.62.167",this.ebg_apiPort=29704,this.ebg_apiAddress=this.ebg_apiIp+":"+this.ebg_apiPort+"/jWebSocket/jWebSocket",this.ebg_apiNameSpace="org.jwebsocket.plugins.erbagang")},t.isWeiXin=function(){var t=navigator.userAgent.toString(),e=t.match(/MicroMessenger/i);return"MicroMessenger"==e?!0:!1},t.isApp=function(){return 0==this.isWeiXin()?egret.Capabilities.os.indexOf("Windows")>=0||egret.Capabilities.os.indexOf("Mac")>=0?!1:!0:!1},t.gameName="HeJi",t}();egret.registerClass(GameConfig,"GameConfig");var GameData=function(){function t(){}var e=(__define,t);e.prototype;return t.assGold=function(t,e){var i="",s=e;return null!=e&&(0==t?1e6>s?i=s.toString():(s=Math.floor(s/1e3),i=Number(s/10).toString()+"w"):1==t?1e8>s?i=this.assGold(0,s):(s=Math.floor(s/1e6),i=Number(s/100).toString()+"y"):2==t?0==s?i="0":1e8>s?(s=Math.floor(s/1e4),i=s.toString()+"w"):(s=Math.floor(s/1e6),i=Number(s/100).toString()+"y"):3==t&&(0==s?i="0":1e8>s?(s=Math.floor(s/1e4),i=s.toString()+"w"):(s=Math.floor(s/1e8),i=s.toString()+"y"))),i},t.assGold1=function(t,e){var i="",s=e;return null!=e&&(0==t?1e6>s?i=s.toString():(s=Math.floor(s/1e3),i=Number(s/10).toString()+"万"):1==t?1e8>s?i=this.assGold(0,s):(s=Math.floor(s/1e6),i=Number(s/100).toString()+"亿"):2==t?0==s?i="0":1e8>s?(s=Math.floor(s/1e4),i=s.toString()+"万"):(s=Math.floor(s/1e6),i=Number(s/100).toString()+"亿"):3==t&&(0==s?i="0":1e8>s?(s=Math.floor(s/1e4),i=s.toString()+"万"):(s=Math.floor(s/1e8),i=s.toString()+"亿"))),i},t.Game_Num=6,t.Game_Type=-1,t.GameCard_NowShow=0,t.Game_BeiLv=1e4,t.GF_RoomId="",t.Zhuang_Id=0,t.Zhuang_VIP=15,t.Zhuang_Name="系统",t.Zhuang_Gold=1e10,t.Zhuang_Head="icon_zhuanghead_png",t.JSYS_ZhuangList=[],t.Zhuang_Times=-1,t.JSYS_YaZhu_UserTotal=0,t.JSYS_YaZhu_User=[0,0,0,0,0,0,0,0,0,0,0,0],t.JSYS_YaZhu_Total=[0,0,0,0,0,0,0,0,0,0,0,0],t.JSYS_YaZhu_User_Old=[0,0,0,0,0,0,0,0,0,0,0,0],t.JSYS_Box_Beilv=[48,24,12,8,8,6,12,8,8,6,2,2],t.JSYS_GenZhu_Detail=[0,0,0,0,0,0,0,0,0,0,0,0],t.JSYS_GenZhu_Num=0,t.EBG_YaZhu_UserTotal=0,t.EBG_YaZhu_OtherTotal=0,t.EBG_Poker_Table_IsWin=[],t.EBG_Poker_Table_Type=[1,1,1,1],t.EBG_Poker_Table_InfoChip=[[],[],[]],t.EBG_Poker_Table_Card=[[38,5],[6,41],[18,4],[24,55]],t.EBG_YaZhu_User_NowDetail=[[],[],[]],t.EBG_YaZhu_User=[],t.EBG_YaZhu_Total=[],t}();egret.registerClass(GameData,"GameData");var LoaderData=function(){function t(){}var e=(__define,t);e.prototype;return t.is_LoginEnd=!1,t.is_ThemeLoadEnd=!1,t.is_loading_LoadEnd=!1,t.is_start_LoadEnd=!1,t.is_Game_LoadEnd=[!1,!1],t}();egret.registerClass(LoaderData,"LoaderData");var SceneNames=function(){function t(){}var e=(__define,t);e.prototype;return t.SHOP="shop",t.START="start",t.ABOUT="about",t.WAITING="waiting",t.CUSTOM="custom",t.CLAUSE="clause",t.LOADING="loading",t.SAVEBOX="savebox",t.RANKING="ranking",t.GUOFEN="guofen",t.GAME_EBG="game_ebg",t.GAME_JSYS="game_jsys",t}();egret.registerClass(SceneNames,"SceneNames");var UserData=function(){function t(){}var e=(__define,t);e.prototype;return t.User_Id=1,t.User_Name="小明",t.User_Head="",t.User_VIP=1,t.User_Sex=0,t.User_Phone="",t.User_Gold=123004002,t}();egret.registerClass(UserData,"UserData");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,s){function a(t){e.call(s,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var Action_Fly=function(t){function e(){t.call(this),this._tween_x0=null,this._tween_x1=null,this._tween_y0=null,this._tween_y1=null,this._tween_rotation=null,this.start_fly_y=378,this.start_fly_x=-1e3,this.start_tips_y=450,this.start_tips_x=-1305,this.skinName=Action_FlySkin}__extends(e,t);var i=(__define,e),s=i.prototype;return s.info=function(){this.g_tips.rotation=0,this.g_tips.y=this.start_tips_y,this.g_tips.x=this.start_tips_x,this.img_fly.y=this.start_fly_y,this.img_fly.x=this.start_fly_x},s.start=function(t,e,i,s){var a=this,n=10,o=1360,h=1200,r=800,_=800,c=3e3;this.info(),this.img_head.source=e,this.funcallback=s,this.txt_name.text=t,1e8>i?this.txt_gold.text=String(i).substring(0,String(i).length-4)+"万":this.txt_gold.text=Number(Math.floor(i/1e6)/100).toString()+"亿",this._tween_y0=egret.Tween.get(this.img_fly,{loop:!0}).to({y:this.start_fly_y+n},_).wait(50).to({y:this.start_fly_y},_).wait(50),this._tween_y1=egret.Tween.get(this.g_tips,{loop:!0}).to({y:this.start_tips_y+n},_).wait(50).to({y:this.start_tips_y},_).wait(50),this._tween_x0=egret.Tween.get(this.img_fly).to({x:this.start_fly_x+o},h,egret.Ease.circOut).wait(c).to({x:this.start_fly_x+2*o},r,egret.Ease.circIn),this._tween_x1=egret.Tween.get(this.g_tips).to({x:this.start_tips_x+o},h,egret.Ease.circOut).wait(c).to({x:this.start_tips_x+2*o},r,egret.Ease.circIn).call(function(){a._tween_y0.setPaused(!0),a._tween_y1.setPaused(!0),a.funcallback&&a.funcallback()})},e}(eui.Component);egret.registerClass(Action_Fly,"Action_Fly");var Chat_Item=function(t){function e(){t.call(this),this.txt_size=24,this.show_detail_index=[],this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[],this.skinName=Chat_ItemSkin}__extends(e,t);var i=(__define,e),s=i.prototype;return s.show=function(t,e){this.user_id=t.uid,this.user_vip=t.vip,this.user_msg=t.message,this.user_head=t.head,this.user_name=t.nickname,this.chat_width=e,0==this.user_id?this.txt_detail.textColor=16777215:this.txt_detail.textColor=11622567,this.width=this.chat_width,0==this.user_id?(this.g_bq.x=0,this.txt_detail.x=0,this.txt_vip.visible=!1,this.txt_detail.width=this.chat_width):(this.g_bq.x=50,this.txt_detail.x=50,this.txt_vip.visible=!0,this.txt_detail.width=this.chat_width-50),this.assBiaoQing(),this.showBiaoQing(),this.txt_vip.text="v"+this.user_vip.toString(),this.user_vip<10?this.txt_vip.x=0:this.txt_vip.x=-18,this.bq_num>0&&(this.g_bq.y=-3,this.txt_detail.y=-3),this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(this.detail),this.txt_detail.height=this.txt_detail.textHeight,this.bq_num>0?this.height=this.txt_detail.height+1:this.height=this.txt_detail.height+5},s.assBiaoQing=function(){var t,e=0,i=!1;0==this.user_id?""!=this.user_name?this.detail="<font color='#9d2e28'>"+this.user_name+"：</font>":this.detail="":this.detail=this.user_name+"：";for(var s=0;s<this.user_msg.length;s++)1==i?"]"==this.user_msg.charAt(s)?(i=!1,this.detail+="　</font>",this.bq_detail[this.bq_num]=t,this.bq_num+=1):t+=this.user_msg.charAt(s):"["==this.user_msg.charAt(s)?(t="",i=!0,this.bq_index[this.bq_num]=this.detail.length,this.detail+="<font size= '32'>"):this.detail+=this.user_msg.charAt(s);this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(this.detail),this.show_detail=this.txt_detail.text;for(var a=0;a<this.show_detail.length;a++)if(a==this.show_detail.length-1)this.show_detail_index[a]=this.detail.length;else{var n=0;if(e<this.detail.length-5&&"<font"==this.detail.substring(e,e+5)){for(var o=e;o<this.detail.length;o++)if(">"==this.detail.charAt(o)){if(0!=n){e=o+1;break}n+=1}this.show_detail_index[a]=e}else e+=1,this.show_detail_index[a]=e}},s.showBiaoQing=function(){for(var t=0;t<this.bq_num;t++){var e=new eui.Image;e.source="icon_bq_"+this.bq_detail[t]+"_png",e.width=this.txt_size+8,e.height=this.txt_size+8,e.y=this.assBQ_Y(this.bq_index[t]),e.x=this.assBQ_X(this.bq_index[t]),e.x>this.chat_width-77&&(e.x=0,e.y=e.y+39),this.bq_picture[t]=e,this.g_bq.addChild(this.bq_picture[t])}},s.assBQ_X=function(t){var e,i=0,s="";this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(this.detail.substring(0,t)),e=this.txt_detail.text;for(var a=0;a<e.length;a++)if(s+=this.assOriginalDetail(a),this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(s),this.txt_detail.numLines>1)if(this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(e.charAt(a)),this.txt_detail.textWidth<this.txt_size/2+1){s=this.assOriginalDetail(a);for(var n=a-1;n>0&&(this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(e.charAt(n)),this.txt_detail.textWidth<this.txt_size/2+1);n--)s+=this.assOriginalDetail(n)}else s=this.assOriginalDetail(a);return this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(s),i=this.txt_detail.textWidth},s.assOriginalDetail=function(t){var e;return e=0==t?this.detail.substring(0,this.show_detail_index[t]):this.detail.substring(this.show_detail_index[t-1],this.show_detail_index[t])},s.assBQ_Y=function(t){var e=0;return this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(this.detail.substring(0,t)),e=1==this.txt_detail.numLines?4:this.txt_detail.textHeight-(this.txt_size+4)},e}(eui.Component);egret.registerClass(Chat_Item,"Chat_Item");var EBG_BiaoQing=function(t){function e(){t.apply(this,arguments),this.btn_biaoqing=[],this._tween_y=null,this.is_show=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.y=1136,this.visible=!0;for(var e=1;28>e;e++){var i=this["btn_biaoqing"+e];this.btn_biaoqing[e]=i,this.btn_biaoqing[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBiaoQingBtn,this)}basic.Dispatcher.addListener(EventNames.EBG_SHOWBIAOQING,this.onShowFace,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this)},s.onDeleteBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.EBG_DELETECHAT)},s.onBiaoQingBtn=function(t){var e=Number(t.target.name);basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.EBG_ADDBIAOQING,{num:e})},s.onShowFace=function(t){var e=this;0==this.is_show&&(this.is_show=!0,this._tween_y=egret.Tween.get(this).to({y:1136-this.height},200).call(function(){basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onHideFace,e)}))},s.onThisBtn=function(t){var e=this;egret.setTimeout(function(){e.is_click=!0},this,20)},s.onHideFace=function(t){var e=this;this.is_click=!1,egret.setTimeout(function(){0==e.is_click&&(e.is_show=!1,e._tween_y=egret.Tween.get(e).to({y:1136},200),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onHideFace,e))},this,50)},e}(eui.Component);egret.registerClass(EBG_BiaoQing,"EBG_BiaoQing");var EBG_Chat=function(t){function e(){t.apply(this,arguments),this.old_chat="",this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[],this.show_chat=[],this.show_chat_num=0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_show.scaleY=0,this.txt_chat.text="",this.g_show.visible=!1,this.txt_tips.visible=!0,this.rect_back.visible=!1,this.txt_test=new egret.TextField,this.txt_test.fontFamily="微软雅黑",this.txt_test.size=20,basic.Dispatcher.addListener(EventNames.EBG_SHOWCHAT,this.onShowChat,this),basic.Dispatcher.addListener(EventNames.EBG_DELETECHAT,this.onDeleteChat,this),basic.Dispatcher.addListener(EventNames.EBG_ADDBIAOQING,this.onAddBiaoQing,this),this.txt_chat.addEventListener(egret.Event.CHANGE,this.onChatTextChange,this),this.txt_chat.addEventListener(egret.FocusEvent.FOCUS_IN,this.onChatText,this),this.txt_chat.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onChatText,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendBtn,this),this.rect_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideChat,this),this.btn_biaoqing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBiaoQingBtn,this)},s.clean=function(){for(var t=0;t<this.show_chat_num;t++)this.g_detail.removeChild(this.show_chat[t]);this.show_chat=[],this.show_chat_num=0},s.onShowChat=function(t){if(1==t.data.chatType){var e=new Chat_Item,i={uid:t.data.account,nickname:t.data.nickName,message:t.data.msg,head:t.data.headImgURL,vip:t.data.vipLevel};e.show(i,530),this.show_chat[this.show_chat_num]=e,this.g_detail.addChild(this.show_chat[this.show_chat_num]),this.show_chat_num+=1,this.scroller.viewport.height<this.scroller.viewport.contentHeight&&(this.scroller.validateNow(),this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.viewport.height)}},s.onChatText=function(t){t.type==egret.FocusEvent.FOCUS_IN?(this.txt_tips.visible=!1,this.showChat()):t.type==egret.FocusEvent.FOCUS_OUT&&""==this.txt_chat.text&&(this.txt_tips.visible=!0)},s.onHideChat=function(t){var e=this;if(1==this.g_show.scaleY){this.rect_back.visible=!1;egret.Tween.get(this.g_show).to({scaleY:0},400,egret.Ease.backIn).call(function(){e.g_show.visible=!1})}},s.showChat=function(){if(0==this.g_show.scaleY){this.g_show.visible=!0,this.rect_back.visible=!0;egret.Tween.get(this.g_show).to({scaleY:1},400,egret.Ease.backOut)}},s.onDeleteChat=function(t){""!=this.txt_chat.text&&(this.txt_chat.text=this.txt_chat.text.substring(0,this.txt_chat.text.length-1));for(var e=-1,i=this.txt_chat.text,s=0;s<this.old_chat.length;s++)if(s<i.length&&i.charAt(s)!=this.old_chat.charAt(s)){e=s;break}var a=this.txt_chat.textWidth,n=Math.max(-1,i.length-this.old_chat.length);this.txt_test.text=this.old_chat,a=Math.max(-30,a-this.txt_test.textWidth),-1==e&&(e=a>0?i.length-1:this.old_chat.length-1);for(var o=0;o<this.bq_num;o++)null!=this.bq_picture[o]&&(this.bq_index[o]>e?(this.bq_index[o]+=n,this.bq_picture[o].x=this.bq_picture[o].x+a):this.bq_index[o]==e?(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null):this.bq_index[o]>=i.length&&(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null));if(this.old_chat=i,this.txt_chat.text=i,""==this.txt_chat.text){this.txt_tips.visible=!0;for(var h=0;h<this.bq_num;h++)null!=this.bq_picture[h]&&(this.g_show_bq.removeChild(this.bq_picture[h]),this.bq_picture[h]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}},s.onAddBiaoQing=function(t){if(Number(t.data.num)>0){if(this.txt_test.text=this.txt_chat.text+"　",this.txt_test.textWidth>this.txt_chat.width)this.txt_chat.text=this.old_chat;else{var e=new eui.Image;e.y=10,e.width=18,e.height=18,this.txt_test.text=this.old_chat,this.bq_detail[this.bq_num]=t.data.num,this.bq_index[this.bq_num]=this.txt_chat.text.length,e.source="icon_bq_"+this.bq_detail[this.bq_num]+"_png",e.x=this.txt_test.textWidth,this.bq_picture[this.bq_num]=e,this.g_show_bq.addChild(this.bq_picture[this.bq_num]),this.bq_num+=1,this.txt_chat.text=this.txt_chat.text+"　",this.old_chat=this.txt_chat.text}""!=this.old_chat&&(this.txt_tips.visible=!1)}},s.onChatTextChange=function(t){if(this.txt_test.text=this.txt_chat.text,this.txt_test.textWidth>this.txt_chat.width)this.txt_chat.text=this.old_chat;else{for(var e=-1,i=this.txt_chat.text,s=0;s<this.old_chat.length;s++)if(s<i.length&&i.charAt(s)!=this.old_chat.charAt(s)){e=s;break}var a=this.txt_chat.textWidth,n=Math.max(-1,i.length-this.old_chat.length);this.txt_test.text=this.old_chat,a=Math.max(-30,a-this.txt_test.textWidth),-1==e&&(e=a>0?i.length-1:this.old_chat.length-1);for(var o=0;o<this.bq_num;o++)null!=this.bq_picture[o]&&(this.bq_index[o]>e?(this.bq_index[o]+=n,this.bq_picture[o].x=this.bq_picture[o].x+a):this.bq_index[o]==e?(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null):this.bq_index[o]>=i.length&&(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null));this.old_chat=i,this.txt_chat.text=i}if(""==this.txt_chat.text){this.txt_tips.visible=!0;for(var h=0;h<this.bq_num;h++)null!=this.bq_picture[h]&&(this.g_show_bq.removeChild(this.bq_picture[h]),this.bq_picture[h]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}else this.txt_tips.visible=!1},s.onBiaoQingBtn=function(t){this.showChat(),basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.EBG_SHOWBIAOQING)},s.onSendBtn=function(t){if(""!=this.txt_chat.text)if(15==UserData.User_VIP)basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"VIP15账号不能再游戏中发言"});else{var e="";basic.SoundManager.instance.playEffect("sound_ebg_send_mp3");for(var i=0;i<this.txt_chat.text.length;i++){for(var s=-1,a=0;a<this.bq_num;a++)if(null!=this.bq_picture[a]&&i==this.bq_index[a]){s=Number(this.bq_detail[a]);break}e+=-1==s?this.txt_chat.text.charAt(i):"["+s.toString()+"]"}Comm_ebg.instance.sendSocket({type:"chat",msg:e}),this.old_chat="",this.txt_chat.text="",this.txt_tips.visible=!0;for(var n=0;n<this.bq_num;n++)null!=this.bq_picture[n]&&(this.g_show_bq.removeChild(this.bq_picture[n]),this.bq_picture[n]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}},e}(eui.Component);egret.registerClass(EBG_Chat,"EBG_Chat");var EBG_ChatSystem=function(t){function e(){t.apply(this,arguments),this.system_message=[],this.is_SystemStart=!1,this._tween_x=null,this._tween_alpha=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.visible=!1,this.rect_system_mask.visible=!0,this.txt_System=new egret.TextField,this.txt_System.y=10,this.txt_System.size=20,this.txt_System.height=20,this.txt_System.fontFamily="微软雅黑",this.g_system.addChild(this.txt_System),this.g_system.setChildIndex(this.rect_system_mask,this.g_system.numChildren-1),this.txt_System.mask=this.rect_system_mask,basic.Dispatcher.addListener(EventNames.EBG_SHOWCHAT,this.onShowChat,this)},s.onShowChat=function(t){0==t.data.chatType&&this.showSystemChat(t.data.msg)},s.showSystemChat=function(t){this.system_message[this.system_message.length]=t,this.startShowSystem()},s.startShowSystem=function(){var t=this;if(0==this.is_SystemStart){for(var e="",i=0;i<this.system_message.length;i++)if(""!=this.system_message[i]){e=this.system_message[i],this.system_message[i]="";break}if(""!=e){var s,a;this.visible=!0,this.is_SystemStart=!0,this.txt_System.x=640,this.txt_System.width=1e3,this.txt_System.textFlow=(new egret.HtmlTextParser).parser(e),this.txt_System.width=this.txt_System.textWidth,s=640+this.txt_System.width,a=20*s,this._tween_x=egret.Tween.get(this.txt_System).to({x:640-s},a).call(function(){t.visible=!1,t.is_SystemStart=!1,t.startShowSystem()})}}},e}(eui.Component);egret.registerClass(EBG_ChatSystem,"EBG_ChatSystem");var EBG_Chip=function(t){function e(){t.apply(this,arguments),this.arr_Chip=[],this._tween_alpha=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;5>e;e++){var i=this["btn_chip"+e];this.arr_Chip[e]=i}this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisBtn,this)},s.info=function(){this.showBtn(),this._tween_alpha?(this._tween_alpha.setPaused(!1),this._tween_alpha=null):this._tween_alpha=egret.Tween.get(this.img_choose,{loop:!0}).wait(500).to({alpha:.2},1e3).to({alpha:1},500)},s.clean=function(){this._tween_alpha&&this._tween_alpha.setPaused(!0)},s.showBtn=function(){var t=String(GameData.Game_BeiLv).length-5;this.img_choose.x=-12.5+84*t},s.onThisBtn=function(t){if(""!=t.target.name){basic.SoundManager.instance.playEffect("sound_btn_mp3");var e=String(GameData.Game_BeiLv).length-5;if(e!=Math.floor(t.target.name)){for(var i="1",s=0;s<Math.floor(t.target.name)+4;s++)i+="0";GameData.Game_BeiLv=Number(i),this.showBtn()}}},e}(eui.Component);egret.registerClass(EBG_Chip,"EBG_Chip");var EBG_ChipFly=function(t){function e(){t.apply(this,arguments),this.chip_num=0,this.chip_img=[],this._tween_x=null,this._tween_y=null,this._tween_alpha=null,this._tween_scaleX=null,this._tween_scaleY=null,this.move_to_x=[20,240,460],this.move_to_y=[140,330,140],this.move_width=160,this.move_height=180}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this)},s.info=function(){for(var t=0;3>t;t++)for(var e=0;e<GameData.EBG_Poker_Table_InfoChip[t].length;e++)this.showChip(String(Math.floor(GameData.EBG_Poker_Table_InfoChip[t][e]/1e4)).length-1,t)},s.clean=function(){for(var t=0;t<this.chip_num;t++)this.removeChild(this.chip_img[t]);this.chip_num=0,this.chip_img=[]},s.sendChip=function(t,e,i){var s=new eui.Image,a=this.move_to_x[i]+Math.random()*(this.move_width-45),n=this.move_to_y[i]+Math.random()*(this.move_height-45);s.source="icon_smallchip"+e+"_png",0==t?(s.y=553,s.scaleX=1.65,s.scaleY=1.65,s.x=137+84*e):1==t&&(s.x=586,s.y=45),this.chip_img[this.chip_num]=s,this.addChild(this.chip_img[this.chip_num]),this.chip_img[this.chip_num].scaleX>1&&(this._tween_scaleX=egret.Tween.get(this.chip_img[this.chip_num]).wait(80).to({scaleX:1},300,egret.Ease.circOut),this._tween_scaleY=egret.Tween.get(this.chip_img[this.chip_num]).wait(80).to({scaleY:1},300,egret.Ease.circOut)),this._tween_x=egret.Tween.get(this.chip_img[this.chip_num]).wait(80).to({x:a},800,egret.Ease.circOut),this._tween_y=egret.Tween.get(this.chip_img[this.chip_num]).wait(80).to({y:n},800,egret.Ease.circOut),this.chip_num+=1},s.showChip=function(t,e){var i=new eui.Image,s=this.move_to_x[e]+Math.random()*(this.move_width-45),a=this.move_to_y[e]+Math.random()*(this.move_height-45);i.source="icon_smallchip"+t+"_png",i.x=s,i.y=a,this.chip_img[this.chip_num]=i,this.addChild(this.chip_img[this.chip_num]),this.chip_num+=1},e}(eui.Component);egret.registerClass(EBG_ChipFly,"EBG_ChipFly");var EBG_Clock=function(t){function e(){t.apply(this,arguments),this.timer=null,this._tween_scaleX=null,this._tween_scaleY=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this)},s.start=function(t){this.stop(),this.num_nowtimer=0,this.num_timer=t-1,this.showText(),this.visible=!0,this.timer=new basic.Timer(1e3,this.num_timer),this.timer.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer.start()},s.stop=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer=null),this._tween_scaleX&&this._tween_scaleX.setPaused(!0),this._tween_scaleY&&this._tween_scaleY.setPaused(!0)},s.showText=function(){var t=this.num_timer-this.num_nowtimer-1;this.txt_time.text=t.toString(),6>t?(4>t&&basic.SoundManager.instance.playEffect("sound_ebg_countdown_mp3"),this._tween_scaleX=egret.Tween.get(this.txt_time).to({scaleX:1.4},100).to({scaleX:1},100),this._tween_scaleY=egret.Tween.get(this.txt_time).to({scaleY:1.4},100).to({scaleY:1},100)):(this.txt_time.scaleX=1,this.txt_time.scaleY=1)
},s.onTimer=function(t){this.num_nowtimer+=1,this.showText()},s.onTimerComplete=function(t){this.timer&&(this.timer.stop(),this.timer.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer=null),GameData.EBG_State=2,this.visible=!1},e}(eui.Component);egret.registerClass(EBG_Clock,"EBG_Clock");var EBG_Down=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.btn_trend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrendBtn,this),this.btn_patterns.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPatternsBtn,this)},s.info=function(){this.head.show(UserData.User_Head),this.txt_name.text=UserData.User_Name},s.showGold=function(t){this.txt_gold.text=GameData.assGold(2,t)},s.onTrendBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Panel_EBG_ZouShi.instance.show()},s.onPatternsBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Panel_EBG_PaiXing.instance.show()},e}(eui.Component);egret.registerClass(EBG_Down,"EBG_Down");var EBG_GoldFlay=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this)},s.startFlay=function(t,e,i){var s={};if(0==t){var a=this.assUserPlace(),n=this.assUserTablePlace(i);0==e?(s.to_x=a._x,s.to_y=a._y,s.start_x=n._x,s.start_y=n._y,s.to_ratewidth=a._ratewidth,s.to_rateheight=a._rateheight,s.start_ratewidth=n._ratewidth,s.start_rateheight=n._rateheight):1==e&&(s.to_x=n._x,s.to_y=n._y,s.start_x=a._x,s.start_y=a._y,s.to_ratewidth=n._ratewidth,s.to_rateheight=n._rateheight,s.start_ratewidth=a._ratewidth,s.start_rateheight=a._ratewidth)}else if(1==t){var o=this.assZhuangPlace(),h=this.assTablePlace(i);0==e?(s.to_x=o._x,s.to_y=o._y,s.start_x=h._x,s.start_y=h._y,s.to_ratewidth=o._ratewidth,s.to_rateheight=o._rateheight,s.start_ratewidth=h._ratewidth,s.start_rateheight=h._rateheight):1==e&&(s.to_x=h._x,s.to_y=h._y,s.start_x=o._x,s.start_y=o._y,s.to_ratewidth=h._ratewidth,s.to_rateheight=h._rateheight,s.start_ratewidth=o._ratewidth,s.start_rateheight=o._ratewidth)}else if(2==t){var r=this.assOnLinePlace(),_=this.assTablePlace(i);0==e?(s.to_x=r._x,s.to_y=r._y,s.start_x=_._x,s.start_y=_._y,s.to_ratewidth=r._ratewidth,s.to_rateheight=r._rateheight,s.start_ratewidth=_._ratewidth,s.start_rateheight=_._rateheight):1==e&&(s.to_x=_._x,s.to_y=_._y,s.start_x=r._x,s.start_y=r._y,s.to_ratewidth=_._ratewidth,s.to_rateheight=_._rateheight,s.start_ratewidth=r._ratewidth,s.start_rateheight=r._ratewidth)}basic.SoundManager.instance.playEffect("sound_ebg_goldflay_mp3"),s.parent=this;var c=new GoldFlayAction;c.startFlay(s)},s.assUserPlace=function(){var t={};return t._x=4,t._y=basic.StageProxy.height-131,t._ratewidth=83,t._rateheight=83,t},s.assZhuangPlace=function(){var t={};return t._y=80,t._x=166,t._ratewidth=38,t._rateheight=38,t},s.assOnLinePlace=function(){var t={};return t._x=577,t._y=380,t._ratewidth=18,t._rateheight=32,t},s.assUserTablePlace=function(t){var e={};return 0==t?(e._x=26,e._y=745,e._ratewidth=0,e._rateheight=0):1==t?(e._x=246,e._y=1036,e._ratewidth=0,e._rateheight=0):2==t&&(e._x=466,e._y=745,e._ratewidth=0,e._rateheight=0),e},s.assTablePlace=function(t){var e={};return 0==t?(e._x=33,e._y=623,e._ratewidth=90,e._rateheight=70):1==t?(e._x=253,e._y=814,e._ratewidth=90,e._rateheight=70):2==t&&(e._x=473,e._y=623,e._ratewidth=90,e._rateheight=70),e},e}(eui.Component);egret.registerClass(EBG_GoldFlay,"EBG_GoldFlay");var GoldFlayAction=function(){function t(){this.timer_goldflay=null}var e=(__define,t),i=e.prototype;return i.startFlay=function(t){this.num_to_x=t.to_x,this.num_to_y=t.to_y,this.num_start_x=t.start_x,this.num_start_y=t.start_y,this.num_to_ratewidth=t.to_ratewidth,this.num_to_rateheight=t.to_rateheight,this.num_start_ratewidth=t.start_ratewidth,this.num_start_rateheight=t.start_rateheight,this.com_parent=t.parent,"Android"!=egret.Capabilities.os?this.timer_goldflay=new egret.Timer(10,30):this.timer_goldflay=new egret.Timer(15,25),this.timer_goldflay.addEventListener(egret.TimerEvent.TIMER,this.onGoldFlay,this),this.timer_goldflay.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onGoldFlayComplete,this),this.timer_goldflay.start()},i.onGoldFlay=function(t){var e,i,s,a,n=this,o=new eui.Image;e=this.num_to_x+Math.random()*this.num_to_ratewidth,i=this.num_to_y+Math.random()*this.num_to_rateheight,s=this.num_start_x+Math.random()*this.num_start_ratewidth,a=this.num_start_y+Math.random()*this.num_start_rateheight,o.x=s,o.y=a,o.source="icon_s_gold_png",this.com_parent.addChild(o);egret.Tween.get(o).to({alpha:.9},50).wait(350).to({alpha:0},50),egret.Tween.get(o).to({x:e},450),egret.Tween.get(o).to({y:i},450).call(function(){n.com_parent.removeChild(o)})},i.onGoldFlayComplete=function(t){this.timer_goldflay&&(this.timer_goldflay.stop(),this.timer_goldflay.removeEventListener(egret.TimerEvent.TIMER,this.onGoldFlay,this),this.timer_goldflay.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onGoldFlayComplete,this),this.timer_goldflay=null)},t}();egret.registerClass(GoldFlayAction,"GoldFlayAction");var EBG_Mahjong=function(t){function e(){t.apply(this,arguments),this.boo_isShow=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.showMahjongFace()},s.showMahjong=function(t){this.num_Mahjong_huase=1,this.num_Mahjong_num=t,this.num_Mahjong_value=this.num_Mahjong_num%16,this.img_mahjong.source="icon_mahjong"+this.num_Mahjong_huase+"_"+this.num_Mahjong_value+"_png"},s.openMahjong=function(){this.boo_isShow=!0,this.showMahjongFace()},s.openMahjongAction=function(t){var e=this;void 0===t&&(t=null);this.img_back.x=0,this.img_back.y=0,basic.SoundManager.instance.playEffect("sound_ebg_openmahjong_mp3"),this._tween_Mahjong=egret.Tween.get(this.img_back).to({y:5},100).call(function(){e.openMahjong(),e.img_back.y=0,t&&egret.setTimeout(t,e,500)})},s.stopAction=function(){this._tween_Mahjong&&(this._tween_Mahjong.setPaused(!0),this._tween_Mahjong=null)},s.closeMahjong=function(){this.boo_isShow=!1,this.showMahjongFace()},s.showMahjongFace=function(){1==this.boo_isShow?this.currentState="open":0==this.boo_isShow&&(this.currentState="close")},e}(eui.Component);egret.registerClass(EBG_Mahjong,"EBG_Mahjong");var EBG_Over=function(t){function e(){t.apply(this,arguments),this._tween_rotation=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.hide()},s.assShowGold=function(t){var e;return e=0==t?"0":Math.abs(t)<1e8?t.toString():Math.floor(t/1e4).toString()+"万"},s.show=function(){this.visible=!0,this.com_light.rotation=0,this._tween_rotation=egret.Tween.get(this.com_light,{loop:!0}).to({rotation:360},5e3),this.head_user.show(UserData.User_Head),this.txt_name_user.text=UserData.User_Name,this.txt_gold_user.text=this.assShowGold(Number(GameData.EBG_OverData.winGold)),0==GameData.Zhuang_Id?this.head_zhuang.show("icon_zhuanghead_jpg"):this.head_zhuang.show(GameData.Zhuang_Head),this.txt_name_zhuang.text=GameData.Zhuang_Name,this.txt_gold_zhuang.text=this.assShowGold(GameData.EBG_OverData.dealerWinGold),null!=GameData.EBG_OverData.bigWinUser.headImgURL&&(this.head_bigwin.show(GameData.EBG_OverData.bigWinUser.headImgURL),this.txt_name_bigwin.text=GameData.EBG_OverData.bigWinUser.nickName,this.txt_gold_bigwin.text=this.assShowGold(GameData.EBG_OverData.bigWinUser.winGold))},s.hide=function(){this.visible=!1,this._tween_rotation&&(this._tween_rotation.setPaused(!0),this._tween_rotation=null),this.head_user.show(""),this.head_zhuang.show(""),this.head_bigwin.show(""),this.txt_name_user.text="",this.txt_name_zhuang.text="",this.txt_name_bigwin.text="",this.txt_gold_user.text="",this.txt_gold_zhuang.text="",this.txt_gold_bigwin.text=""},e}(eui.Component);egret.registerClass(EBG_Over,"EBG_Over");var EBG_Result=function(t){function e(){t.apply(this,arguments),this._tween_width=null,this._tween_alpha=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.img_mask.visible=!0,this.img_back.mask=this.img_mask},s.info=function(t){this.table_num=t},s.show=function(){var t=this;this.assData(),this.currentState="type"+this.result_type.toString(),1==this.result_type&&(this.img_num1.source="icon_ebg_diannum"+this.result_diannum.toString()+"_png"),this.img_dian.visible=!1,this.img_num1.visible=!1,this.img_num2.visible=!1,this.img_num3.visible=!1,this.startBackAction(function(){1==t.result_type?t.startAction1():2==t.result_type?t.startAction2():3==t.result_type&&t.startAction3()})},s.showResult=function(){this.assData(),this.img_mask.width=200,this.currentState="type"+this.result_type.toString(),1==this.result_type&&(this.img_num1.source="icon_ebg_diannum"+this.result_diannum.toString()+"_png")},s.assData=function(){this.result_type=GameData.EBG_Poker_Table_Type[this.table_num],1==this.result_type&&(this.result_diannum=this.assDianNum())},s.assDianNum=function(){var t,e;return e=GameData.EBG_Poker_Table_Card[this.table_num],t=Number(e[0])%16+Number(e[1])%16,t%=10},s.startBackAction=function(t){void 0===t&&(t=null),this.img_back.alpha=0,this.img_mask.width=20,this._tween_alpha=egret.Tween.get(this.img_back).to({alpha:1},50),this._tween_width=egret.Tween.get(this.img_mask).to({width:200},200).call(function(){t&&t()})},s.startAction1=function(){var t=this;this.img_num1.alpha=0,this.img_dian.alpha=0,this.img_num1.visible=!0,this.img_dian.visible=!0,this._tween_alpha=egret.Tween.get(this.img_num1).to({alpha:1},100).call(function(){t._tween_alpha=egret.Tween.get(t.img_dian).to({alpha:1},100),basic.SoundManager.instance.playEffect("sound_ebg_dian"+t.result_diannum.toString()+"_mp3")})},s.startAction2=function(){this.img_num2.alpha=0,this.img_num2.visible=!0,this._tween_alpha=egret.Tween.get(this.img_num2).to({alpha:1},100),basic.SoundManager.instance.playEffect("sound_ebg_erbagang_mp3")},s.startAction3=function(){this.img_num3.alpha=0,this.img_num3.visible=!0,this._tween_alpha=egret.Tween.get(this.img_num3).to({alpha:1},100),basic.SoundManager.instance.playEffect("sound_ebg_baozi_mp3")},e}(eui.Component);egret.registerClass(EBG_Result,"EBG_Result");var EBG_SpecialResult=function(t){function e(){t.apply(this,arguments),this._tween_scaleY=null,this._tween_alpha=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.visible=!1},s.showWin=function(t){var e=this;this.visible=!0,this.img_win.alpha=0,this.img_win_add.alpha=0,this.img_win_add.scaleX=1,this.img_win_add.scaleY=1,this.img_win.visible=!0,this.img_win_add.visible=!0,this.currentState="win",basic.SoundManager.instance.playEffect("sound_ebg_tongsha_mp3");egret.Tween.get(this.img_win).to({alpha:1},50),egret.Tween.get(this.img_win_add).wait(20).to({alpha:1},30).call(function(){egret.Tween.get(e.img_win_add).to({alpha:.15},150).to({alpha:0},300),egret.Tween.get(e.img_win_add).to({scaleX:1.25},150).to({scaleX:2},300);e._tween_scaleY=egret.Tween.get(e.img_win_add).to({scaleY:1.25},150).to({scaleY:2},300).wait(1e3).call(function(){t(),e.clean()})})},s.showLose=function(t){var e=this;this.visible=!0,this.img_lose.alpha=0,this.img_lose.visible=!0,this.currentState="lose",basic.SoundManager.instance.playEffect("sound_ebg_tongpei_mp3"),this._tween_alpha=egret.Tween.get(this.img_lose).to({alpha:1},1e3).wait(500).call(function(){t(),e.clean()})},s.clean=function(){this._tween_scaleY&&this._tween_scaleY.setPaused(!0),this._tween_alpha&&this._tween_alpha.setPaused(!0),this.visible=!1},e}(eui.Component);egret.registerClass(EBG_SpecialResult,"EBG_SpecialResult");var EBG_StartTips=function(t){function e(){t.apply(this,arguments),this._tween_alpha0=null,this._tween_alpha1=null,this._tween_alpha2=null,this._tween_alpha3=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.visible=!1},s.start=function(){var t=this,e=100;this.img_1.x=90,this.img_2.x=210,this.img_3.x=330,this.img_0.alpha=0,this.img_1.alpha=0,this.img_2.alpha=0,this.img_3.alpha=0,this.visible=!0,this._tween_alpha0=egret.Tween.get(this.img_0).to({alpha:1},300).wait(200).call(function(){egret.Tween.get(t.img_1).to({x:210},e);t._tween_alpha1=egret.Tween.get(t.img_1).wait(e/2).to({alpha:1},e/2).wait(200).call(function(){egret.Tween.get(t.img_2).to({x:330},e);t._tween_alpha2=egret.Tween.get(t.img_2).wait(e/2).to({alpha:1},e/2).wait(200).call(function(){egret.Tween.get(t.img_3).to({x:450},e);t._tween_alpha3=egret.Tween.get(t.img_3).wait(e/2).to({alpha:1},e/2).wait(2e3).call(function(){t.visible=!1})})})})},e}(eui.Component);egret.registerClass(EBG_StartTips,"EBG_StartTips");var EBG_Table=function(t){function e(){t.apply(this,arguments),this.user_mahjong=[],this.g_table=[],this.btn_choose=[],this.zhuang_mahjong=[],this.result_table=[],this.user_gold=[],this.user_totalgold=[],this.user_result=[],this.timer_openmahjong=null,this.g_mahjong=[],this.img_mahjong=[]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;3>e;e++){for(var i=[],s=this["g_table"+e],a=this["btn_choose"+e],n=this["txt_user"+e],o=this["result_table"+e],h=this["com_result"+e],r=this["txt_total"+e],_=0;2>_;_++){var c=this["user_mahjong"+e+"_"+_];i[_]=c}o.info(e),this.btn_choose[e]=a,this.g_table[e]=s,this.user_gold[e]=n,this.user_mahjong[e]=i,this.result_table[e]=o,this.user_result[e]=h,this.user_totalgold[e]=r,this.btn_choose[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChooseBtn,this)}for(var l=0;2>l;l++){var u=this["zhuang_mahjong"+l];this.zhuang_mahjong[l]=u}this.result_zhuang.info(3);for(var d=0;4>d;d++){var m=this["g_mahjong"+d],g=this["img_mahjong"+d];this.g_mahjong[d]=m,this.img_mahjong[d]=g}basic.Dispatcher.addListener(EventNames.EBG_CHANGEYAZHU,this.onChangeYaZhu,this)},s.info=function(){if(this.clean(),GameData.EBG_State>0){this.infoChip();for(var t=0;3>t;t++)this.user_gold[t].text=GameData.assGold1(2,GameData.EBG_YaZhu_User[t]),this.user_totalgold[t].text=GameData.assGold(2,GameData.EBG_YaZhu_Total[t]);if(GameData.EBG_State>1){this.showMahjong(),this.showMahjongDetail(),this.openMahjong(0,0),this.openMahjong(0,1),this.openMahjong(0,2),this.openMahjong(0,3),this.result_zhuang.visible=!0,this.result_zhuang.showResult();for(var e=0;3>e;e++)this.result_table[e].visible=!0,this.result_table[e].showResult();GameData.EBG_State>2&&this.showResult()}}},s.startSendMahjong=function(){var t=this;basic.SoundManager.instance.playEffect("sound_ebg_sendmahjong1_mp3");egret.Tween.get(this.g_mahjong[0]).to({x:20},300),egret.Tween.get(this.g_mahjong[1]).to({x:53},300),egret.Tween.get(this.g_mahjong[2]).to({x:86},300),egret.Tween.get(this.g_mahjong[3]).to({x:119},300).wait(300).call(function(){2!=GameData.EBG_State?t.cleanSendMahjong():t.sendMahjong(0)})},s.showMahjongDetail=function(){for(var t=0;3>t;t++)for(var e=0;2>e;e++)this.user_mahjong[t][e].showMahjong(GameData.EBG_Poker_Table_Card[t][e]);for(var i=0;2>i;i++)this.zhuang_mahjong[i].showMahjong(GameData.EBG_Poker_Table_Card[3][i])},s.startOpenMahjong=function(){var t=this;this.open_mahjong_num=0,this.showMahjong(),this.showMahjongDetail(),this.openMahjong(1,this.open_mahjong_num,function(){t.result_table[t.open_mahjong_num].show(),t.result_table[t.open_mahjong_num].visible=!0}),this.timer_openmahjong=new basic.Timer(2500,4),this.timer_openmahjong.addEventListener(basic.TimerEvent.TIMER,this.onOpenMahjong,this),this.timer_openmahjong.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onOpenMahjongComplete,this),this.timer_openmahjong.start()},s.showResult=function(){for(var t=0;3>t;t++)this.user_result[t].visible=!0,1==GameData.EBG_Poker_Table_IsWin[t]?this.user_result[t].currentState="1":this.user_result[t].currentState="0"},s.onChangeYaZhu=function(t){var e=!1;GameData.EBG_YaZhu_UserTotal=0,GameData.EBG_YaZhu_OtherTotal=0,GameData.EBG_YaZhu_User=t.data.betGolds,GameData.EBG_YaZhu_Total=t.data.totalBetGolds;for(var i=0;i<GameData.EBG_YaZhu_User.length;i++)GameData.EBG_YaZhu_UserTotal+=GameData.EBG_YaZhu_User[i],GameData.EBG_YaZhu_OtherTotal+=GameData.EBG_YaZhu_Total[i];for(var s=0;3>s;s++){for(var a=[],n=GameData.EBG_YaZhu_User_NowDetail[s],o=0;o<t.data.newBetGoldDetails[s].length;o++){for(var h=!0,r=0;r<n.length;r++)if(t.data.newBetGoldDetails[s][o]==n[r]){h=!1,n[r]=-1;break}1==h&&(a[a.length]=t.data.newBetGoldDetails[s][o])}for(var _=0;_<a.length;_++)e=!0,this.chipfly.sendChip(1,String(Math.floor(a[_]/1e4)).length-1,s)}e&&basic.SoundManager.instance.playEffect("sound_ebg_yazhu_mp3"),GameData.EBG_YaZhu_User_NowDetail=[[],[],[]],this.showGold(),basic.Dispatcher.dispatch(EventNames.EBG_SHOWGOLD)},s.showGold=function(){for(var t=0;3>t;t++)this.user_gold[t].text=GameData.assGold1(2,GameData.EBG_YaZhu_User[t]),this.user_totalgold[t].text=GameData.assGold(2,GameData.EBG_YaZhu_Total[t])},s.showMahjong=function(){for(var t=0;2>t;t++)this.zhuang_mahjong[t].visible=!0;for(var e=0;3>e;e++)for(var i=0;2>i;i++)this.user_mahjong[e][i].visible=!0},s.openMahjong=function(t,e,i){var s=this;if(void 0===i&&(i=null),3==e)0==t?(this.zhuang_mahjong[0].openMahjong(),this.zhuang_mahjong[1].openMahjong()):this.zhuang_mahjong[0].openMahjongAction(function(){s.zhuang_mahjong[1].openMahjongAction(function(){i&&i()})});else for(var a=0;2>a;a++)0==t?(this.user_mahjong[e][0].openMahjong(),this.user_mahjong[e][1].openMahjong()):this.user_mahjong[e][0].openMahjongAction(function(){s.user_mahjong[e][1].openMahjongAction(function(){i&&i()})})},s.stopOpenMahjong=function(){this.timer_openmahjong&&(this.timer_openmahjong.stop(),this.timer_openmahjong.removeEventListener(basic.TimerEvent.TIMER,this.onOpenMahjong,this),this.timer_openmahjong.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onOpenMahjongComplete,this),this.timer_openmahjong=null)},s.onOpenMahjong=function(t){var e=this;this.open_mahjong_num+=1,this.showMahjong(),this.open_mahjong_num<4&&this.openMahjong(1,this.open_mahjong_num,function(){e.open_mahjong_num<3?(e.result_table[e.open_mahjong_num].show(),e.result_table[e.open_mahjong_num].visible=!0):(e.result_zhuang.show(),e.result_zhuang.visible=!0)})},s.onOpenMahjongComplete=function(t){this.stopOpenMahjong()},s.infoChip=function(){this.chipfly.info()},s.onChooseBtn=function(t){var e=Number(t.target.name);15==UserData.User_VIP?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"VIP15账号不能再游戏中下注"}):0!=GameData.Zhuang_Id&&GameData.EBG_YaZhu_OtherTotal+GameData.Game_BeiLv>GameData.Zhuang_Gold?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"庄可赔金币不足，压住失败"}):1==GameData.EBG_State&&UserData.User_Id!=GameData.Zhuang_Id&&(GameData.EBG_YaZhu_UserTotal+GameData.Game_BeiLv<=UserData.User_Gold?(GameData.EBG_YaZhu_UserTotal+=GameData.Game_BeiLv,GameData.EBG_YaZhu_User[e]+=GameData.Game_BeiLv,GameData.EBG_YaZhu_Total[e]+=GameData.Game_BeiLv,GameData.EBG_YaZhu_User_NowDetail[e][GameData.EBG_YaZhu_User_NowDetail[e].length]=GameData.Game_BeiLv,this.showGold(),basic.SoundManager.instance.playEffect("sound_ebg_yazhu_mp3"),basic.Dispatcher.dispatch(EventNames.EBG_SHOWGOLD),this.chipfly.sendChip(0,String(Math.floor(GameData.Game_BeiLv/1e4)).length-1,e),Comm_ebg.instance.sendSocket({type:"bet",pos:e,gold:GameData.Game_BeiLv})):basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"您的金币不足，请充值!"}))},s.cleanSendMahjong=function(){for(var t=0;4>t;t++)this.img_mahjong[t].x=0,this.img_mahjong[t].y=0,this.g_mahjong[t].scaleX=.5,this.g_mahjong[t].scaleY=.5,this.g_mahjong[t].visible=!0,this.g_mahjong[t].x=-160+33*t,this.g_mahjong[t].y=-20},s.clean=function(){this.stopOpenMahjong();for(var t=0;3>t;t++)for(var e=0;2>e;e++)this.user_mahjong[t][e].visible=!1,this.user_mahjong[t][e].currentState="close";for(var i=0;2>i;i++)this.zhuang_mahjong[i].visible=!1,this.zhuang_mahjong[i].currentState="close";for(var s=0;3>s;s++)this.user_gold[s].text="0",GameData.EBG_YaZhu_User[s]=0;GameData.EBG_YaZhu_UserTotal=0,GameData.EBG_YaZhu_OtherTotal=0;for(var a=0;3>a;a++)this.user_totalgold[a].text="0",GameData.EBG_YaZhu_Total[a]=0;GameData.EBG_YaZhu_User_NowDetail=[[],[],[]],this.result_zhuang.visible=!1;for(var n=0;3>n;n++)this.result_table[n].visible=!1,this.user_result[n].visible=!1;this.cleanSendMahjong(),this.chipfly.clean()},s.sendMahjong=function(t){var e,i,s=this;3>t?(e=this.g_table[t].x+this.user_mahjong[t][0].x,i=this.g_table[t].y+this.user_mahjong[t][0].y-20):(e=this.g_zhuang.x+this.zhuang_mahjong[0].x,i=this.g_zhuang.y+this.zhuang_mahjong[0].y-20),this.setChildIndex(this.g_mahjong[3-t],this.numChildren-1),basic.SoundManager.instance.playEffect("sound_ebg_sendmahjong2_mp3");egret.Tween.get(this.g_mahjong[3-t]).to({x:e},400),egret.Tween.get(this.g_mahjong[3-t]).to({y:i},400),egret.Tween.get(this.g_mahjong[3-t]).to({scaleX:1},400),egret.Tween.get(this.g_mahjong[3-t]).to({scaleY:1},400).wait(100).call(function(){basic.SoundManager.instance.playEffect("sound_ebg_downmahjong_mp3");egret.Tween.get(s.img_mahjong[t]).to({x:68},150).call(function(){egret.Tween.get(s.img_mahjong[t]).to({y:20},80).wait(300).call(function(){2!=GameData.EBG_State?s.cleanSendMahjong():3>t?s.sendMahjong(t+1):(s.cleanSendMahjong(),s.startOpenMahjong())})})})},e}(eui.Component);egret.registerClass(EBG_Table,"EBG_Table");var EBG_Up=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.btn_up.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBtn,this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)},s.show=function(){this.showGold(),0==GameData.Zhuang_Id?this.head.show("icon_zhuanghead_jpg"):this.head.show(GameData.Zhuang_Head),this.txt_name.text=GameData.Zhuang_Name},s.showGold=function(){0==GameData.Zhuang_Id?this.txt_gold.text="88888y":this.txt_gold.text=GameData.assGold(2,GameData.Zhuang_Gold)},s.onUpBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Panel_EBG_ZhuangList.instance.show()},s.onExitBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),UserData.User_Id==GameData.Zhuang_Id?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"您当前是庄加，请下庄后退出!"}):PanelExit.instance.show()},e}(eui.Component);egret.registerClass(EBG_Up,"EBG_Up");var EBG_Zhuang=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this)},e}(eui.Component);egret.registerClass(EBG_Zhuang,"EBG_Zhuang");var Head=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.rect_mask.visible=!0,this.img_head.mask=this.rect_mask},s.show=function(t){null!=t&&""!=t?this.img_head.source=t:this.img_head.source=""},e}(eui.Component);egret.registerClass(Head,"Head");var JSYS_BaoZhuang=function(t){function e(){t.apply(this,arguments),this._tween_alpha=null,this._tween_scaleX=null,this._tween_scaleY=null,this._timer_action=null,this._tween_alpha_bao=null,this.now_action=0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.clean(),basic.Dispatcher.addListener(EventNames.JSYS_BAOZHUANG,this.onBaoZhuang,this)},s.onBaoZhuang=function(t){this.clean(),this.visible=!0,this._tween_alpha=egret.Tween.get(this.img_back).wait(100).to({alpha:1},200),this._tween_scaleX=egret.Tween.get(this.img_back).wait(100).to({scaleX:.7},200),this._tween_scaleY=egret.Tween.get(this.img_back).wait(100).to({scaleY:.7},200),this._timer_action=new egret.Timer(100,5),this._timer_action.addEventListener(egret.TimerEvent.TIMER,this.onAction,this),this._timer_action.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this._timer_action.start()},s.onAction=function(t){this.now_action+=1,this.img_bao.source="icon_jsys_bao"+this.now_action.toString()+"_png"},s.onActionComplete=function(t){var e=this;this._timer_action&&(this._timer_action.stop(),this._timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this._timer_action.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this._timer_action=null),this._tween_alpha_bao=egret.Tween.get(this.img_bao).to({alpha:0},100).wait(3e3).call(function(){e.clean()})},s.clean=function(){this.now_action=0,this.visible=!1,this.img_bao.alpha=1,this.img_back.alpha=0,this.img_back.scaleX=0,this.img_back.scaleY=0,this.img_bao.source="icon_jsys_bao"+this.now_action.toString()+"_png",this._tween_alpha&&(this._tween_alpha.setPaused(!0),this._tween_alpha=null),this._tween_scaleX&&(this._tween_scaleX.setPaused(!0),this._tween_scaleX=null),this._tween_scaleY&&(this._tween_scaleY.setPaused(!0),this._tween_scaleY=null),this._tween_alpha_bao&&(this._tween_alpha_bao.setPaused(!0),this._tween_alpha_bao=null),this._timer_action&&(this._timer_action.stop(),this._timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this._timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onActionComplete,this),this._timer_action=null)},e}(eui.Component);egret.registerClass(JSYS_BaoZhuang,"JSYS_BaoZhuang");var JSYS_BiaoQing=function(t){function e(){t.apply(this,arguments),this.btn_biaoqing=[],this._tween_y=null,this.is_show=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.y=1136,this.visible=!0;for(var e=1;28>e;e++){var i=this["btn_biaoqing"+e];this.btn_biaoqing[e]=i,this.btn_biaoqing[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBiaoQingBtn,this)}basic.Dispatcher.addListener(EventNames.JSYS_SHOWBIAOQING,this.onShowFace,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this)},s.onDeleteBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.JSYS_DELETECHAT)},s.onBiaoQingBtn=function(t){var e=Number(t.target.name);basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.JSYS_ADDBIAOQING,{num:e})},s.onShowFace=function(t){var e=this;0==this.is_show&&(this.is_show=!0,this._tween_y=egret.Tween.get(this).to({y:1136-this.height},200).call(function(){basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onHideFace,e)}))},s.onThisBtn=function(t){var e=this;egret.setTimeout(function(){e.is_click=!0},this,20)},s.onHideFace=function(t){var e=this;this.is_click=!1,egret.setTimeout(function(){0==e.is_click&&(e.is_show=!1,e._tween_y=egret.Tween.get(e).to({y:1136},200),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onHideFace,e))},this,50)},e}(eui.Component);egret.registerClass(JSYS_BiaoQing,"JSYS_BiaoQing");var JSYS_Box=function(t){function e(){t.apply(this,arguments),this.btn_box=[],this.box_type=[1,6,6,6,0,2,2,2,1,3,3,0,4,4,1,5,5,5,0,9,9,9,1,8,8,0,7,7],this.box_num=28,this.box_nowshow=[],this.run_maxshownum=5,this.run_middlecirclenum=3,this.run_overtime=[84,84,84,84,215,215,225,236],this.run_starttime=[155,275,260,220,200,160,140,83,83,83],this.timer_over=null,this.timer_start=null,this.timer_middle=null,this.timer_action=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.img_over.visible=!1;for(var e=0;e<this.box_num;e++){var i=this["btn_box_"+e];this.btn_box[e]=i,this.btn_box[e].currentState="up"}},s.info=function(t){this.run_now=t,this.box_nowshow=[t],GameData.JSYS_RunOver_Type=this.box_type[t],GameData.JSYS_RunOver_Type<2?GameData.JSYS_RunOver_Family=-1:GameData.JSYS_RunOver_Type<6?GameData.JSYS_RunOver_Family=10:GameData.JSYS_RunOver_Family=11,this.showBox()},s.clean=function(){this.timer_start&&(this.timer_start.stop(),this.timer_start.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onStartComplete,this),this.timer_start=null),this.timer_middle&&(this.timer_middle.stop(),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER,this.onMiddle,this),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onMiddleComplete,this),this.timer_middle=null),this.timer_over&&(this.timer_over.stop(),this.timer_over.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onOverComplete,this),this.timer_over=null),this.timer_action&&(this.timer_action.stop(),this.timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this.timer_action.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this.timer_action=null)},s.start=function(t,e){this.callback=e,this.run_over=t,this.box_nowshow=[this.run_now],this.run_begintime=egret.getTimer(),GameData.JSYS_RunOver_Type=this.box_type[this.run_over],this.assRunTime(),GameData.JSYS_RunOver_Type<2?GameData.JSYS_RunOver_Family=-1:GameData.JSYS_RunOver_Type<6?GameData.JSYS_RunOver_Family=10:GameData.JSYS_RunOver_Family=11,basic.SoundManager.instance.playEffect("sound_jsys_run_mp3"),this.runStart()},s.hideOver=function(){this.img_over.visible=!1},s.showBox=function(){for(var t=0;t<this.box_num;t++)this.btn_box[t].currentState="up";for(var e=0;e<this.box_nowshow.length;e++)try{this.btn_box[this.box_nowshow[e]].currentState="down"}catch(i){console.log(this.box_nowshow[e])}},s.assRunTime=function(){var t=5050,e=0;this.total_starttime=0;for(var i=0;i<this.run_starttime.length;i++)this.total_starttime+=this.run_starttime[i];for(var s=0;s<this.run_overtime.length;s++)e+=this.run_overtime[s];this.total_middletime=t-this.total_starttime-e,this.run_middleboxnum=this.run_over-this.run_now-this.run_starttime.length-this.run_overtime.length-1,this.run_middleboxnum<0&&(this.run_middleboxnum+=this.box_num),this.run_middleboxnum+=this.box_num*this.run_middlecirclenum+1,this.run_middletime=this.total_middletime/this.run_middleboxnum,this.run_middletime>18&&(this.run_middleboxnum+=this.box_num,this.run_middletime=this.total_middletime/this.run_middleboxnum,this.run_middletime>18&&(this.run_middleboxnum+=this.box_num,this.run_middletime=this.total_middletime/this.run_middleboxnum))},s.runStart=function(){this.now_runnum=0,this.timer_start=new egret.Timer(this.run_starttime[this.now_runnum],1),this.timer_start.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onStartComplete,this),this.timer_start.start()},s.onStartComplete=function(t){var e=[];if(this.timer_start&&(this.timer_start.stop(),this.timer_start.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onStartComplete,this),this.timer_start=null),this.run_now+=1,this.run_now>=this.box_num&&(this.run_now=0),this.box_nowshow.length<this.run_maxshownum){e[0]=this.run_now;for(var i=0;i<this.box_nowshow.length;i++)e[i+1]=this.box_nowshow[i];this.box_nowshow=e}else{e[0]=this.run_now;for(var s=0;s<this.box_nowshow.length-1;s++)e[s+1]=this.box_nowshow[s];this.box_nowshow=e}this.showBox(),this.now_runnum+=1,this.now_runnum<this.run_starttime.length?(this.timer_start=new egret.Timer(this.run_starttime[this.now_runnum],1),this.timer_start.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onStartComplete,this),this.timer_start.start()):this.runMiddle()},s.runMiddle=function(){this.now_runnum=0,this.timer_middle=new egret.Timer(this.run_middletime,this.run_middleboxnum),this.timer_middle.addEventListener(egret.TimerEvent.TIMER,this.onMiddle,this),this.timer_middle.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onMiddleComplete,this),this.timer_middle.start()},s.onMiddle=function(t){var e=[];this.run_now+=1,this.run_now>=this.box_num&&(this.run_now=0),e[0]=this.run_now;for(var i=0;i<this.box_nowshow.length-1;i++)e[i+1]=this.box_nowshow[i];this.box_nowshow=e,this.showBox(),this.now_runnum+=1,(this.run_middleboxnum-this.now_runnum)%this.box_num==0&&egret.getTimer()-this.run_begintime>this.total_middletime+this.total_starttime&&(this.timer_middle&&(this.timer_middle.stop(),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER,this.onMiddle,this),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onMiddleComplete,this),this.timer_middle=null),this.runOver())
},s.onMiddleComplete=function(){this.timer_middle&&(this.timer_middle.stop(),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER,this.onMiddle,this),this.timer_middle.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onMiddleComplete,this),this.timer_middle=null),this.runOver()},s.runOver=function(){this.now_runnum=0,this.timer_over=new egret.Timer(this.run_overtime[this.now_runnum],1),this.timer_over.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onOverComplete,this),this.timer_over.start()},s.onOverComplete=function(t){var e,i=[];if(this.timer_over&&(this.timer_over.stop(),this.timer_over.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onOverComplete,this),this.timer_over=null),this.run_now+=1,this.run_now>=this.box_num&&(this.run_now=0),this.now_runnum+=1,this.run_overtime.length-this.now_runnum<3)this.box_nowshow=[this.run_now];else{e=Math.min(this.run_maxshownum,this.run_overtime.length-this.now_runnum-2),i[0]=this.run_now;for(var s=0;e-1>s;s++)i[s+1]=this.box_nowshow[s];this.box_nowshow=i}this.showBox(),this.now_runnum<this.run_overtime.length?(this.timer_over=new egret.Timer(this.run_overtime[this.now_runnum],1),this.timer_over.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onOverComplete,this),this.timer_over.start()):(this.callback&&this.callback(),this.showOverAction(),egret.setTimeout(function(){basic.SoundManager.instance.playEffect("sound_jsys_type"+GameData.JSYS_RunOver_Type.toString()+"_mp3")},this,1500))},s.showOverAction=function(){this.overshow.start(GameData.JSYS_RunOver_Type),this.timer_action=new egret.Timer(500,6),this.timer_action.addEventListener(egret.TimerEvent.TIMER,this.onAction,this),this.timer_action.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this.timer_action.start()},s.onAction=function(t){"up"==this.btn_box[this.run_now].currentState?this.btn_box[this.run_now].currentState="down":this.btn_box[this.run_now].currentState="up"},s.onActionComplete=function(t){this.timer_action&&(this.timer_action.stop(),this.timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this.timer_action.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this.timer_action=null),this.img_over.scaleX=1,this.img_over.scaleY=1,this.img_over.source="icon_jsys_box"+GameData.JSYS_RunOver_Type+"_png",0==GameData.JSYS_RunOver_Type?(this.img_over.x=this.btn_box[this.run_over].x+2,this.img_over.y=this.btn_box[this.run_over].y+3):(this.img_over.x=this.btn_box[this.run_over].x+4,this.img_over.y=this.btn_box[this.run_over].y+4),this.img_over.visible=!0;egret.Tween.get(this.img_over).to({x:84},1e3),egret.Tween.get(this.img_over).to({y:460},1e3);if(0==GameData.JSYS_RunOver_Type){egret.Tween.get(this.img_over).to({scaleX:.5},1e3),egret.Tween.get(this.img_over).to({scaleY:.5},1e3)}else{egret.Tween.get(this.img_over).to({scaleX:.646},1e3),egret.Tween.get(this.img_over).to({scaleY:.646},1e3)}},e}(eui.Component);egret.registerClass(JSYS_Box,"JSYS_Box");var JSYS_Btn=function(t){function e(){t.apply(this,arguments),this.btn_genzhu=[],this.is_show=!1,this._tween_y=null,this.genzhu_num=[5,10,50]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_genzhu.y=0,this.g_genzhu.visible=!0,this.rect_mask.visible=!0,this.g_genzhu.mask=this.rect_mask;for(var e=0;3>e;e++){var i=this["btn_genzhu"+e];this.btn_genzhu[e]=i,this.btn_genzhu[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGenZhuBtn,this)}this.btn_up.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBtn,this),this.btn_down.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBtn,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtn,this),this.btn_again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtn,this)},s.showZhuangBtn=function(){if(UserData.User_Id==GameData.Zhuang_Id)this.btn_up.visible=!1,this.btn_down.visible=!0;else{for(var t=!1,e=0;e<GameData.JSYS_ZhuangList.length;e++)if(GameData.JSYS_ZhuangList[e].playerId==UserData.User_Id){t=!0;break}0==t?(this.btn_up.visible=!0,this.btn_down.visible=!1):(this.btn_up.visible=!1,this.btn_down.visible=!0)}},s.showBtn=function(){UserData.User_Id!=GameData.Zhuang_Id&&(this.btn_start.enabled=!0,this.btn_again.enabled=!0)},s.hideBtn=function(){this.btn_start.enabled=!1,this.btn_again.enabled=!1,1==this.is_show&&(this.is_show=!1,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOverBtn,this),this._tween_y=egret.Tween.get(this.g_genzhu).to({y:0},200))},s.onGenZhuBtn=function(t){var e=Number(t.target.name);this.click_btn=e},s.onUpBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Comm_jsys.instance.sendSocket({type:"callDealer"})},s.onDownBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Comm_jsys.instance.sendSocket({type:"cancelDealer"})},s.onStartBtn=function(t){var e=this;0==this.is_show?(this.is_show=!0,this.click_btn=-1,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onOverBtn,this),this._tween_y=egret.Tween.get(this.g_genzhu).to({y:-170},200)):(this.is_show=!1,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOverBtn,this),this._tween_y=egret.Tween.get(this.g_genzhu).to({y:0},200).call(function(){-1!=e.click_btn&&e.startGenZhu()}))},s.onOverBtn=function(t){var e=this;egret.setTimeout(function(){1==e.is_show&&(e.is_show=!1,e._tween_y&&(e._tween_y.setPaused(!0),e._tween_y=null),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_END,e.onOverBtn,e),-1!=e.click_btn&&basic.SoundManager.instance.playEffect("sound_btn_mp3"),e._tween_y=egret.Tween.get(e.g_genzhu).to({y:0},200).call(function(){-1!=e.click_btn&&e.startGenZhu()}))},this,50)},s.startGenZhu=function(){if(GameData.JSYS_GenZhu_Num=this.genzhu_num[this.click_btn],GameData.JSYS_YaZhu_UserTotal>0)for(var t=0;12>t;t++)GameData.JSYS_GenZhu_Detail[t]=GameData.JSYS_YaZhu_User[t];else for(var e=0;12>e;e++)GameData.JSYS_GenZhu_Detail[e]=GameData.Game_BeiLv,Comm_jsys.instance.sendSocket({type:"bet",pos:e,gold:GameData.JSYS_GenZhu_Detail[e]});basic.Dispatcher.dispatch(EventNames.JSYS_STARTGENZHU)},s.onAgainBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3");for(var e=0;12>e;e++)GameData.JSYS_YaZhu_User_Old[e]>0&&Comm_jsys.instance.sendSocket({type:"bet",pos:e,gold:GameData.JSYS_YaZhu_User_Old[e]})},e}(eui.Component);egret.registerClass(JSYS_Btn,"JSYS_Btn");var JSYS_Chat=function(t){function e(){t.apply(this,arguments),this.old_chat="",this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[],this.system_message=[],this.is_SystemStart=!1,this._tween_x=null,this._tween_alpha=null,this.show_chat=[],this.show_chat_num=0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.txt_chat.text="",this.txt_tips.visible=!0,this.txt_test=new egret.TextField,this.txt_test.fontFamily="微软雅黑",this.txt_test.size=16,this.rect_system_mask.visible=!0,this.txt_System=new egret.TextField,this.txt_System.y=10,this.txt_System.size=20,this.txt_System.height=20,this.txt_System.fontFamily="微软雅黑",this.g_system.addChild(this.txt_System),this.g_system.setChildIndex(this.rect_system_mask,this.g_system.numChildren-1),this.txt_System.mask=this.rect_system_mask,this.g_system.visible=!1,this.txt_chat.text="",basic.Dispatcher.addListener(EventNames.JSYS_SHOWCHAT,this.onShowChat,this),basic.Dispatcher.addListener(EventNames.JSYS_DELETECHAT,this.onDeleteChat,this),basic.Dispatcher.addListener(EventNames.JSYS_ADDBIAOQING,this.onAddBiaoQing,this),this.txt_chat.addEventListener(egret.Event.CHANGE,this.onChatTextChange,this),this.txt_chat.addEventListener(egret.FocusEvent.FOCUS_IN,this.onChatText,this),this.txt_chat.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onChatText,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendBtn,this),this.btn_biaoqing.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBiaoQingBtn,this)},s.clean=function(){for(var t=0;t<this.show_chat_num;t++)this.g_detail.removeChild(this.show_chat[t]);this.show_chat=[],this.show_chat_num=0},s.onShowChat=function(t){if(1==t.data.chatType){var e=new Chat_Item,i={uid:t.data.account,nickname:t.data.nickName,message:t.data.msg,head:t.data.headImgURL,vip:t.data.vipLevel};e.show(i,430),this.show_chat[this.show_chat_num]=e,this.g_detail.addChild(this.show_chat[this.show_chat_num]),this.show_chat_num+=1,this.scroller.viewport.height<this.scroller.viewport.contentHeight&&(this.scroller.validateNow(),this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.viewport.height)}else 0==t.data.chatType&&this.showSystemChat(t.data.msg)},s.onChatText=function(t){t.type==egret.FocusEvent.FOCUS_IN?this.txt_tips.visible=!1:t.type==egret.FocusEvent.FOCUS_OUT&&""==this.txt_chat.text&&(this.txt_tips.visible=!0)},s.onDeleteChat=function(t){""!=this.txt_chat.text&&(this.txt_chat.text=this.txt_chat.text.substring(0,this.txt_chat.text.length-1));for(var e=-1,i=this.txt_chat.text,s=0;s<this.old_chat.length;s++)if(s<i.length&&i.charAt(s)!=this.old_chat.charAt(s)){e=s;break}var a=this.txt_chat.textWidth,n=Math.max(-1,i.length-this.old_chat.length);this.txt_test.text=this.old_chat,a=Math.max(-30,a-this.txt_test.textWidth),-1==e&&(e=a>0?i.length-1:this.old_chat.length-1);for(var o=0;o<this.bq_num;o++)null!=this.bq_picture[o]&&(this.bq_index[o]>e?(this.bq_index[o]+=n,this.bq_picture[o].x=this.bq_picture[o].x+a):this.bq_index[o]==e?(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null):this.bq_index[o]>=i.length&&(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null));if(this.old_chat=i,this.txt_chat.text=i,""==this.txt_chat.text){this.txt_tips.visible=!0;for(var h=0;h<this.bq_num;h++)null!=this.bq_picture[h]&&(this.g_show_bq.removeChild(this.bq_picture[h]),this.bq_picture[h]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}},s.onAddBiaoQing=function(t){if(Number(t.data.num)>0){if(this.txt_test.text=this.txt_chat.text+"　",this.txt_test.textWidth>this.txt_chat.width)this.txt_chat.text=this.old_chat;else{var e=new eui.Image;e.y=10,e.width=16,e.height=16,this.txt_test.text=this.old_chat,this.bq_detail[this.bq_num]=t.data.num,this.bq_index[this.bq_num]=this.txt_chat.text.length,e.source="icon_bq_"+this.bq_detail[this.bq_num]+"_png",e.x=this.txt_test.textWidth,this.bq_picture[this.bq_num]=e,this.g_show_bq.addChild(this.bq_picture[this.bq_num]),this.bq_num+=1,this.txt_chat.text=this.txt_chat.text+"　",this.old_chat=this.txt_chat.text}""!=this.old_chat&&(this.txt_tips.visible=!1)}},s.onChatTextChange=function(t){if(this.txt_test.text=this.txt_chat.text,this.txt_test.textWidth>this.txt_chat.width)this.txt_chat.text=this.old_chat;else{for(var e=-1,i=this.txt_chat.text,s=0;s<this.old_chat.length;s++)if(s<i.length&&i.charAt(s)!=this.old_chat.charAt(s)){e=s;break}var a=this.txt_chat.textWidth,n=Math.max(-1,i.length-this.old_chat.length);this.txt_test.text=this.old_chat,a=Math.max(-30,a-this.txt_test.textWidth),-1==e&&(e=a>0?i.length-1:this.old_chat.length-1);for(var o=0;o<this.bq_num;o++)null!=this.bq_picture[o]&&(this.bq_index[o]>e?(this.bq_index[o]+=n,this.bq_picture[o].x=this.bq_picture[o].x+a):this.bq_index[o]==e?(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null):this.bq_index[o]>=i.length&&(this.g_show_bq.removeChild(this.bq_picture[o]),this.bq_picture[o]=null));this.old_chat=i,this.txt_chat.text=i}if(""==this.txt_chat.text){this.txt_tips.visible=!0;for(var h=0;h<this.bq_num;h++)null!=this.bq_picture[h]&&(this.g_show_bq.removeChild(this.bq_picture[h]),this.bq_picture[h]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}else this.txt_tips.visible=!1},s.onBiaoQingBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.JSYS_SHOWBIAOQING)},s.onSendBtn=function(t){if(""!=this.txt_chat.text)if(15==UserData.User_VIP)basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"VIP15账号不能再游戏中发言"});else{var e="";basic.SoundManager.instance.playEffect("sound_send_mp3");for(var i=0;i<this.txt_chat.text.length;i++){for(var s=-1,a=0;a<this.bq_num;a++)if(null!=this.bq_picture[a]&&i==this.bq_index[a]){s=Number(this.bq_detail[a]);break}e+=-1==s?this.txt_chat.text.charAt(i):"["+s.toString()+"]"}Comm_jsys.instance.sendSocket({type:"chat",msg:e}),this.old_chat="",this.txt_chat.text="",this.txt_tips.visible=!0;for(var n=0;n<this.bq_num;n++)null!=this.bq_picture[n]&&(this.g_show_bq.removeChild(this.bq_picture[n]),this.bq_picture[n]=null);this.bq_num=0,this.bq_index=[],this.bq_detail=[],this.bq_picture=[]}},s.showSystemChat=function(t){this.system_message[this.system_message.length]=t,this.startShowSystem()},s.startShowSystem=function(){var t=this;if(0==this.is_SystemStart){for(var e="",i=0;i<this.system_message.length;i++)if(""!=this.system_message[i]){e=this.system_message[i],this.system_message[i]="";break}if(""!=e){var s,a;this.is_SystemStart=!0,this.g_system.visible=!0,this.txt_System.x=470,this.txt_System.width=1e3,this.txt_System.textFlow=(new egret.HtmlTextParser).parser(e),this.txt_System.width=this.txt_System.textWidth,s=470+this.txt_System.width,a=20*s,this._tween_x=egret.Tween.get(this.txt_System).to({x:470-s},a).call(function(){t.is_SystemStart=!1,t.g_system.visible=!1,t.startShowSystem()})}}},e}(eui.Component);egret.registerClass(JSYS_Chat,"JSYS_Chat");var JSYS_Choose=function(t){function e(){t.apply(this,arguments),this.btn_choose=[],this.txt_user=[],this.txt_total=[],this.is_not_equal=[0,0,0,0,0,0,0,0,0,0,0,0],this.now_choose=-1,this.timer_Waiting=null,this.timer_action=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;12>e;e++){var i=this["btn_choose"+e],s=this["txt_user"+e],a=this["txt_total"+e];this.txt_user[e]=s,this.txt_total[e]=a,this.btn_choose[e]=i,this.btn_choose[e].addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onChooseBtn,this),this.btn_choose[e].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onChooseBtn,this)}basic.Dispatcher.addListener(EventNames.JSYS_USERYAZHU,this.onUserYaZhu,this),basic.Dispatcher.addListener(EventNames.JSYS_CHANGEYAZHU,this.onTotalYaZhu,this),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onOverBtn,this)},s.info=function(){this.is_not_equal=[0,0,0,0,0,0,0,0,0,0,0,0],1==GameData.JSYS_State?this.showBtn():this.hideBtn(),this.showText()},s.clean=function(){for(var t=0;12>t;t++)GameData.JSYS_YaZhu_User_Old[t]=GameData.JSYS_YaZhu_User[t];GameData.JSYS_YaZhu_UserTotal=0,this.is_not_equal=[0,0,0,0,0,0,0,0,0,0,0,0],GameData.JSYS_YaZhu_User=[0,0,0,0,0,0,0,0,0,0,0,0],GameData.JSYS_YaZhu_Total=[0,0,0,0,0,0,0,0,0,0,0,0],this.showText()},s.showBtn=function(){if(UserData.User_Id!=GameData.Zhuang_Id)for(var t=0;12>t;t++)this.btn_choose[t].enabled=!0,this.btn_choose[t].currentState="up"},s.hideBtn=function(){for(var t=0;12>t;t++)this.btn_choose[t].enabled=!1,this.btn_choose[t].currentState="disabled";this.overWaiting(),this.yazhu_gold>0&&Comm_jsys.instance.sendSocket({type:"bet",pos:this.now_choose,gold:this.yazhu_gold}),this.yazhu_gold=0},s.showAction=function(){this.timer_action=new egret.Timer(500,6),this.timer_action.addEventListener(egret.TimerEvent.TIMER,this.onAction,this),this.timer_action.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this.timer_action.start()},s.checkOverData=function(t){GameData.JSYS_YaZhu_UserTotal=0;for(var e=0;12>e;e++)GameData.JSYS_YaZhu_User[e]=t.betGolds[e],GameData.JSYS_YaZhu_Total[e]=t.totalBetGolds[e],GameData.JSYS_YaZhu_UserTotal+=GameData.JSYS_YaZhu_User[e],this.txt_user[e].text=GameData.assGold(2,GameData.JSYS_YaZhu_User[e]),this.txt_total[e].text=GameData.assGold(2,GameData.JSYS_YaZhu_Total[e]);basic.Dispatcher.dispatch(EventNames.JSYS_SHOWGOLD,{gold:UserData.User_Gold-GameData.JSYS_YaZhu_UserTotal})},s.onAction=function(t){"up"==this.btn_choose[GameData.JSYS_RunOver_Type].currentState?this.btn_choose[GameData.JSYS_RunOver_Type].currentState="disabled":this.btn_choose[GameData.JSYS_RunOver_Type].currentState="up",-1!=GameData.JSYS_RunOver_Family&&("up"==this.btn_choose[GameData.JSYS_RunOver_Family].currentState?this.btn_choose[GameData.JSYS_RunOver_Family].currentState="disabled":this.btn_choose[GameData.JSYS_RunOver_Family].currentState="up")},s.onActionComplete=function(t){this.timer_action&&(this.timer_action.stop(),this.timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this.timer_action.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onActionComplete,this),this.timer_action=null)},s.onUserYaZhu=function(t){},s.onTotalYaZhu=function(t){if(1==GameData.JSYS_State){for(var e=0;12>e;e++)t.data.betGolds[e]>=GameData.JSYS_YaZhu_User[e]?GameData.JSYS_YaZhu_User[e]=t.data.betGolds[e]:this.now_choose==e?t.data.betGolds[e]+this.yazhu_gold<GameData.JSYS_YaZhu_User[e]&&(this.is_not_equal[e]+=1,2==this.is_not_equal[e]&&(this.is_not_equal[e]=0,Comm_jsys.instance.sendSocket({type:"bet",pos:e,gold:GameData.JSYS_YaZhu_User[e]-(t.data.betGolds[e]+this.yazhu_gold)}))):t.data.betGolds[e]<GameData.JSYS_YaZhu_User[e]&&(this.is_not_equal[e]+=1,2==this.is_not_equal[e]&&(this.is_not_equal[e]=0,Comm_jsys.instance.sendSocket({type:"bet",pos:e,gold:GameData.JSYS_YaZhu_User[e]-t.data.betGolds[e]}))),t.data.totalBetGolds[e]>=GameData.JSYS_YaZhu_Total[e]&&(GameData.JSYS_YaZhu_Total[e]=t.data.totalBetGolds[e]);this.showText()}else for(var i=0;12>i;i++)t.data.betGolds[i]<GameData.JSYS_YaZhu_User[i]&&Comm_jsys.instance.sendSocket({type:"bet",pos:i,gold:GameData.JSYS_YaZhu_User[i]-t.data.betGolds[i]})},s.showText=function(){GameData.JSYS_YaZhu_UserTotal=0;for(var t=0;12>t;t++)GameData.JSYS_YaZhu_UserTotal+=GameData.JSYS_YaZhu_User[t],this.txt_user[t].text=GameData.assGold(2,GameData.JSYS_YaZhu_User[t]),this.txt_total[t].text=GameData.assGold(2,GameData.JSYS_YaZhu_Total[t]);basic.Dispatcher.dispatch(EventNames.JSYS_SHOWGOLD,{gold:UserData.User_Gold-GameData.JSYS_YaZhu_UserTotal})},s.onChooseBtn=function(t){var e=Number(t.target.name);1==GameData.JSYS_State&&UserData.User_Id!=GameData.Zhuang_Id&&(15==UserData.User_VIP?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"VIP15账号不能再游戏中下注"}):t.type==egret.TouchEvent.TOUCH_BEGIN?this.showYaZhu(e):egret.TouchEvent.TOUCH_MOVE&&this.now_choose!=e&&(this.yazhu_gold>0&&Comm_jsys.instance.sendSocket({type:"bet",pos:this.now_choose,gold:this.yazhu_gold}),this.showYaZhu(e)))},s.showYaZhu=function(t){this.overWaiting(),this.yazhu_gold=0;for(var e=0;12>e;e++)this.btn_choose[e].currentState="up";this.btn_choose[t].currentState="down",this.now_choose=t,this.yaZhu(500)},s.overWaiting=function(){this.timer_Waiting&&(this.timer_Waiting.stop(),this.timer_Waiting.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onWaitingComplete,this),this.timer_Waiting=null)},s.onWaitingComplete=function(t){this.overWaiting(),this.yaZhu(70)},s.yaZhu=function(t){this.now_choose>1&&this.now_choose<10?basic.SoundManager.instance.playEffect("sound_jsys_btn"+this.now_choose.toString()+"_mp3"):10==this.now_choose?basic.SoundManager.instance.playEffect("sound_jsys_btn2_mp3"):1==this.now_choose?basic.SoundManager.instance.playEffect("sound_jsys_btn3_mp3"):0==this.now_choose?basic.SoundManager.instance.playEffect("sound_jsys_btn4_mp3"):11==this.now_choose&&basic.SoundManager.instance.playEffect("sound_jsys_btn5_mp3"),1==GameData.JSYS_State&&UserData.User_Id!=GameData.Zhuang_Id&&(UserData.User_Gold-GameData.JSYS_YaZhu_UserTotal-GameData.Game_BeiLv>=0?(this.yazhu_gold+=GameData.Game_BeiLv,GameData.JSYS_YaZhu_User[this.now_choose]+=GameData.Game_BeiLv,GameData.JSYS_YaZhu_Total[this.now_choose]+=GameData.Game_BeiLv,this.showText(),this.timer_Waiting=new egret.Timer(t,1),this.timer_Waiting.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onWaitingComplete,this),this.timer_Waiting.start()):basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"金币不足！"}))},s.onOverBtn=function(t){if(1==GameData.JSYS_State)for(var e=0;12>e;e++)this.btn_choose[e].currentState="up";this.overWaiting(),this.yazhu_gold>0&&Comm_jsys.instance.sendSocket({type:"bet",pos:this.now_choose,gold:this.yazhu_gold}),this.yazhu_gold=0},e}(eui.Component);egret.registerClass(JSYS_Choose,"JSYS_Choose");var JSYS_History=function(t){function e(){t.apply(this,arguments),this.img_box=[]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;8>e;e++){var i=this["img_box"+e];this.img_box[e]=i}},s.show=function(t){this.g_show.x=10,this.img_new.visible=!0;for(var e=0;e<Math.min(t.length,8);e++)this.img_box[e].source="icon_jsys_box"+t[e].toString()+"_png"},s.addShow=function(){this.img_new.visible=!1;egret.Tween.get(this.g_show).to({x:68},400)},e}(eui.Component);egret.registerClass(JSYS_History,"JSYS_History");var JSYS_OverShow=function(t){function e(){t.apply(this,arguments),this._tween_rotation=null,this.box_y=[0,0,27,27,27,27,27,27,27,27]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.rotation,this.visible=!1},s.start=function(t){var e=this;this.visible=!0,this.img_beilv.scaleX=0,this.img_beilv.scaleY=0,this.com_light.scaleX=0,this.com_light.scaleY=0,this.img_box.y=this.box_y[t],this.img_box.source="icon_jsys_box_big"+t.toString()+"_png",this.img_beilv.source="txt_sjys_x"+GameData.JSYS_Box_Beilv[t]+"_png",this.g_show.alpha=0,this.img_tiao.y=-150,this.img_tiao.alpha=0,this.g_show.scaleX=.2,this.g_show.scaleY=.2,this.com_light.rotation=0,this._tween_rotation=egret.Tween.get(this.com_light,{loop:!0}).to({rotation:360},4e3);egret.Tween.get(this.com_light).wait(600).to({scaleX:1.8},200).wait(3300).to({scaleX:0},200),egret.Tween.get(this.com_light).wait(600).to({scaleY:1.8},200).wait(3300).to({scaleY:0},200),egret.Tween.get(this.img_beilv).wait(300).to({scaleX:1},200).wait(3400).to({scaleX:0},200),egret.Tween.get(this.img_beilv).wait(300).to({scaleY:1},200).wait(3400).to({scaleY:0},200),egret.Tween.get(this.g_show).wait(600).to({scaleX:1},300).wait(3300).to({scaleX:.2},300),egret.Tween.get(this.g_show).wait(600).to({scaleY:1},300).wait(3300).to({scaleY:.2},300),egret.Tween.get(this.g_show).wait(600).to({alpha:1},200).wait(3500).to({alpha:0},200),egret.Tween.get(this.img_tiao).to({alpha:1},300).wait(4200).to({alpha:0},300),egret.Tween.get(this.img_tiao).to({y:150},300).wait(4200).to({y:-150},300).call(function(){e.visible=!1,e._tween_rotation&&(e._tween_rotation.setPaused(!0),e._tween_rotation=null)})},e}(eui.Component);egret.registerClass(JSYS_OverShow,"JSYS_OverShow");var JSYS_Time=function(t){function e(){t.apply(this,arguments),this.timer=null,this.timer_count=null,this._tween_scaleX=null,this._tween_scaleY=null,this._tween_rotation=null}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_count.visible=!1},s.start=function(t,e){void 0===e&&(e=null),this.now_time=t,this.callback=e,this.g_count.visible=!1,1==GameData.JSYS_State&&this.now_time>0?(this.showText(),this.timer=new basic.Timer(1e3,this.now_time),this.timer.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer.start()):this.txt_time.text="00"},s.clean=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer=null),this.timer_count&&(this.timer_count.stop(),this.timer_count.removeEventListener(basic.TimerEvent.TIMER,this.onCount,this),this.timer_count.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onCountComplete,this),this.timer_count=null),this._tween_scaleX&&(this._tween_scaleX.setPaused(!0),this._tween_scaleX=null),this._tween_scaleY&&(this._tween_scaleY.setPaused(!0),this._tween_scaleY=null),this._tween_rotation&&(this._tween_rotation.setPaused(!0),this._tween_rotation=null),this.g_count.visible=!1},s.showText=function(){this.now_time>0?this.now_time<10?this.txt_time.text="0"+this.now_time.toString():this.txt_time.text=this.now_time.toString():this.txt_time.text="00"},s.onTimer=function(t){this.now_time-=1,this.showText()},s.onTimerComplete=function(t){this.timer&&(this.timer.stop(),this.timer.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer=null),null!=this.callback&&this.callback(),this.startCount()},s.startCount=function(){this.now_count=3,this.g_count.visible=!0,this.showCountAction(this.now_count),this.com_light.rotation=0,this._tween_rotation=egret.Tween.get(this.com_light,{loop:!0}).to({rotation:360},5e3),this.timer_count=new basic.Timer(1e3,3),this.timer_count.addEventListener(basic.TimerEvent.TIMER,this.onCount,this),this.timer_count.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onCountComplete,this),this.timer_count.start()},s.onCount=function(t){this.now_count-=1,this.now_count>0&&this.showCountAction(this.now_count)},s.onCountComplete=function(t){this.timer_count&&(this.timer_count.stop(),this.timer_count.removeEventListener(basic.TimerEvent.TIMER,this.onCount,this),this.timer_count.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onCountComplete,this),this.timer_count=null),this._tween_scaleX&&(this._tween_scaleX.setPaused(!0),this._tween_scaleX=null),this._tween_scaleY&&(this._tween_scaleY.setPaused(!0),this._tween_scaleY=null),this._tween_rotation&&(this._tween_rotation.setPaused(!0),this._tween_rotation=null),this.g_count.visible=!1},s.showCountAction=function(t){basic.SoundManager.instance.playEffect("sound_jsys_countdown_mp3"),this.g_count.scaleX=0,this.g_count.scaleY=0,this.img_count.source="txt_jsys_countdown"+t+"_png",this._tween_scaleX=egret.Tween.get(this.g_count).to({scaleX:1},400,egret.Ease.backOut),this._tween_scaleY=egret.Tween.get(this.g_count).to({scaleY:1},400,egret.Ease.backOut)},e}(eui.Component);egret.registerClass(JSYS_Time,"JSYS_Time");var JSYS_Up=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_savebox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaveBoxBtn,this)},s.info=function(){this.head.show(UserData.User_Head),this.txt_name.text=UserData.User_Name,this.txt_gold.text=UserData.User_Gold.toString(),this.img_vip.source="txt_s_vip"+UserData.User_VIP.toString()+"_png"},s.showGold=function(t){this.txt_gold.text=t.toString()},s.onExitBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),UserData.User_Id==GameData.Zhuang_Id?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"您当前是庄家，请下庄后退出!"}):PanelExit.instance.show()},s.onSaveBoxBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.SceneManager.addTopScene(SceneNames.SAVEBOX)},e}(eui.Component);egret.registerClass(JSYS_Up,"JSYS_Up");var JSYS_Zhuang=function(t){function e(){t.apply(this,arguments),this._tween_y=null,this.is_show=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_zhuanglist.y=-255,this.rect_mask.visible=!0,this.g_zhuanglist.visible=!0,this.g_zhuanglist.mask=this.rect_mask,this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=JSTS_ZhuangListItem,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisBtn,this)},s.show=function(){this.showGold(),this.showZhuangTimes(),0==GameData.Zhuang_Id?(this.txt_zhuang_times.text="",this.head.show("icon_zhuanghead_jpg")):this.head.show(GameData.Zhuang_Head),this.txt_name.text=GameData.Zhuang_Name,this.img_vip.source="txt_s_vip"+GameData.Zhuang_VIP.toString()+"_png"},s.showGold=function(){0==GameData.Zhuang_Id?(this.txt_gold.text="88888y",this.txt_zhuang_times.text=""):this.txt_gold.text=Number(Math.floor(GameData.Zhuang_Gold/1e6)/100).toString()+"y"},s.showZhuangList=function(t){var e=0;GameData.JSYS_ZhuangList=[],this.txt_zhuang_times.text="";for(var i=0;i<t.length;i++){var s=t[i];s.num=i+1,GameData.JSYS_ZhuangList[i]=s,UserData.User_Id==s.playerId&&(e=i+1)}e>0&&(this.txt_zhuang_times.text="排庄名次:"+e.toString()),this._data.source=GameData.JSYS_ZhuangList,this._data.refresh()},s.showZhuangTimes=function(){-1==GameData.Zhuang_Times?this.txt_num.text="":this.txt_num.text="剩余局数:"+GameData.Zhuang_Times.toString()},s.onThisBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("sound_btn_mp3"),0==this.is_show&&(this.is_show=!0,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),this._tween_y=egret.Tween.get(this.g_zhuanglist).to({y:76},400,egret.Ease.backOut).call(function(){basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onRemoveBtn,e)}))},s.onRemoveBtn=function(t){this.is_show=!1,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),basic.SoundManager.instance.playEffect("sound_btn_mp3"),this._tween_y=egret.Tween.get(this.g_zhuanglist).to({y:-255},400,egret.Ease.backIn),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRemoveBtn,this)},e}(eui.Component);egret.registerClass(JSYS_Zhuang,"JSYS_Zhuang");var JSTS_ZhuangListItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.dataChanged=function(){t.prototype.dataChanged.call(this),this.txt_num.text=this.data.num+".",this.txt_name.text=this.data.nickName,this.txt_gold.text=Number(Math.floor(this.data.gold/1e6)/100).toString()+"亿"},e}(eui.ItemRenderer);egret.registerClass(JSTS_ZhuangListItem,"JSTS_ZhuangListItem");var Start_Card=function(t){function e(){t.call(this),this._tween_alpha=null,this._tween_scaleX=null,this._tween_scaleY=null,this._tween_box_alpha=null,this._tween_box_scaleX=null,this._tween_box_scaleY=null,this._tween_txt_alpha=null,this._tween_txt_scaleX=null,this._tween_txt_scaleY=null,this._tween_icon_alpha=null,this._tween_icon_scaleX=null,this._tween_icon_scaleY=null,this.game_name=[SceneNames.GAME_JSYS,SceneNames.GAME_EBG,""],this.game_loadname=["jsysload","ebgload",""],this.is_showwaiting=!1,this.skinName=Start_CardSkin,this.img_texiao.visible=!1,this.img_txt_texiao.visible=!1,this.img_icon_texiao.visible=!1,basic.Dispatcher.addListener(EventNames.GAME_LOGIN,this.onGameLogin,this),basic.Dispatcher.addListener(EventNames.REMOVE_WAITING,this.onRemoveWaiting,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThisBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.show=function(t,e,i,s){this.img_back.source=t,this.img_texiao.source=t,this.img_txt.source=e,this.img_icon.source=i,this.img_txt_texiao.source=e,this.img_icon_texiao.source=i,2==s&&(this.img_txt.verticalCenter=13,this.img_txt_texiao.verticalCenter=13),this.card_num=s},s.showState=function(t){this.currentState=t},s.showMaskAlpha=function(t){this.img_mask.alpha=t},s.onGameLogin=function(t){this.is_login=!0},s.onThisBtn=function(t){var e=this;1==this.is_canClick&&("show"==this.currentState?(this.img_texiao.scaleX=1,this.img_texiao.scaleY=1,this.img_texiao.alpha=.6,this.img_box_texiao.scaleX=1,this.img_box_texiao.scaleY=1,this.img_box_texiao.alpha=.6,this.img_txt_texiao.scaleX=.8,this.img_txt_texiao.scaleY=.8,this.img_txt_texiao.alpha=.6,this.img_icon_texiao.scaleX=1,this.img_icon_texiao.scaleY=1,this.img_icon_texiao.alpha=.6,this.img_texiao.visible=!0,this.img_txt_texiao.visible=!0,this.img_icon_texiao.visible=!0,this.stopTween(),this._tween_alpha=egret.Tween.get(this.img_texiao).to({alpha:.1},300).to({alpha:0},300),this._tween_scaleX=egret.Tween.get(this.img_texiao).to({scaleX:1.12},300).to({scaleX:1.3},300),this._tween_box_alpha=egret.Tween.get(this.img_box_texiao).to({alpha:.1},300).to({alpha:0},300),this._tween_box_scaleX=egret.Tween.get(this.img_box_texiao).to({scaleX:1.12},300).to({scaleX:1.3},300),this._tween_box_scaleY=egret.Tween.get(this.img_box_texiao).to({scaleY:1.12},300).to({scaleY:1.3},300),this._tween_txt_alpha=egret.Tween.get(this.img_txt_texiao).to({alpha:.1},300).to({alpha:0},300),this._tween_txt_scaleX=egret.Tween.get(this.img_txt_texiao).to({scaleX:.896},300).to({scaleX:1.04},300),this._tween_txt_scaleY=egret.Tween.get(this.img_txt_texiao).to({scaleY:.896},300).to({scaleY:1.04},300),this._tween_icon_alpha=egret.Tween.get(this.img_icon_texiao).to({alpha:.1},300).to({alpha:0},300),this._tween_icon_scaleX=egret.Tween.get(this.img_icon_texiao).to({scaleX:1.12},300).to({scaleX:1.3},300),this._tween_icon_scaleY=egret.Tween.get(this.img_icon_texiao).to({scaleY:1.12},300).to({scaleY:1.3},300),this._tween_scaleY=egret.Tween.get(this.img_texiao).to({scaleY:1.12},300).to({scaleY:1.3},300).call(function(){e.img_texiao.visible=!1,e.img_txt_texiao.visible=!1,e.img_icon_texiao.visible=!1,e.enterGame()
})):basic.Dispatcher.dispatch(EventNames.SHOW_NOWCARD,{nowcardnum:this.card_num}))},s.enterGame=function(){this.card_num<2?(this.is_login=!1,this.is_showwaiting=!0,0==this.card_num?Comm_jsys.instance.init():1==this.card_num&&Comm_ebg.instance.init(),basic.SceneManager.addTopScene(SceneNames.WAITING),0==LoaderData.is_Game_LoadEnd[this.card_num]&&(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(this.game_loadname[this.card_num])),this.addEventListener(egret.Event.ENTER_FRAME,this.onShowGame,this)):2==this.card_num?PanelCreateRoom.instance.show():basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"游戏开发中，敬请期待"})},s.onResourceLoadComplete=function(t){LoaderData.is_Game_LoadEnd[this.card_num]=!0,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},s.onItemLoadError=function(t){},s.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){basic.Dispatcher.dispatch(EventNames.LOADING_PROGRESS,{itemsLoaded:t.itemsLoaded,itemsTotal:t.itemsTotal})},s.onShowGame=function(t){1==LoaderData.is_Game_LoadEnd[this.card_num]&&1==this.is_login&&(this.is_showwaiting=!1,basic.SceneManager.removeTopScene(SceneNames.WAITING),this.removeEventListener(egret.Event.ENTER_FRAME,this.onShowGame,this),this.showGame())},s.onRemoveWaiting=function(t){1==this.is_showwaiting&&(this.is_showwaiting=!1,basic.SceneManager.removeTopScene(SceneNames.WAITING),this.removeEventListener(egret.Event.ENTER_FRAME,this.onShowGame,this),0==this.card_num?Comm_jsys.instance.closeConnect():1==this.card_num&&Comm_ebg.instance.closeConnect())},s.showGame=function(){this.card_num<2&&basic.SceneManager.show(this.game_name[this.card_num])},s.stopTween=function(){this._tween_alpha&&(this._tween_alpha.setPaused(!0),this._tween_alpha=null),this._tween_scaleX&&(this._tween_scaleX.setPaused(!0),this._tween_scaleX=null),this._tween_scaleY&&(this._tween_scaleY.setPaused(!0),this._tween_scaleY=null),this._tween_box_alpha&&(this._tween_box_alpha.setPaused(!0),this._tween_box_alpha=null),this._tween_box_scaleX&&(this._tween_box_scaleX.setPaused(!0),this._tween_box_scaleX=null),this._tween_box_scaleY&&(this._tween_box_scaleY.setPaused(!0),this._tween_box_scaleY=null),this._tween_txt_alpha&&(this._tween_txt_alpha.setPaused(!0),this._tween_txt_alpha=null),this._tween_txt_scaleX&&(this._tween_txt_scaleX.setPaused(!0),this._tween_txt_scaleX=null),this._tween_txt_scaleY&&(this._tween_txt_scaleY.setPaused(!0),this._tween_txt_scaleY=null),this._tween_icon_alpha&&(this._tween_icon_alpha.setPaused(!0),this._tween_icon_alpha=null),this._tween_icon_scaleX&&(this._tween_icon_scaleX.setPaused(!0),this._tween_icon_scaleX=null),this._tween_icon_scaleY&&(this._tween_icon_scaleY.setPaused(!0),this._tween_icon_scaleY=null)},e}(eui.Component);egret.registerClass(Start_Card,"Start_Card");var Start_Cards=function(t){function e(){t.apply(this,arguments),this.arr_card=[],this.num_max_alpha=.8,this.num_min_scale=.8,this._tween_x=null,this.card_txt=["txt_s_box0_png","","txt_s_box2_png","","",""],this.card_icon=["icon_s_box0_png","","","","",""]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_card.width=390*(GameData.Game_Num-1)+444+196;for(var e=0;e<GameData.Game_Num;e++){var i=new Start_Card;i.verticalCenter=0,i.horizontalCenter=390*((1-GameData.Game_Num)/2+e),i.show("back_s_box"+e+"_png",this.card_txt[e],this.card_icon[e],e),this.arr_card[e]=i,this.g_card.addChild(this.arr_card[e])}this.showNowCard(),basic.Dispatcher.addListener(EventNames.SHOW_NOWCARD,this.onShowNowCard,this),this.g_card.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startMove,this)},s.enterGame=function(t){this.arr_card[t].enterGame()},s.showNowCard=function(){this.g_card.x=-390*GameData.GameCard_NowShow;for(var t=0;t<GameData.Game_Num;t++)t==GameData.GameCard_NowShow?(this.arr_card[t].showState("show"),this.arr_card[t].scaleX=1,this.arr_card[t].scaleY=1,this.g_card.setChildIndex(this.arr_card[t],0)):(this.arr_card[t].showState("hide"),this.arr_card[t].scaleX=this.num_min_scale,this.arr_card[t].scaleY=this.num_min_scale,this.arr_card[t].showMaskAlpha(this.num_max_alpha))},s.showActionCard=function(){for(var t=0;t<GameData.Game_Num;t++)if(this.g_card.x==390*-t)this.arr_card[t].showState("show"),this.arr_card[t].scaleX=1,this.arr_card[t].scaleY=1;else{var e,i;this.arr_card[t].showState("hide"),i=Math.abs(390*t+this.g_card.x),e=Math.min(1,i/390),this.arr_card[t].showMaskAlpha(this.num_max_alpha*e),this.arr_card[t].scaleX=1-(1-this.num_min_scale)*e,this.arr_card[t].scaleY=1-(1-this.num_min_scale)*e}},s.showMoveAction=function(t){var e=this;void 0===t&&(t=null);var i,s;s=null==t?Math.floor((0-this.g_card.x+195)/390):t,0>s&&(s=0),s>=GameData.Game_Num&&(s=GameData.Game_Num-1),i=1.3*Math.abs(this.g_card.x+390*s),this.addEventListener(egret.Event.ENTER_FRAME,this.onFrameShowCard,this),this.g_card.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startMove,this),this._tween_x=egret.Tween.get(this.g_card).to({x:390*-s},i).call(function(){e.removeEventListener(egret.Event.ENTER_FRAME,e.onFrameShowCard,e),e.g_card.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.startMove,e),GameData.GameCard_NowShow=s,e.showNowCard()})},s.onFrameShowCard=function(t){this.showActionCard()},s.onShowNowCard=function(t){this.showMoveAction(t.data.nowcardnum)},s.startMove=function(t){this.num_offsetX=t.stageX-this.g_card.x,this.num_Start_MoveX=this.g_card.x,this.num_MoveMax_X=0,this.int_Time1=this.int_Time2=egret.getTimer(),this.num_X1=this.num_X2=this.g_card.x,this.num_X_Off_Set=t.stageX-this.g_card.x;for(var e=0;e<GameData.Game_Num;e++)this.arr_card[e].is_canClick=!1;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this)},s.onMove=function(t){var e;this.g_card.x=t.stageX-this.num_offsetX,this.num_MoveMax_X=Math.abs(this.g_card.x-this.num_Start_MoveX),this.showActionCard(),(this.g_card.x>200||this.g_card.x<640-this.g_card.width-200)&&(this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.showMoveAction()),(t.stageX<10||t.stageX>630)&&(this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.showMoveAction()),e=egret.getTimer(),e-this.int_Time1>50&&(this.num_X2=this.num_X1,this.int_Time2=this.int_Time1,this.num_X1=this.g_card.x,this.int_Time1=e)},s.stopMove=function(t){var e,i;if(this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopMove,this),this.num_MoveMax_X>5)i=(egret.getTimer()-this.int_Time2)/1e3,e=(this.g_card.x-this.num_X2)/i,Math.abs(e)>150?0>e?this.showMoveAction(GameData.GameCard_NowShow+1):this.showMoveAction(GameData.GameCard_NowShow-1):this.showMoveAction();else{this.showNowCard();for(var s=0;s<GameData.Game_Num;s++)this.arr_card[s].is_canClick=!0}},e}(eui.Component);egret.registerClass(Start_Cards,"Start_Cards");var Start_Chat=function(t){function e(){t.apply(this,arguments),this.system_message=[],this.is_SystemStart=!1,this._tween_x=null,this._tween_alpha=null,this.show_chat_num=0,this.show_chat=[]}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.g_show.scaleY=0,this.txt_chat.text="",this.g_show.visible=!1,this.g_system.visible=!0,this.rect_back.visible=!1,this.rect_system_mask.visible=!0,this.txt_System=new egret.TextField,this.txt_System.y=10,this.txt_System.size=20,this.txt_System.height=20,this.txt_System.fontFamily="微软雅黑",this.g_system.addChild(this.txt_System),this.g_system.setChildIndex(this.rect_system_mask,this.g_system.numChildren-1),this.txt_System.mask=this.rect_system_mask,this.txt_chat.text="",basic.Dispatcher.addListener(EventNames.SHOW_CHAT,this.onShowChat,this),basic.Dispatcher.addListener(EventNames.SHOW_TOTALCHAT,this.onShowTotalChat,this),this.txt_chat.addEventListener(egret.FocusEvent.FOCUS_IN,this.onChatText,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendBtn,this),this.rect_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideChat,this)},s.showChat=function(){var t=this;if(0==this.g_show.scaleY){this.removeAllChat(),this.g_show.visible=!0,this.rect_back.visible=!0,Comm.instance.sendSocket({type:"chatList"});egret.Tween.get(this.g_show).to({scaleY:1},400,egret.Ease.backOut).call(function(){t.g_system.visible=!1})}},s.onShowTotalChat=function(t){for(var e=0;e<t.data.data.length;e++){var i=new Chat_Item,s={uid:t.data.data[e].account,nickname:t.data.data[e].nickName,message:t.data.data[e].msg,head:t.data.data[e].headImgURL,vip:t.data.data[e].vipLevel};i.show(s,585),this.show_chat[this.show_chat_num]=i,this.g_detail.addChild(this.show_chat[this.show_chat_num]),this.show_chat_num+=1}this.scroller.viewport.height<this.scroller.viewport.contentHeight&&(this.scroller.validateNow(),this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.viewport.height)},s.removeAllChat=function(){for(var t=0;t<this.show_chat_num;t++)this.g_detail.removeChild(this.show_chat[t]);this.show_chat=[],this.show_chat_num=0},s.onShowChat=function(t){var e=t.data;e.chatType=0,basic.Dispatcher.dispatch(EventNames.EBG_SHOWCHAT,e),basic.Dispatcher.dispatch(EventNames.JSYS_SHOWCHAT,e),this.showSystemChat(t.data.msg)},s.onChatText=function(t){t.type==egret.FocusEvent.FOCUS_IN&&this.showChat()},s.onHideChat=function(t){var e=this;if(1==this.g_show.scaleY){this.txt_chat.text="",this.rect_back.visible=!1;egret.Tween.get(this.g_show).to({scaleY:0},400,egret.Ease.backIn).call(function(){e.g_show.visible=!1,e.g_system.visible=!0,e.removeAllChat()})}},s.onSendBtn=function(t){var e=this;if(15==UserData.User_VIP){if(""!=this.txt_chat.text&&(Comm.instance.sendSocket({type:"chat",msg:this.txt_chat.text}),this.txt_chat.text="",1==this.g_show.scaleY)){this.rect_back.visible=!1;egret.Tween.get(this.g_show).to({scaleY:0},400,egret.Ease.backIn).call(function(){e.g_show.visible=!1,e.g_system.visible=!0,e.removeAllChat()})}}else basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"您等级不足15级，不能发言"})},s.showSystemChat=function(t){this.system_message[this.system_message.length]=t,this.startShowSystem()},s.startShowSystem=function(){var t=this;if(0==this.is_SystemStart){for(var e="",i=0;i<this.system_message.length;i++)if(""!=this.system_message[i]){e=this.system_message[i],this.system_message[i]="";break}if(""!=e){var s,a;this.is_SystemStart=!0,this.txt_System.x=470,this.txt_System.width=1e3,this.txt_System.textFlow=(new egret.HtmlTextParser).parser(e),this.txt_System.width=this.txt_System.textWidth,s=470+this.txt_System.width,a=20*s,this._tween_x=egret.Tween.get(this.txt_System).to({x:470-s},a).call(function(){t.is_SystemStart=!1,t.startShowSystem()})}}},e}(eui.Component);egret.registerClass(Start_Chat,"Start_Chat");var Start_Up=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this),this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUserBtn,this),this.btn_set.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSetBtn,this),this.btn_shop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShopBtn,this),this.btn_custom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCustomBtn,this)},s.showMessage=function(t,e,i){this.head.show(t),this.txt_id.text="ID:"+e.toString(),this.img_vip.source="txt_s_vip"+i.toString()+"_png",1==UserData.is_APP?this.btn_shop.visible=!1:this.btn_shop.visible=!0},s.showGold=function(t){this.txt_gold.text=t.toString(),1e8>t?this.txt_gold.text=Math.floor(t/1e4).toString()+"万":this.txt_gold.text=Number(Math.floor(t/1e6)/100).toString()+"亿"},s.onUserBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("sound_btn_mp3"),PanelUser.instance.show(function(){e.showMessage(UserData.User_Head,UserData.User_Id,UserData.User_VIP)})},s.onSetBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),PanelSet.instance.show()},s.onShopBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:1})},s.onCustomBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:5})},e}(eui.Component);egret.registerClass(Start_Up,"Start_Up");var Tips=function(t){function e(){t.call(this),this.is_show=!1,this._tween_y=null,this._tween_alpha=null,this.skinName=TipsSkin,this.visible=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.show=function(t){var e=this;1==this.is_show&&(this.is_show=!1,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),this._tween_alpha&&(this._tween_alpha.setPaused(!0),this._tween_alpha=null)),this.txt_tips.text=t,this.alpha=1,this.visible=!0,this.y=basic.StageProxy.height,this.x=(basic.StageProxy.width-this.width)/2,this.is_show=!0,this._tween_alpha=egret.Tween.get(this).wait(1100).to({alpha:0},300),this._tween_y=egret.Tween.get(this).to({y:330},300).wait(800).to({y:-this.height},300).call(function(){e.is_show=!1,e._tween_y&&(e._tween_y.setPaused(!0),e._tween_y=null),e._tween_alpha&&(e._tween_alpha.setPaused(!0),e._tween_alpha=null),e.visible=!1})},e}(eui.Component);egret.registerClass(Tips,"Tips");var PanelCreateRoom=function(t){function e(){t.call(this),this.btn_num=[],this.room_id=""}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=PanelCreateRoomSkin;for(var e=0;10>e;e++){var i=this["btn_num"+e];this.btn_num[e]=i,this.btn_num[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNumBtn,this)}basic.Dispatcher.addListener(EventNames.GF_JOINROOM,this.onJoinRoom,this),this.btn_again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtn,this),this.btn_create.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreateBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this)},a.show=function(t){void 0===t&&(t=null),basic.PopUpManager.modalMaskAlpha=0,this.popup(this.funExit.bind(this)),this.room_id="",this.txt_roomid.text=""},a.onJoinRoom=function(t){this.funExit(),GameData.GF_RoomId=t.data.roomId,basic.SceneManager.addTopScene(SceneNames.GUOFEN)},a.funExit=function(){basic.PopUpManager.modalMaskAlpha=.6,this.dealAction(),basic.SoundManager.instance.playEffect("sound_btn_mp3")},a.onNumBtn=function(t){var e=Number(t.target.name);this.room_id=this.room_id+e.toString(),this.txt_roomid.text=this.room_id,6==this.room_id.length&&(Comm.instance.sendSocket({type:"joinRoom",roomId:this.room_id}),this.room_id="",this.txt_roomid.text="")},a.onAgainBtn=function(t){this.room_id="",this.txt_roomid.text=""},a.onDeleteBtn=function(t){this.room_id.length>0&&(this.room_id=this.room_id.substring(0,this.room_id.length-1)),this.txt_roomid.text=this.room_id},a.onCreateBtn=function(t){Comm.instance.sendSocket({type:"openRoom"})},e}(basic.PanelBase);egret.registerClass(PanelCreateRoom,"PanelCreateRoom");var PanelExit=function(t){function e(){t.call(this,basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=PanelExitSkin,this.btn_jixu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJiXuBtn,this),this.btn_tuichu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTuiChuBtn,this)},a.show=function(t){void 0===t&&(t=null),this.popup(this.funExit.bind(this))},a.funExit=function(){this.dealAction()},a.onJiXuBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.funExit()},a.onTuiChuBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.funExit(),-1==GameData.Game_Type?window.AndroidexitGame(""):basic.SceneManager.back()},e}(basic.PanelBase);egret.registerClass(PanelExit,"PanelExit");var PanelSet=function(t){function e(){t.call(this,basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=PanelSetSkin,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this),this.btn_about.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAboutBtn,this),this.btn_clause.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClauseBtn,this),this.btn_sound.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSoundMoveStart,this),this.btn_music.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMusicMoveStart,this)},a.show=function(t){void 0===t&&(t=null),this.popup(this.funExit.bind(this)),this.btn_music.x=260*basic.SoundManager.instance.musicVolume-1,this.btn_sound.x=260*basic.SoundManager.instance.effectVolume-1,this.img_music.width=this.btn_music.x+31,this.img_sound.width=this.btn_sound.x+31},a.funExit=function(){this.dealAction()},a.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.funExit()},a.onAboutBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:4}),this.funExit()},a.onClauseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:6}),this.funExit()},a.onSoundMoveStart=function(t){this.offset_Sound_X=t.stageX-this.btn_sound.x,this.start_Move_Sound_X=this.btn_sound.x,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onSoundMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onSoundMoveOver,this)},a.onMusicMoveStart=function(t){this.offset_Music_X=t.stageX-this.btn_music.x,this.start_Move_Music_X=this.btn_music.x,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMusicMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onMusicMoveOver,this)},a.onSoundMove=function(t){this.btn_sound.x=t.stageX-this.offset_Sound_X,this.btn_sound.x<-1&&(this.btn_sound.x=-1),this.btn_sound.x>260&&(this.btn_sound.x=260),this.img_sound.width=this.btn_sound.x+31},a.onMusicMove=function(t){this.btn_music.x=t.stageX-this.offset_Music_X,this.btn_music.x<-1&&(this.btn_music.x=-1),this.btn_music.x>260&&(this.btn_music.x=260),this.img_music.width=this.btn_music.x+31,basic.SoundManager.instance.musicVolume=Number((this.btn_music.x+1)/260),basic.SoundManager.instance.setVolume()},a.onSoundMoveOver=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onSoundMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onSoundMoveOver,this),this.img_sound.width=this.btn_sound.x+31,basic.SoundManager.instance.effectVolume=Number((this.btn_sound.x+1)/260)},a.onMusicMoveOver=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMusicMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onMusicMoveOver,this),this.img_music.width=this.btn_music.x+31,basic.SoundManager.instance.musicVolume=Number((this.btn_music.x+1)/260),basic.SoundManager.instance.setVolume()},e}(basic.PanelBase);egret.registerClass(PanelSet,"PanelSet");var PanelUser=function(t){function e(){t.call(this,basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backIn}),this.btn_head=[],this.now_head=""}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=PanelUserSkin;for(var e=0;30>e;e++){var i=this["btn_head"+e];this.btn_head[e]=i,this.btn_head[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHeadChooseBtn,this)}this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHeadBtn,this),this.btn_save.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSaveBtn,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},a.show=function(t){void 0===t&&(t=null),this.popup(this.funExit.bind(this)),this.callBack=t,this.txt_tips.text="",this.g_choosehead.visible=!1,this.now_head=UserData.User_Head,this.head.show(UserData.User_Head),this.txt_phone.text=UserData.User_Phone,this.txt_account.text=UserData.User_Account,this.txt_id.text=UserData.User_Id.toString(),this.txt_password.text=UserData.User_Password,this.tabbar_sex.selectedIndex=UserData.User_Sex,this.txt_gold.text=UserData.User_Gold.toString(),this.img_vip.source="txt_s_vip"+UserData.User_VIP.toString()+"_png",UserData.User_Account==UserData.User_Name?(this.txt_name.visible=!1,this.txt_namechange.visible=!0,this.txt_namechange.text=UserData.User_Name):(this.txt_name.visible=!0,this.txt_namechange.visible=!1,this.txt_name.text=UserData.User_Name),basic.Dispatcher.addListener(EventNames.SHOW_TIPS,this.onShowTips,this)},a.funExit=function(){this.dealAction(),this.callBack&&this.callBack()},a.onHeadBtn=function(t){var e;this.g_choosehead.visible=!0,this.now_head.indexOf("http")<0?(this.img_headlight.visible=!0,e=Number(this.now_head.substring(9,this.now_head.length-4)),this.img_headlight.x=e%5*106-14,this.img_headlight.y=107*Math.floor(e/5)-10):this.img_headlight.visible=!1,basic.SoundManager.instance.playEffect("sound_btn_mp3")},a.onHeadChooseBtn=function(t){var e=Number(t.target.name);this.now_head="icon_head"+e.toString()+"_jpg",this.head.show(this.now_head),this.g_choosehead.visible=!1,basic.SoundManager.instance.playEffect("sound_btn_mp3")},a.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.funExit()},a.onSaveBtn=function(t){UserData.User_Account==UserData.User_Name?this.username=this.txt_namechange.text:this.username=this.txt_name.text,this.txt_tips.text="",""==this.username?this.txt_tips.text="昵称不能为空":""==this.txt_password.text?this.txt_tips.text="密码不能为空":Comm.instance.sendSocket({type:"changeUserInfo",headImgURL:this.now_head,password:this.txt_password.text,nickName:this.username,phone:this.txt_phone.text,sex:this.tabbar_sex.selectedIndex}),basic.SoundManager.instance.playEffect("sound_btn_mp3")},a.onShowTips=function(t){"修改成功"==t.data.tips&&(UserData.User_Name=this.username,UserData.User_Head=this.now_head,UserData.User_Phone=this.txt_phone.text,UserData.User_Password=this.txt_password.text,UserData.User_Sex=this.tabbar_sex.selectedIndex,UserData.User_Account==UserData.User_Name?(this.txt_name.visible=!1,this.txt_namechange.visible=!0,this.txt_namechange.text=UserData.User_Name):(this.txt_name.visible=!0,this.txt_namechange.visible=!1,this.txt_name.text=UserData.User_Name),basic.localStorage.setItem("password",UserData.User_Password))},e}(basic.PanelBase);egret.registerClass(PanelUser,"PanelUser");var Panel_EBG_PaiXing=function(t){function e(){t.call(this,basic.dialogEffect.Flew,{duration:400,direction:"left",withFade:!0},basic.dialogEffect.Flew,{duration:400,direction:"left",withFade:!0})}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=Panel_EBG_PaiXingSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.width=basic.StageProxy.width,this.height=basic.StageProxy.height,this.rect_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},a.show=function(t){void 0===t&&(t=null),this._callback=t,basic.PopUpManager.modalMaskAlpha=0,this.popup()},a.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.PopUpManager.modalMaskAlpha=.6,this.dealAction()},e}(basic.PanelBase);egret.registerClass(Panel_EBG_PaiXing,"Panel_EBG_PaiXing");var Panel_EBG_ZhuangList=function(t){function e(){t.call(this,basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=Panel_EBG_ZhuangListSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=ZhuangListItem,this.btn_up.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpBtn,this),this.btn_down.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownBtn,this),basic.Dispatcher.addListener(EventNames.EBG_ZHUANGLIST,this.onGetZhuangList,this)},a.show=function(t){void 0===t&&(t=null),this._callback=t,basic.PopUpManager.modalMaskAlpha=.6,this.popup(this.funExit.bind(this)),Comm_ebg.instance.sendSocket({type:"dealerList"})},a.onGetZhuangList=function(t){var e=!1;if(GameData.Zhuang_Id==UserData.User_Id)e=!0;else for(var i=0;i<t.data.data.length;i++)if(UserData.User_Id==t.data.data[i].playerId){e=!0;break}this._data.source=t.data.data,this._data.refresh(),1==e?(this.btn_up.visible=!1,this.btn_down.visible=!0):(this.btn_up.visible=!0,this.btn_down.visible=!1)},a.onUpBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Comm_ebg.instance.sendSocket({type:"callDealer"})},a.onDownBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),Comm_ebg.instance.sendSocket({type:"cancelDealer"})},a.funExit=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.dealAction()},e}(basic.PanelBase);egret.registerClass(Panel_EBG_ZhuangList,"Panel_EBG_ZhuangList");var ZhuangListItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.dataChanged=function(){t.prototype.dataChanged.call(this),this.img_head.source=this.data.headImgURL,this.txt_name.text=this.data.nickName,this.txt_jinbi.text=GameData.assGold(2,this.data.gold)},e}(eui.ItemRenderer);egret.registerClass(ZhuangListItem,"ZhuangListItem");var Panel_EBG_ZouShi=function(t){function e(){t.call(this,basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},basic.dialogEffect.Scale,{withFade:!0,ease:egret.Ease.backIn}),this.arr_table0=[],this.arr_table1=[],this.arr_table2=[],this.arr_zhuang=[]}__extends(e,t);var i=__define,s=e,a=s.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=Panel_EBG_ZouShiSkin},a.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;8>e;e++){var i=this["com_table0_"+e],s=this["com_table1_"+e],a=this["com_table2_"+e],n=this["com_zhuang_"+e];this.arr_table0[e]=i,this.arr_table1[e]=s,this.arr_table2[e]=a,this.arr_zhuang[e]=n,this.arr_table0[e].visible=!1,this.arr_table1[e].visible=!1,this.arr_table2[e].visible=!1,this.arr_zhuang[e].visible=!1}basic.Dispatcher.addListener(EventNames.EBG_HISTORY,this.onShowDetail,this)},a.show=function(t){void 0===t&&(t=null),this._callback=t,basic.PopUpManager.modalMaskAlpha=.6,this.popup(this.funExit.bind(this)),Comm_ebg.instance.sendSocket({type:"history"})},a.onShowDetail=function(t){for(var e=0;8>e;e++)e<t.data.historys.length?(this.arr_table0[e].visible=!0,this.arr_table1[e].visible=!0,this.arr_table2[e].visible=!0,this.arr_zhuang[e].visible=!0,1==t.data.historys[e][0]?this.arr_table0[e].currentState="1":this.arr_table0[e].currentState="0",1==t.data.historys[e][1]?this.arr_table1[e].currentState="1":this.arr_table1[e].currentState="0",1==t.data.historys[e][2]?this.arr_table2[e].currentState="1":this.arr_table2[e].currentState="0",1==t.data.historys[e][3]?this.arr_zhuang[e].currentState="1":this.arr_zhuang[e].currentState="0"):(this.arr_table0[e].visible=!1,this.arr_table1[e].visible=!1,this.arr_table2[e].visible=!1,this.arr_zhuang[e].visible=!1)},a.funExit=function(){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.dealAction()},e}(basic.PanelBase);egret.registerClass(Panel_EBG_ZouShi,"Panel_EBG_ZouShi");var SceneAbout=function(t){function e(){t.call(this),this.skinName=SceneAboutSkin,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){},s.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:0})},e}(basic.SceneBase);egret.registerClass(SceneAbout,"SceneAbout");var SceneClause=function(t){function e(){t.call(this),this.skinName=SceneClauseSkin,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){},s.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:0})},e}(basic.SceneBase);egret.registerClass(SceneClause,"SceneClause");var SceneCustom=function(t){function e(){t.call(this),this.skinName=SceneCustomSkin,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){},s.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:0})},e}(basic.SceneBase);egret.registerClass(SceneCustom,"SceneCustom");var SceneGame_EBG=function(t){function e(){t.call(this),this.timer_goldflay=null,this.skinName=SceneGame_EBGSkin,basic.Dispatcher.addListener(EventNames.EBG_SHOWGOLD,this.onShowGold,this),basic.Dispatcher.addListener(EventNames.EBG_GAMEOPEN,this.onGameOpen,this),basic.Dispatcher.addListener(EventNames.EBG_GAMEINFO,this.onGameInfo,this),basic.Dispatcher.addListener(EventNames.EBG_GAMERESULT,this.onGameResult,this),basic.Dispatcher.addListener(EventNames.EBG_CHANGEZHUANG,this.onChangeZhuang,this),basic.Dispatcher.addListener(EventNames.EBG_ZHUANGLIST,this.onGetZhuangList,this),basic.Dispatcher.addListener(EventNames.EBG_CHANGEZHUANG,this.onChangeZhuang,this),basic.Dispatcher.addListener(EventNames.EBG_CHANGESTATUS,this.onChangeStatus,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){this.over.hide(),this.ebg_down.info(),GameData.Game_Type=1,basic.SoundManager.instance.playMusic("back_ebg_mp3"),Comm_ebg.instance.sendSocket({type:"joinRoom",roomId:0})},s.beforeHide=function(){this.clean(),basic.SoundManager.instance.stopMusic(),Comm_ebg.instance.sendSocket({type:"exitGame"})},s.clean=function(){this.clock.stop(),this.ebg_table.clean(),this.ebg_chat.clean(),this.over.hide(),this.timer_goldflay&&(this.timer_goldflay.stop(),this.timer_goldflay.removeEventListener(basic.TimerEvent.TIMER,this.onGoldFlay,this),this.timer_goldflay.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onGoldFlayComplete,this),this.timer_goldflay=null)},s.startGoldAction=function(){this.gold_now_action=0,this.goldAction(),this.timer_goldflay=new basic.Timer(1e3,2),this.timer_goldflay.addEventListener(basic.TimerEvent.TIMER,this.onGoldFlay,this),this.timer_goldflay.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onGoldFlayComplete,this),this.timer_goldflay.start()
},s.onGoldFlay=function(t){this.gold_now_action+=1,this.goldAction()},s.onGoldFlayComplete=function(t){this.timer_goldflay&&(this.timer_goldflay.stop(),this.timer_goldflay.removeEventListener(basic.TimerEvent.TIMER,this.onGoldFlay,this),this.timer_goldflay.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onGoldFlayComplete,this),this.timer_goldflay=null),this.over.show()},s.goldAction=function(){1==GameData.EBG_Poker_Table_IsWin[this.gold_now_action]?(this.goldflay.startFlay(2,0,this.gold_now_action),GameData.EBG_YaZhu_User[this.gold_now_action]>0&&this.goldflay.startFlay(0,0,this.gold_now_action)):this.goldflay.startFlay(1,0,this.gold_now_action)},s.onGameInfo=function(t){GameData.EBG_YaZhu_UserTotal=0,GameData.EBG_State=t.data.status,GameData.EBG_YaZhu_User=t.data.betGolds,GameData.EBG_YaZhu_Total=t.data.totalBetGolds;for(var e=0;e<GameData.EBG_YaZhu_User.length;e++)GameData.EBG_YaZhu_UserTotal+=GameData.EBG_YaZhu_User[e],GameData.EBG_YaZhu_OtherTotal+=GameData.EBG_YaZhu_Total[e];GameData.EBG_Poker_Table_InfoChip=t.data.totalBetGoldDetails,GameData.EBG_Poker_Table_Type=t.data.cardTypes,GameData.EBG_Poker_Table_IsWin=t.data.isWins,GameData.EBG_Poker_Table_Card=t.data.cards,GameData.EBG_YaZhu_User_NowDetail=[[],[],[]],this.ebg_down.showGold(UserData.User_Gold-GameData.EBG_YaZhu_UserTotal),this.ebg_table.info(),1==GameData.EBG_State?this.clock.start(t.data.leftTime):this.clock.visible=!1,Comm_ebg.instance.sendSocket({type:"dealerList"})},s.onGameResult=function(t){UserData.User_Gold=t.data.gold,GameData.Zhuang_Gold=t.data.dealerTotalGold,GameData.EBG_OverData=t.data,GameData.EBG_YaZhu_UserTotal=0},s.onChangeStatus=function(t){var e=this;GameData.EBG_State=t.data.status,0==GameData.EBG_State?(this.over.hide(),this.ebg_table.clean(),this.ebg_up.show(),this.ebg_down.showGold(UserData.User_Gold-GameData.EBG_YaZhu_UserTotal),this.starttips.start()):1==GameData.EBG_State?(this.over.hide(),this.clock.start(t.data.leftTime)):(this.over.hide(),3==GameData.EBG_State&&(1==GameData.EBG_Poker_Table_IsWin[0]&&1==GameData.EBG_Poker_Table_IsWin[1]&&1==GameData.EBG_Poker_Table_IsWin[2]?this.specialresult.showLose(function(){e.ebg_table.showResult(),egret.setTimeout(function(){e.startGoldAction()},e,500)}):0==GameData.EBG_Poker_Table_IsWin[0]&&0==GameData.EBG_Poker_Table_IsWin[1]&&0==GameData.EBG_Poker_Table_IsWin[2]?this.specialresult.showWin(function(){e.ebg_table.showResult(),egret.setTimeout(function(){e.startGoldAction()},e,500)}):(this.ebg_table.showResult(),egret.setTimeout(function(){e.startGoldAction()},this,500))))},s.onGameOpen=function(t){GameData.EBG_Poker_Table_Card=t.data.cards,GameData.EBG_Poker_Table_Type=t.data.cardTypes,GameData.EBG_Poker_Table_IsWin=t.data.isWins,this.ebg_table.startSendMahjong()},s.onGetZhuangList=function(t){},s.onChangeZhuang=function(t){GameData.Zhuang_Id=t.data.dealerId,GameData.Zhuang_Name=t.data.nickName,GameData.Zhuang_Head=t.data.headImgURL,GameData.Zhuang_Gold=t.data.gold,this.ebg_up.show()},s.onShowGold=function(t){this.ebg_down.showGold(UserData.User_Gold-GameData.EBG_YaZhu_UserTotal)},e}(basic.SceneBase);egret.registerClass(SceneGame_EBG,"SceneGame_EBG");var SceneGame_JSYS=function(t){function e(){t.call(this),this.win_gold=0,this.skinName=SceneGame_JSYSSkin,this.jsys_box.touchEnabled=!1,this.jsys_box.touchChildren=!1,basic.Dispatcher.addListener(EventNames.JSYS_GAMEOPEN,this.onGameOpen,this),basic.Dispatcher.addListener(EventNames.JSYS_SHOWGOLD,this.onShowGold,this),basic.Dispatcher.addListener(EventNames.JSYS_GAMEINFO,this.onGameInfo,this),basic.Dispatcher.addListener(EventNames.JSYS_HISTORY,this.onShowHistory,this),basic.Dispatcher.addListener(EventNames.JSYS_GAMERESULT,this.onGameResult,this),basic.Dispatcher.addListener(EventNames.JSYS_SHOWWINBIG,this.onShowWinBig,this),basic.Dispatcher.addListener(EventNames.JSYS_STARTGENZHU,this.onStartGenZhu,this),basic.Dispatcher.addListener(EventNames.JSYS_CHANGEZHUANG,this.onChangeZhuang,this),basic.Dispatcher.addListener(EventNames.JSYS_CHANGESTATUS,this.onChangeStatus,this),basic.Dispatcher.addListener(EventNames.JSYS_ZHUANGLIST,this.onShowZhuangList,this),this.btn_no.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoBtn,this),this.btn_change.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){this.win_gold=0,GameData.Game_Type=0,GameData.Zhuang_Id=0,this.showBeiLv(),this.jsys_btn.showZhuangBtn(),this.jsys_up.info(),this.txt_wingold.text="0",Comm_jsys.instance.sendSocket({type:"gameInfo"}),basic.SoundManager.instance.playMusic("sound_jsys_back_mp3")},s.beforeHide=function(){this.clean(),basic.SoundManager.instance.stopMusic(),Comm_jsys.instance.sendSocket({type:"exitGame"})},s.showGold=function(){this.jsys_up.showGold(UserData.User_Gold-this.win_gold),this.txt_gold.text=GameData.assGold(2,UserData.User_Gold-this.win_gold)},s.clean=function(){this.hideGenZhu(),this.jsys_box.clean(),this.jsys_chat.clean(),this.jsys_time.clean()},s.showWinGold=function(){GameData.Zhuang_Id!=UserData.User_Id?(this.win_gold=GameData.JSYS_Now_UserWinGold+GameData.JSYS_YaZhu_UserTotal,console.log(GameData.JSYS_Now_UserWinGold),console.log(GameData.JSYS_YaZhu_UserTotal),this.txt_wingold.font="font_jsys_gold_fnt",this.txt_wingold.text=GameData.assGold(2,this.win_gold)):(this.win_gold=GameData.JSYS_Now_DearGold-GameData.Zhuang_Gold,this.win_gold>=0?(this.txt_wingold.font="font_jsys_gold_fnt",this.win_gold<1e8?this.txt_wingold.text=Math.floor(this.win_gold/1e4).toString()+"w":this.txt_wingold.text=Number(Math.floor(this.win_gold/1e6)/100).toString()+"y"):(this.win_gold=-this.win_gold,this.txt_wingold.font="font_jsys_goldlose_fnt",this.win_gold<1e8?this.txt_wingold.text="-"+Math.floor(this.win_gold/1e4).toString()+"w":this.txt_wingold.text="-"+Number(Math.floor(this.win_gold/1e6)/100).toString()+"y"))},s.hideGenZhu=function(){GameData.JSYS_GenZhu_Num=0,GameData.JSYS_GenZhu_Detail=[0,0,0,0,0,0,0,0,0,0,0,0],this.g_genzhu.visible=!1},s.onStartGenZhu=function(t){this.g_genzhu.visible=!0,this.txt_tips.text="自动跟注中，剩余"+Number(GameData.JSYS_GenZhu_Num-1).toString()+"轮"},s.onNoBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.hideGenZhu()},s.onShowGold=function(t){this.jsys_up.showGold(t.data.gold),this.txt_gold.text=GameData.assGold(2,t.data.gold)},s.onGameInfo=function(t){var e=this;GameData.JSYS_State=t.data.status,GameData.JSYS_YaZhu_User=t.data.betGolds,GameData.JSYS_YaZhu_Total=t.data.totalBetGolds,this.jsys_box.info(t.data.pos[0].pos),this.jsys_choose.info(),1==GameData.JSYS_State?(this.jsys_btn.showBtn(),this.jsys_time.start(t.data.leftTime-3,function(){e.jsys_btn.hideBtn(),e.jsys_choose.hideBtn(),GameData.JSYS_State=2})):this.jsys_btn.hideBtn(),GameData.JSYS_State>1,this.showGold()},s.onShowZhuangList=function(t){this.jsys_zhuang.showZhuangList(t.data.data),this.jsys_btn.showZhuangBtn()},s.onShowWinBig=function(t){var e=this,i=new Action_Fly;basic.SoundManager.instance.playEffect("sound_fly_mp3"),i.info(),i.start(t.data.nickName,t.data.headImgURL,t.data.winGold,function(){e.removeChild(i)}),this.addChild(i),i.scaleX=.8,i.scaleY=.8},s.onChangeStatus=function(t){var e=this;if(GameData.JSYS_State=t.data.status,0==GameData.JSYS_State)this.jsys_time.clean(),this.jsys_btn.hideBtn(),this.jsys_choose.hideBtn(),this.jsys_choose.clean(),this.win_gold=0,this.txt_wingold.font="font_jsys_gold_fnt",this.txt_wingold.text="0",this.jsys_zhuang.showGold();else if(1==GameData.JSYS_State){if(this.jsys_btn.showBtn(),this.jsys_choose.showBtn(),GameData.JSYS_GenZhu_Num>0)if(GameData.JSYS_GenZhu_Num-=1,this.txt_tips.text="自动跟注中，剩余"+Number(GameData.JSYS_GenZhu_Num-1).toString()+"轮",0==GameData.JSYS_GenZhu_Num)this.hideGenZhu();else for(var i=0;12>i;i++)GameData.JSYS_GenZhu_Detail[i]>0&&Comm_jsys.instance.sendSocket({type:"bet",pos:i,gold:GameData.JSYS_GenZhu_Detail[i]});this.jsys_time.start(t.data.leftTime-3,function(){e.jsys_btn.hideBtn(),e.jsys_choose.hideBtn(),GameData.JSYS_State=2})}else 2==GameData.JSYS_State?(this.jsys_time.clean(),this.jsys_btn.hideBtn(),this.jsys_choose.hideBtn()):3==GameData.JSYS_State&&(this.jsys_time.clean(),this.jsys_btn.hideBtn(),this.jsys_choose.hideBtn())},s.onGameOpen=function(t){var e=this;this.jsys_choose.checkOverData(t.data),GameData.JSYS_Now_UserWinGold=t.data.winGold,GameData.JSYS_Now_DearGold=t.data.dealerTotalGold,this.jsys_box.start(t.data.pos[0].pos,function(){e.showWinGold(),e.jsys_choose.showAction(),egret.setTimeout(function(){e.jsys_history.addShow()},e,3500)})},s.onGameResult=function(t){if(0!=GameData.Zhuang_Id){var e="本局庄家";e+="<font color='#dbea26'>"+GameData.Zhuang_Name+"</font>",GameData.Zhuang_Gold<=t.data.dealerTotalGold?(e+="赢了",GameData.Zhuang_WinGold=t.data.dealerTotalGold-GameData.Zhuang_Gold,e+=GameData.Zhuang_WinGold<1e8?"<font color='#56bd47'>"+Math.floor(GameData.Zhuang_WinGold/1e4).toString()+"万</font>":"<font color='#56bd47'>"+Number(Math.floor(GameData.Zhuang_WinGold/1e6)/100).toString()+"亿</font>",UserData.User_Id==GameData.Zhuang_Id&&(this.txt_wingold.font="font_jsys_gold_fnt",GameData.Zhuang_WinGold<1e8?this.txt_wingold.text=Math.floor(GameData.Zhuang_WinGold/1e4).toString()+"w":this.txt_wingold.text=Number(Math.floor(GameData.Zhuang_WinGold/1e6)/100).toString()+"y")):(e+="输了",GameData.Zhuang_WinGold=GameData.Zhuang_Gold-t.data.dealerTotalGold,e+=GameData.Zhuang_WinGold<1e8?"<font color='#882f2c'>"+Math.floor(GameData.Zhuang_WinGold/1e4).toString()+"万</font>":"<font color='#882f2c'>"+Number(Math.floor(GameData.Zhuang_WinGold/1e6)/100).toString()+"亿</font>",UserData.User_Id==GameData.Zhuang_Id&&(this.txt_wingold.font="font_jsys_goldlose_fnt",GameData.Zhuang_WinGold<1e8?this.txt_wingold.text="-"+Math.floor(GameData.Zhuang_WinGold/1e4).toString()+"w":this.txt_wingold.text="-"+Number(Math.floor(GameData.Zhuang_WinGold/1e6)/100).toString()+"y")),e+="金币",basic.Dispatcher.dispatch(EventNames.JSYS_SHOWCHAT,{account:"0",chatType:1,headImgURL:"",msg:e,nickName:"系统",type:"chat",vipLevel:"15"})}UserData.User_Gold=t.data.gold,GameData.Zhuang_Gold=t.data.dealerTotalGold,GameData.JSYS_YaZhu_UserTotal=0},s.onShowHistory=function(t){this.jsys_history.show(t.data.historys),this.jsys_box.hideOver()},s.onChangeZhuang=function(t){if(GameData.Zhuang_Id!=t.data.dealerId){if(0!=GameData.Zhuang_Id){var e="";e+="<font color='#dbea26'>"+GameData.Zhuang_Name+"</font>",e+="下庄！",basic.Dispatcher.dispatch(EventNames.JSYS_SHOWCHAT,{account:"0",chatType:1,headImgURL:"",msg:e,nickName:"",type:"chat",vipLevel:"15"})}if(0!=t.data.dealerId){var i="";i+="<font color='#dbea26'>"+t.data.nickName+"</font>",i+="开始坐庄！",basic.Dispatcher.dispatch(EventNames.JSYS_SHOWCHAT,{account:"0",chatType:1,headImgURL:"",msg:i,nickName:"",type:"chat",vipLevel:"15"})}}GameData.Zhuang_Gold=t.data.gold,GameData.Zhuang_Id=t.data.dealerId,GameData.Zhuang_Name=t.data.nickName,GameData.Zhuang_Head=t.data.headImgURL,GameData.Zhuang_VIP=t.data.vipLevel,GameData.Zhuang_Times=t.data.dealerCount,this.jsys_zhuang.show(),this.jsys_btn.showZhuangBtn()},s.onChangeBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),GameData.Game_BeiLv=Number(GameData.Game_BeiLv.toString()+"0"),GameData.Game_BeiLv>1e8&&(GameData.Game_BeiLv=1e4),this.showBeiLv()},s.showBeiLv=function(){1e4==GameData.Game_BeiLv?this.txt_beilv.text="x10000":GameData.Game_BeiLv<1e8?this.txt_beilv.text="x"+String(GameData.Game_BeiLv).substring(0,String(GameData.Game_BeiLv).length-4)+"万":this.txt_beilv.text="x1亿"},e}(basic.SceneBase);egret.registerClass(SceneGame_JSYS,"SceneGame_JSYS");var SceneGuoFen=function(t){function e(){t.call(this),this.com_choose=[],this._timer_action=null,this.btn_num=[],this.now_exchangegold=0,this.skinName=SceneGuoFenSkin;for(var e=0;10>e;e++){var i=this["btn_num"+e];this.btn_num[e]=i,this.btn_num[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNumBtn,this)}for(var s=0;3>s;s++){var a=this["com_choose"+s];this.com_choose[s]=a}basic.Dispatcher.addListener(EventNames.GF_GAMEINFO,this.onGameInfo,this),basic.Dispatcher.addListener(EventNames.GF_GAMEOVER,this.onGameOver,this),basic.Dispatcher.addListener(EventNames.GF_LEAVEROOM,this.onGameleaveroom,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this),this.com_choose[0].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChooseBtn0,this),this.com_choose[1].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChooseBtn1,this),this.com_choose[2].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChooseBtn2,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){this.txt_exchangegold.text="0",this.head.show(UserData.User_Head),this.txt_exchangegold_over.text="0",this.txt_name.text=UserData.User_Name,this.txt_roomid.text=GameData.GF_RoomId,this.txt_gold.text=UserData.User_Gold.toString(),this.img_vip.source="txt_s_vip"+UserData.User_VIP.toString()+"_png",Comm.instance.sendSocket({type:"infoRoom",roomId:GameData.GF_RoomId})},s.startAction=function(){this._timer_action=new egret.Timer(200),this._timer_action.addEventListener(egret.TimerEvent.TIMER,this.onAction,this),this._timer_action.start()},s.onAction=function(t){var e=Number(this.com_other_choose.currentState);e+=1,e>2&&(e=0),this.com_other_choose.currentState=e.toString()},s.stopAction=function(){this._timer_action&&(this._timer_action.stop(),this._timer_action.removeEventListener(egret.TimerEvent.TIMER,this.onAction,this),this._timer_action=null)},s.onGameInfo=function(t){var e=!1;if(this.room_homeid=t.data.dealerUserId,this.stopAction(),this.txt_gold.text=UserData.User_Gold.toString(),0==t.data.exchangegold)this.now_choose_user=-1,this.now_choose_other=-1,t.data.dealerUserId==UserData.User_Id?(this.g_set.visible=!0,this.g_over.visible=!1,this.g_user_choose.visible=!1,this.com_other_choose.visible=!1):(this.g_set.visible=!1,this.g_over.visible=!0,this.g_user_choose.visible=!1,this.com_other_choose.visible=!1),this.txt_exchangegold_over.text="0";else if(this.g_set.visible=!1,this.g_over.visible=!0,this.g_user_choose.visible=!1,this.com_other_choose.visible=!1,this.now_exchangegold=t.data.exchangegold,this.txt_exchangegold_over.text=Math.floor(this.now_exchangegold/1e8).toString()+"亿",2==t.data.player.length){this.g_user_choose.visible=!0,this.com_other_choose.visible=!0;for(var i=0;2>i;i++)UserData.User_Id==t.data.player[i].userId?this.now_choose_user=t.data.player[i].choose:this.now_choose_other=t.data.player[i].choose;-1==this.now_choose_user?(t.data.dealerUserId==UserData.User_Id?(this.com_choose[0].visible=!0,this.com_choose[1].visible=!1,this.com_choose[2].visible=!0):(this.com_choose[0].visible=!1,this.com_choose[1].visible=!0,this.com_choose[2].visible=!1,Comm.instance.sendSocket({type:"bet",choose:1})),this.com_choose[0].currentState="0",this.com_choose[1].currentState="1",this.com_choose[2].currentState="2",this.startAction()):(this.com_choose[0].visible=!1,this.com_choose[1].visible=!0,this.com_choose[2].visible=!1,this.com_choose[1].currentState=this.now_choose_user.toString(),-1==this.now_choose_other?this.startAction():this.com_other_choose.currentState=this.now_choose_other.toString())}if(2==t.data.player.length)for(var s=0;2>s;s++)if(UserData.User_Id!=t.data.player[s].userId){e=!0,this.head_other.show(t.data.player[s].headImgURL),this.txt_name_other.text=t.data.player[s].nickName,this.txt_gold_other.text=t.data.player[s].gold.toString(),this.img_vip_other.source="txt_s_vip"+t.data.player[s].vipLevel.toString()+"_png";break}0==e&&(this.head_other.show(""),this.txt_name_other.text="",this.txt_gold_other.text="",this.img_vip_other.source="")},s.onGameOver=function(t){var e=this;1==t.data.win?basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"本局胜利，赢得"+Number(t.data.winGold).toString()+"金币"}):basic.Dispatcher.dispatch(EventNames.SHOW_TIPS,{tips:"本局失败，输掉"+Number(-t.data.winGold).toString()+"金币"}),UserData.User_Gold=t.data.gold,basic.Dispatcher.dispatch(EventNames.GOLD_CHANGE),this.now_exchangegold=0,this.txt_exchangegold.text="0",this.txt_exchangegold_over.text="0",egret.setTimeout(function(){e.room_homeid==UserData.User_Id&&Comm.instance.sendSocket({type:"infoRoom",roomId:GameData.GF_RoomId})},this,3e3)},s.onYesBtn=function(t){this.now_exchangegold>0&&Comm.instance.sendSocket({gold:this.now_exchangegold,type:"setexchangegold"})},s.onChooseBtn0=function(t){-1==this.now_choose_user&&Comm.instance.sendSocket({type:"bet",choose:0})},s.onChooseBtn1=function(t){-1==this.now_choose_user&&Comm.instance.sendSocket({type:"bet",choose:1})},s.onChooseBtn2=function(t){-1==this.now_choose_user&&Comm.instance.sendSocket({type:"bet",choose:2})},s.onNumBtn=function(t){var e=Number(t.target.name);this.now_exchangegold=1e8*Number(Math.floor(this.now_exchangegold/1e8).toString()+e.toString()),this.txt_exchangegold.text=Math.floor(this.now_exchangegold/1e8).toString()+"亿"},s.onAgainBtn=function(t){this.now_exchangegold=0,this.txt_exchangegold.text="0"},s.onDeleteBtn=function(t){this.now_exchangegold.toString().length>=9&&(this.now_exchangegold=1e8*Number(this.now_exchangegold.toString().substring(0,this.now_exchangegold.toString().length-9))),this.now_exchangegold>0?this.txt_exchangegold.text=Math.floor(this.now_exchangegold/1e8).toString()+"亿":this.txt_exchangegold.text="0"},s.onExitBtn=function(t){basic.SceneManager.removeTopScene(SceneNames.GUOFEN),Comm.instance.sendSocket({type:"leaveRoom"})},s.onGameleaveroom=function(t){basic.SceneManager.removeTopScene(SceneNames.GUOFEN)},e}(basic.SceneBase);egret.registerClass(SceneGuoFen,"SceneGuoFen");var SceneLoading=function(t){function e(){t.call(this),this.skinName=SceneLoadingSkin,this.txt_tips.text="",this.txt_password.inputType=egret.TextFieldInputType.PASSWORD,this.txt_password.displayAsPassword=!0,basic.Dispatcher.addListener(EventNames.SHOW_USERMESSAGE,this.onShowMessage,this),basic.Dispatcher.addListener(EventNames.SHOW_NEWACCOUNT,this.onShowNewAccount,this),this.btn_login.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogin,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtn,this),this.txt_account.addEventListener(egret.FocusEvent.FOCUS_IN,this.onAccountText,this),this.txt_account.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onAccountText,this),this.txt_password.addEventListener(egret.FocusEvent.FOCUS_IN,this.onPasswordText,this),this.txt_password.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onPasswordText,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onLoadingProgress=function(t){var e=t.data.itemsLoaded/t.data.itemsTotal*100;this.pb_loading.value=e,this.txt_loading.text=Math.floor(e).toString()+"%"},s.beforeShow=function(t){this.g_login.visible=!1,this.g_loading.visible=!1,this.btn_start.visible=!0,1==GameConfig.isApp()&&"iOS"==egret.Capabilities.os?(this.txt_account.text=UserData.User_Account,this.txt_password.text=UserData.User_Password):null!=basic.localStorage.getItem("account")&&""!=basic.localStorage.getItem("account")?(this.txt_account_tips.visible=!1,this.txt_account.text=basic.localStorage.getItem("account"),null!=basic.localStorage.getItem("password")&&""!=basic.localStorage.getItem("password")?(this.txt_password_tips.visible=!1,this.txt_password.text=basic.localStorage.getItem("password")):(this.txt_password.text="",this.txt_password_tips.visible=!0)):(this.txt_account.text="",this.txt_account_tips.visible=!0,1==Comm.instance.jugeConnect()?Comm.instance.sendSocket({type:"newAccount"}):this.connectNetRegister()),this.txt_tips.text="",basic.Dispatcher.addListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},s.beforeHide=function(){basic.Dispatcher.removeListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},s.onShowNewAccount=function(t){UserData.User_Account=t.data.account,UserData.User_Password=t.data.password,this.txt_account_tips.visible=!1,this.txt_password_tips.visible=!1,this.txt_account.text=UserData.User_Account,this.txt_password.text=UserData.User_Password,1==GameConfig.isApp()?"iOS"==egret.Capabilities.os?(window.IOSsaveAccount(UserData.User_Account),window.IOSsavePassword(UserData.User_Password)):"Android"==egret.Capabilities.os&&(basic.localStorage.setItem("account",UserData.User_Account),basic.localStorage.setItem("password",UserData.User_Password)):(basic.localStorage.setItem("account",UserData.User_Account),basic.localStorage.setItem("password",UserData.User_Password))},s.onShowMessage=function(t){this.txt_account.text=UserData.User_Account,this.txt_password.text=UserData.User_Password,0==t.data.showtype?""==UserData.User_Account?(this.txt_account_tips.visible=!0,1==Comm.instance.jugeConnect()?Comm.instance.sendSocket({type:"newAccount"}):this.connectNetRegister()):this.txt_account_tips.visible=!1:1==t.data.showtype&&(""==UserData.User_Password?this.txt_password_tips.visible=!0:this.txt_password_tips.visible=!1)},s.onAccountText=function(t){t.type==egret.FocusEvent.FOCUS_IN?this.txt_account_tips.visible=!1:t.type==egret.FocusEvent.FOCUS_OUT&&""==this.txt_account.text&&(this.txt_account_tips.visible=!0)},s.onPasswordText=function(t){t.type==egret.FocusEvent.FOCUS_IN?this.txt_password_tips.visible=!1:t.type==egret.FocusEvent.FOCUS_OUT&&""==this.txt_password.text&&(this.txt_password_tips.visible=!0)},s.onStartBtn=function(t){this.g_login.visible=!0,this.g_loading.visible=!1,this.btn_start.visible=!1,basic.SoundManager.instance.playEffect("sound_btn_mp3")},s.onLogin=function(t){this.txt_tips.text="",basic.SoundManager.instance.playEffect("sound_btn_mp3"),""==this.txt_account.text?this.txt_tips.text="请输入账号！":""==this.txt_password.text?this.txt_tips.text="请输入密码！":1==Comm.instance.jugeConnect()?(this.txt_tips.text="登陆中...",UserData.User_Account=this.txt_account.text,UserData.User_Password=this.txt_password.text,Comm.instance.sendSocket({type:"login",account:this.txt_account.text,password:this.txt_password.text})):(this.txt_tips.text="登陆中...",UserData.User_Account=this.txt_account.text,UserData.User_Password=this.txt_password.text,this.connectNetLogin())},s.connectNetRegister=function(){var t=this;Comm.instance.init(),egret.setTimeout(function(){1==Comm.instance.jugeConnect()?Comm.instance.sendSocket({type:"newAccount"}):t.connectNetRegister()},this,300)},s.connectNetLogin=function(){var t=this;Comm.instance.init(),egret.setTimeout(function(){1==Comm.instance.jugeConnect()?Comm.instance.sendSocket({type:"login",account:t.txt_account.text,password:t.txt_password.text}):t.connectNetLogin()},this,300)},e}(basic.SceneBase);egret.registerClass(SceneLoading,"SceneLoading");var SceneRanking=function(t){function e(){t.call(this),this.is_get=[!1,!1],this.skinName=SceneRankingSkin,this.tabbar_type.selectedIndex=0,this.viewStack.selectedIndex=this.tabbar_type.selectedIndex,this.list0.dataProvider=this._data0=new eui.ArrayCollection,this.list1.dataProvider=this._data1=new eui.ArrayCollection,this.list0.itemRenderer=RankingListItem,this.list1.itemRenderer=RankingListItem,this.tabbar_type.addEventListener(egret.Event.CHANGE,this.onTypeBtn,this),basic.Dispatcher.addListener(EventNames.SHOW_RANKING,this.onShowRanking,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){this.is_get=[!1,!1],Comm.instance.sendSocket({type:"rankingList",rankType:this.tabbar_type.selectedIndex})},s.onShowRanking=function(t){for(var e=[],i=0;i<Math.min(30,t.data.data.length);i++){var s=t.data.data[i];s.num=i+1,e[i]=s}0==this.tabbar_type.selectedIndex?(this._data0.source=e,this._data0.refresh()):(this._data1.source=e,this._data1.refresh()),this.is_get[this.tabbar_type.selectedIndex]=!0},s.onTypeBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.viewStack.selectedIndex=this.tabbar_type.selectedIndex,0==this.is_get[this.tabbar_type.selectedIndex]&&Comm.instance.sendSocket({type:"rankingList",rankType:this.tabbar_type.selectedIndex})},e}(basic.SceneBase);egret.registerClass(SceneRanking,"SceneRanking");var RankingListItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.headImgURL),this.txt_name.text=this.data.nickName,this.txt_id.text="ID:"+this.data.userId,this.com_ranking.currentState=this.data.num,this.img_vip.source="txt_s_vip"+this.data.vipLeval+"_png",this.data.gold<1e8?this.txt_gold.text=Math.floor(this.data.gold/1e4).toString()+"万":this.txt_gold.text=Number(Math.floor(this.data.gold/1e6)/100).toString()+"亿"},e}(eui.ItemRenderer);egret.registerClass(RankingListItem,"RankingListItem");var SceneSaveBox=function(t){function e(){t.call(this),this.change_gold=1e4,this.skinName=SceneSaveBoxSkin,this.txt_tips.text="",this.showChangeGold(),basic.Dispatcher.addListener(EventNames.GOLD_CHANGE,this.onGoldChange,this),this.btn_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetBtn,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this),this.btn_left.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftBtn,this),this.btn_right.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightBtn,this),this.btn_seposit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSepositBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){-1==GameData.Game_Type?this.rect_back.visible=!1:this.rect_back.visible=!0,this.showGold()},s.onGoldChange=function(t){this.showGold(),this.txt_tips.text="存取成功!"},s.showGold=function(){UserData.User_Gold<1e8?this.txt_gold.text=Math.floor(UserData.User_Gold/1e4).toString()+"w":this.txt_gold.text=Number(Math.floor(UserData.User_Gold/1e6)/100).toString()+"y",UserData.User_SaveGold<1e8?this.txt_savegold.text=Math.floor(UserData.User_SaveGold/1e4).toString()+"w":this.txt_savegold.text=Number(Math.floor(UserData.User_SaveGold/1e6)/100).toString()+"y"},s.showChangeGold=function(){this.change_gold<1e8?this.txt_change_gold.text=Math.floor(this.change_gold/1e4).toString()+"万 整存整取":this.txt_change_gold.text=Math.floor(this.change_gold/1e8).toString()+"亿 整存整取"},s.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),-1==GameData.Game_Type?basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:0}):basic.SceneManager.removeTopScene(SceneNames.SAVEBOX)},s.onGetBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.txt_tips.text="",this.change_gold>UserData.User_SaveGold?this.txt_tips.text="保存金币不足！":Comm.instance.sendSocket({type:"exchangeGold",gold:this.change_gold,exchangeType:0})},s.onSepositBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.txt_tips.text="",this.change_gold>UserData.User_Gold?this.txt_tips.text="现有金币不足！":Comm.instance.sendSocket({type:"exchangeGold",gold:this.change_gold,exchangeType:1})},s.onLeftBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.change_gold=Math.floor(this.change_gold/10),this.change_gold<1e4&&(this.change_gold=1e11),this.showChangeGold()},s.onRightBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),this.change_gold=Math.floor(10*this.change_gold),this.change_gold>1e11&&(this.change_gold=1e4),this.showChangeGold()},e}(basic.SceneBase);egret.registerClass(SceneSaveBox,"SceneSaveBox");var SceneShop=function(t){function e(){t.call(this),this.shop_data=[],this.skinName=SceneShopSkin,this.shop_data=[{icon:"icon_s_shop0_png",goldname:"6000万",gold:6e7,money:10},{icon:"icon_s_shop1_png",goldname:"3亿",gold:3e8,money:50},{icon:"icon_s_shop2_png",goldname:"6亿",gold:6e8,money:100},{icon:"icon_s_shop3_png",goldname:"30亿",gold:3e9,money:500},{icon:"icon_s_shop4_png",goldname:"60亿",gold:6e9,money:1e3}],this.list.dataProvider=this._data=new eui.ArrayCollection(this.shop_data),this.list.itemRenderer=ShopListItem,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){},s.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:0})},e}(basic.SceneBase);egret.registerClass(SceneShop,"SceneShop");var ShopListItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.dataChanged=function(){t.prototype.dataChanged.call(this),this.img_icon.source=this.data.icon,this.txt_gold.text="x"+this.data.goldname,this.btn_buy.label="￥"+String(this.data.money),this.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyBtn,this)},s.onBuyBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3")},e}(eui.ItemRenderer);egret.registerClass(ShopListItem,"ShopListItem");var SceneStart=function(t){function e(){t.call(this),this.now_show=0,this.is_startlogin=!0,this._timer_check=null,this.now_showGame_type=-1,this.skinName=SceneStartSkin,basic.Dispatcher.addListener(EventNames.SHOW_FACE,this.onShowFace,this),basic.Dispatcher.addListener(EventNames.GOLD_CHANGE,this.onShowGold,this),basic.Dispatcher.addListener(EventNames.DATA_CHANGE,this.onDataChange,this),this.tabbar_menu.addEventListener(egret.Event.CHANGE,this.onMenuBtn,this),this.tabbar_menu0.addEventListener(egret.Event.CHANGE,this.onMenuBtn1,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(){if(this.show_goldtimes=0,GameData.Game_Type=-1,UserData.User_YaZhu=GameData.JSYS_YaZhu_UserTotal+GameData.EBG_YaZhu_UserTotal,1==UserData.is_APP?(this.tabbar_menu.visible=!1,this.tabbar_menu0.visible=!0):(this.tabbar_menu.visible=!0,this.tabbar_menu0.visible=!1),this.start_up.showGold(UserData.User_Gold-UserData.User_YaZhu),this.start_up.showMessage(UserData.User_Head,UserData.User_Id,UserData.User_VIP),basic.SoundManager.instance.playMusic("sound_start_mp3"),0==this.is_startlogin)Comm.instance.sendSocket({type:"dataUpdate"});else{var t=new Date;this.is_startlogin=!1,this.now_time=Number(t),this._timer_check=new egret.Timer(500),this._timer_check.addEventListener(egret.TimerEvent.TIMER,this.onCheckBackGame,this),this._timer_check.start()}},s.beforeHide=function(){basic.SoundManager.instance.stopMusic()},s.onCheckBackGame=function(t){var e=new Date;Number(e)-this.now_time>1e3?-1!=GameData.Game_Type&&(this.now_showGame_type=GameData.Game_Type,basic.SceneManager.instance.back()):-1!=this.now_showGame_type&&(this.start_cards.enterGame(this.now_showGame_type),this.now_showGame_type=-1),this.now_time=Number(e)},s.showFace=function(){0==this.now_show?this.start_cards.visible=!0:1==this.now_show?basic.SceneManager.addTopScene(SceneNames.SHOP):2==this.now_show?basic.SceneManager.addTopScene(SceneNames.RANKING):3==this.now_show?basic.SceneManager.addTopScene(SceneNames.SAVEBOX):4==this.now_show?basic.SceneManager.addTopScene(SceneNames.ABOUT):5==this.now_show?basic.SceneManager.addTopScene(SceneNames.CUSTOM):6==this.now_show&&basic.SceneManager.addTopScene(SceneNames.CLAUSE)},s.hideFace=function(){0==this.now_show?this.start_cards.visible=!1:1==this.now_show?basic.SceneManager.removeTopScene(SceneNames.SHOP):2==this.now_show?basic.SceneManager.removeTopScene(SceneNames.RANKING):3==this.now_show?basic.SceneManager.removeTopScene(SceneNames.SAVEBOX):4==this.now_show?basic.SceneManager.removeTopScene(SceneNames.ABOUT):5==this.now_show?basic.SceneManager.removeTopScene(SceneNames.CUSTOM):6==this.now_show&&basic.SceneManager.removeTopScene(SceneNames.CLAUSE)},s.onShowFace=function(t){this.hideFace(),this.now_show=t.data.nowshow,this.now_show<4?this.tabbar_menu.selectedIndex=this.now_show:this.tabbar_menu.selectedIndex=-1,this.showFace()},s.onDataChange=function(t){"exchangeGold"==t.data.type?(UserData.User_Gold=t.data.gold,UserData.User_SaveGold=t.data.goldReserve,basic.Dispatcher.dispatch(EventNames.GOLD_CHANGE),this.start_up.showGold(UserData.User_Gold)):"dataChange"==t.data.type&&"gold"==t.data.dataType&&(this.show_goldtimes+=1,UserData.User_Gold=t.data.value,2==this.show_goldtimes&&-1==GameData.Game_Type&&(UserData.User_YaZhu=0,GameData.EBG_YaZhu_UserTotal=0,GameData.JSYS_YaZhu_UserTotal=0),basic.Dispatcher.dispatch(EventNames.GOLD_CHANGE),this.start_up.showGold(UserData.User_Gold-UserData.User_YaZhu))
},s.onShowGold=function(t){this.start_up.showGold(UserData.User_Gold-UserData.User_YaZhu)},s.onMenuBtn=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:this.tabbar_menu.selectedIndex})},s.onMenuBtn1=function(t){basic.SoundManager.instance.playEffect("sound_btn_mp3"),0==this.tabbar_menu0.selectedIndex?basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:this.tabbar_menu0.selectedIndex}):basic.Dispatcher.dispatch(EventNames.SHOW_FACE,{nowshow:this.tabbar_menu0.selectedIndex+1})},e}(basic.SceneBase);egret.registerClass(SceneStart,"SceneStart");var SceneWaiting=function(t){function e(){t.call(this),this._tween_rotation=null,this.trun_speed=400,this.skinName=SceneWaitingSkin}__extends(e,t);var i=(__define,e),s=i.prototype;return s.beforeShow=function(t){this.txt_progress.text="0%",this._tween_rotation=egret.Tween.get(this.com_loading,{loop:!0}).to({rotation:360},this.trun_speed),basic.Dispatcher.addListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},s.beforeHide=function(t){this._tween_rotation&&(this._tween_rotation.setPaused(!0),this._tween_rotation=null),basic.Dispatcher.removeListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},s.onLoadingProgress=function(t){var e=t.data.itemsLoaded/t.data.itemsTotal*100;this.txt_progress.text=Math.floor(e).toString()+"%"},e}(basic.SceneBase);egret.registerClass(SceneWaiting,"SceneWaiting");